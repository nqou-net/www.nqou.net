# パターンDNA解析 プロンプトテンプレート

> 対象ワークフロー: `/planning-v3` → `/series-unified-*`

---

## 使用方法

```
@[/planning-v3]

「Perlで学ぶ手で覚えるデザインパターンシリーズ」の構造案を作成してください。

## 入力パラメータ

### 問診票（症状リスト）
| # | 症状 | 説明 | 重症度 |
|---|------|------|--------|
| 1 | <症状名> | <コードの問題点の説明> | 軽症/中症/重症 |
| 2 | <症状名> | <コードの問題点の説明> | 軽症/中症/重症 |
| 3 | <症状名> | <コードの問題点の説明> | 軽症/中症/重症 |

### 処方候補（使用パターン）
| 順序 | パターン名 | 適応症状 |
|------|-----------|---------|
| 1    | <パターン名> | <このパターンで治療する症状> |
| 2    | <パターン名> | <このパターンで治療する症状> |
| 3    | <パターン名> | <このパターンで治療する症状> |

### 治療設定
- 出力形式: 統合版 / 連載版
- 全体回数: 6-10回目安
- 公開予定日: YYYY-MM-DD

### 患者（想定読者）プロファイル
- スキルレベル: 初級 / 中級
- 前提知識: <Perl基礎、オブジェクト指向の概念など>
- 興味領域: <ゲーム/ツール/セキュリティなど>
```

---

## 生成される内容

1. **症状カタログ** — コードの問題点とその重症度
2. **DNA解析マップ** — 症状とパターンの対応表（禁忌・副作用含む）
3. **3つの治療計画（A/B/C）** — それぞれ異なる治療方針
4. **各計画のBefore/Afterメトリクス** — 定量的な改善予測
5. **推薦案と理由**

---

## 制約事項（自動適用）

- 1記事1症状の原則を守る
- 「問診→DNA解析→処方→投薬→経過観察」のストーリー展開
- パターン名は「処方箋」として最終回で総括
- 各回にBefore/Afterメトリクスを含める
- 過剰処方（シンプルな問題に複雑なパターン）を避ける

---

## 症状辞典

### 代表的な症状カタログ

| 症状名 | 説明 | 典型的処方 |
|--------|------|-----------|
| **条件分岐過多症候群** | if/switch文が10個以上 | Strategy, State |
| **コピペ依存症** | 同じ処理が3箇所以上 | Template Method |
| **密結合感染症** | クラス間の依存が複雑 | Mediator, Observer |
| **継承過多症** | 継承階層が5段以上 | Composite, Decorator |
| **状態遷移混乱症** | 状態管理が複雑 | State, Memento |
| **拡張不能症** | 新機能追加が困難 | Visitor, Strategy |
| **生成ロジック散乱症** | オブジェクト生成が分散 | Factory Method, Builder |
| **インターフェース不適合症** | 既存APIと合わない | Adapter, Facade |

---

## 入力例

### 例1: 症状から始める（推奨）

```
@[/planning-v3]

## 問診票
| # | 症状 | 説明 | 重症度 |
|---|------|------|--------|
| 1 | 条件分岐過多症候群 | 敵AIのif文が20個以上 | 重症 |
| 2 | 生成ロジック散乱症 | 敵生成が複数箇所に分散 | 中症 |
| 3 | コピペ依存症 | 攻撃処理が3クラスで重複 | 中症 |

## 処方候補
Strategy, Factory Method, Template Method

## 治療設定
形式: 統合版
回数: 8回程度
テーマ方向: ゲーム系（ダンジョン探索）
```

### 例2: パターンから逆引き

```
@[/planning-v3]

Strategy + Observer + Command の3パターンで「手で覚えるシリーズ」を作成。
これらのパターンが治療する典型的な症状から問診票を自動生成してください。
形式: 統合版
```

---

## 次のステップ

構造案が生成されたら:

1. `/series-unified-prepare` — 準備（案選定、日時決定）
2. `/series-unified-code` — コード実装
3. `/series-unified-write` — 原稿作成
4. `/series-unified-visual` — 挿絵生成（オプション）
5. `/series-unified-review` — 最終レビュー

---

**作成日**: 2026-02-02
**参照**: `.agent/workflows/planning-v3.md`
