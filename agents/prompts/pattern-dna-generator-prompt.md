# パターンDNA解析 ジェネレータ（メタプロンプト）

> このメタプロンプトは、`pattern-dna-analysis-prompt.md` 形式のプロンプトを自動生成します。

---

## 概要

デザインパターンを入力として受け取り、以下を自動生成します:

1. **症状カタログ** — パターンが解決する問題を「症状」として逆引き
2. **問診票** — 読者が自己診断できるチェックリスト
3. **処方計画** — パターンを「処方」として適用する計画

---

## 使用方法

```
以下のデザインパターンから「パターンDNA解析」形式のプロンプトを生成してください:

## 入力パターン
| # | パターン名 | カテゴリ |
|---|-----------|---------|
| 1 | <パターン名> | 生成系/構造系/振る舞い系 |
| 2 | <パターン名> | 生成系/構造系/振る舞い系 |
| 3 | <パターン名> | 生成系/構造系/振る舞い系 |

## シリーズ設定
- 出力形式: 統合版 / 連載版
- 全体回数: 6-10回目安
- 難易度: 初級向け / 中級向け

## テーマの希望（オプション）
- 方向性: <ゲーム系/ツール系/セキュリティ系など>
- 避けたいテーマ: <既存と重複を避けるもの>
```

---

## 生成ロジック

### Step 1: パターン→症状の逆引き

各パターンに対して、以下のテンプレートから症状を抽出:

#### Strategy
- 条件分岐過多症候群（if文が10個以上）
- アルゴリズム切り替え困難症
- 実行時ポリシー変更不能症

#### Factory Method
- 生成ロジック散乱症
- コンストラクタ過負荷症
- 具体クラス依存症

#### Template Method
- コピペ依存症（同じ処理が3箇所以上）
- 骨格共有欠如症
- フック不在症

#### Observer
- 状態変化伝達不全
- ポーリング過多症
- イベント駆動欠如症

#### Decorator
- 継承爆発症
- 機能合成困難症
- 動的拡張不能症

#### Command
- 操作履歴不在症
- Undo/Redo不能症
- 操作のキュー化困難症

#### State
- 状態遷移混乱症
- フラグ変数過多症
- 状態依存条件分岐症

#### Memento
- 状態保存不能症
- スナップショット欠如症
- 履歴復元困難症

#### Composite
- ツリー構造表現困難症
- 再帰処理散乱症
- 部分-全体表現不統一症

#### Adapter
- インターフェース不適合症
- レガシー統合困難症
- API変換散乱症

#### Facade
- サブシステム露出過多症
- 複雑性隠蔽不能症
- エントリポイント分散症

#### ... （他のパターンも同様）

---

### Step 2: 重症度の自動判定

| 条件 | 重症度 |
|------|--------|
| 単独で発生、影響範囲が限定的 | 軽症 |
| 複数箇所に影響、リファクタリング必要 | 中症 |
| システム全体に影響、設計変更必要 | 重症 |

---

### Step 3: 遺伝子型（複合症状）の特定

入力パターンの組み合わせから、典型的な遺伝子型を特定:

| パターン組み合わせ | 遺伝子型 | 複合症状 |
|------------------|---------|---------|
| Strategy + Factory | Type-SF | 分岐過多 + 生成散乱 |
| State + Memento | Type-SM | 状態混乱 + 履歴不在 |
| Observer + Command | Type-OC | 伝達不全 + 操作履歴不在 |
| Decorator + Composite | Type-DC | 継承爆発 + ツリー構造困難 |

---

## 出力形式

以下の `pattern-dna-analysis-prompt.md` 形式で出力:

```markdown
@[/planning-v3]

「Perlで学ぶコードドクターシリーズ」の構造案を作成してください。

## 入力パラメータ

### 問診票（症状リスト）
| # | 症状 | 説明 | 重症度 |
|---|------|------|--------|
| 1 | <逆引きした症状1> | <説明> | <重症度> |
| 2 | <逆引きした症状2> | <説明> | <重症度> |
| 3 | <逆引きした症状3> | <説明> | <重症度> |

### 処方候補（使用パターン）
| 順序 | パターン名 | 適応症状 |
|------|-----------|---------|
| 1 | <入力パターン1> | <症状1> |
| 2 | <入力パターン2> | <症状2> |
| 3 | <入力パターン3> | <症状3> |

### 治療設定
- 出力形式: <統合版/連載版>
- 全体回数: <回数>回目安
- 公開予定日: YYYY-MM-DD

### 患者プロファイル
- スキルレベル: <難易度>
- 興味領域: <テーマ方向>
```

---

## 使用例

### 入力

```
Strategy + Observer + Command から「パターンDNA解析」形式のプロンプトを生成してください。
形式: 統合版
テーマ: セキュリティツール系
```

### 出力

```markdown
@[/planning-v3]

「Perlで学ぶコードドクターシリーズ」の構造案を作成してください。

## 入力パラメータ

### 問診票（症状リスト）
| # | 症状 | 説明 | 重症度 |
|---|------|------|--------|
| 1 | 条件分岐過多症候群 | セキュリティチェックのif文が15個以上 | 重症 |
| 2 | 状態変化伝達不全 | 脅威検知時の通知が手動 | 中症 |
| 3 | 操作履歴不在症 | セキュリティ操作のUndo不可 | 中症 |

### 処方候補（使用パターン）
| 順序 | パターン名 | 適応症状 |
|------|-----------|---------|
| 1 | Strategy | 条件分岐過多症候群 |
| 2 | Observer | 状態変化伝達不全 |
| 3 | Command | 操作履歴不在症 |

### 治療設定
- 出力形式: 統合版
- 全体回数: 8回目安

### 患者プロファイル
- スキルレベル: 中級
- 興味領域: セキュリティツール
```

---

**作成日**: 2026-02-02
**参照**: `agents/prompts/pattern-dna-analysis-prompt.md`
