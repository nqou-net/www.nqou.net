# アウトライン: 第1回-PerlでTodo CLIアプリを作ろう - Taskクラスの設計

## メタ情報

- **シリーズ名**: シンプルなTodo CLIアプリ
- **回**: 第1回（全7回）
- **タイトル**: 第1回-PerlでTodo CLIアプリを作ろう - Taskクラスの設計
- **新しい概念**: Task クラスの設計
- **推奨タグ**: perl, moo, todo-cli, oop
- **description**: PerlとMooでTodo CLIアプリを開発する連載の第1回。Taskクラスの設計を通じて、実用的なアプリケーション開発の第一歩を学びます。

---

## 要約（1行）

Todoアプリの要件を整理し、Mooを使ってTask（タスク）クラスを設計・実装することで、オブジェクト指向で実用的なアプリケーション開発を始める方法を学びます。

---

## H2/H3 見出しの階層

### H2: 新シリーズのはじまり

### H2: 前シリーズの振り返りと本シリーズの位置づけ

#### H3: 前シリーズで学んだこと
#### H3: 本シリーズで学ぶこと

### H2: Todoアプリの要件を整理しよう

#### H3: 必要な機能を洗い出す
#### H3: タスクが持つべきデータを考える

### H2: なぜオブジェクト指向で作るのか

#### H3: 手続き型で書いた場合の問題点
#### H3: クラスにまとめるメリット

### H2: Taskクラスを設計する

#### H3: 属性を定義する（id, title, completed）
#### H3: コード例1: Taskクラスの実装

### H2: Taskクラスにメソッドを追加する

#### H3: completeメソッドの実装
#### H3: to_stringメソッドの実装
#### H3: コード例2: メソッドを追加したTaskクラス

### H2: まとめ

### H2: 次回予告

---

## 各セクションの概要

### H2: 新シリーズのはじまり

- 新シリーズ「シンプルなTodo CLIアプリ」の開始を告知
- 全7回の連載で、実用的なTodo CLIアプリを作りながらデザインパターンを学ぶことを説明
- 対象読者（Perl入学式卒業程度、前シリーズ「Mooで覚えるオブジェクト指向」読了者）を明示
- シリーズ全体で扱う主要なデザインパターン（Repository、Command）の予告

### H2: 前シリーズの振り返りと本シリーズの位置づけ

#### H3: 前シリーズで学んだこと

- 前シリーズ「Mooで覚えるオブジェクト指向プログラミング」で学んだ概念の簡潔な振り返り
  - `has`と`sub`でデータとロジックをまとめる
  - `is => 'ro'`、`is => 'rw'`で読み書きを制御
  - `required`と`default`
  - ロール（`Moo::Role`）と委譲（`handles`）
  - 型制約（`isa`、`Types::Standard`）
- 前シリーズ第1回・第12回への内部リンク

#### H3: 本シリーズで学ぶこと

- 前シリーズで学んだOOPの基礎を「実践」に活かす
- Repositoryパターン（データの永続化を抽象化）
- Commandパターン（操作のオブジェクト化）
- 題材を「掲示板」から「Todo CLIアプリ」に変えて学ぶ

### H2: Todoアプリの要件を整理しよう

#### H3: 必要な機能を洗い出す

- Todoアプリに必要な基本操作を箇条書きで整理
  - タスクの追加（add）
  - タスクの一覧表示（list）
  - タスクの完了マーク（done）
  - タスクの削除（delete）
- これらの操作は後の回でCommandパターンとして実装することを予告

#### H3: タスクが持つべきデータを考える

- タスクの属性を洗い出す
  - `id`: タスクを一意に識別するID
  - `title`: タスクの内容（何をするか）
  - `completed`: 完了したかどうか（真偽値）
- 後の回で追加される可能性のある属性（期限、優先度など）に触れつつ、今回はシンプルに保つ

### H2: なぜオブジェクト指向で作るのか

#### H3: 手続き型で書いた場合の問題点

- ハッシュの配列でタスクを管理する例を提示
- 問題点を指摘
  - 完了処理があちこちに散らばる
  - タスクの表示形式を変えたいときに影響範囲が広い
  - テストしづらい
- 「問題→解決」の流れを作る導入

#### H3: クラスにまとめるメリット

- データ（属性）とロジック（メソッド）が1箇所にまとまる
- 変更の影響範囲が限定される
- テストしやすくなる
- 前シリーズで学んだ内容の復習を兼ねる

### H2: Taskクラスを設計する

#### H3: 属性を定義する（id, title, completed）

- 各属性の意味と設計判断を説明
  - `id`: 読み取り専用（`is => 'ro'`）、必須（`required`）、整数型（`isa => Int`）
  - `title`: 読み取り専用、必須、文字列型（`isa => Str`）
  - `completed`: 読み書き可能（`is => 'rw'`）、デフォルト値0、真偽値型（`isa => Bool`）
- 型制約を使う理由（前シリーズ第12回で学んだ内容を活用）

#### H3: コード例1: Taskクラスの実装

- **コード例1の配置場所**
- Taskクラスの基本実装（属性のみ）を提示
- コードの解説

### H2: Taskクラスにメソッドを追加する

#### H3: completeメソッドの実装

- タスクを完了状態にするメソッド
- `$self->completed(1)`でcompletedを真にする
- なぜセッターを直接呼び出すのではなくメソッドにするのか（意図の明確化、将来の拡張性）

#### H3: to_stringメソッドの実装

- タスクを文字列として表示するメソッド
- 完了状態に応じて「[x]」または「[ ]」を表示
- 例: `[x] 1: 買い物` または `[ ] 2: 掃除`

#### H3: コード例2: メソッドを追加したTaskクラス

- **コード例2の配置場所**
- completeメソッドとto_stringメソッドを追加した完全なTaskクラスを提示
- 動作確認のための簡単な利用例も含める

### H2: まとめ

- 本回で学んだことを箇条書きで整理
  - Todoアプリの要件を整理した
  - タスクが持つべきデータ（id, title, completed）を定義した
  - Taskクラスを設計・実装した
  - completeとto_stringメソッドを追加した
- 「データとロジックをまとめる」という前シリーズの学びを実践したことを強調

### H2: 次回予告

- 次回（第2回）のテーマを予告：Repositoryパターン入門
- タスクの保存・取得をどう抽象化するかを学ぶ
- 「なぜ永続化を抽象化する必要があるのか」という問いを投げかけて興味を引く

---

## コード例の配置場所

| コード例 | 配置セクション | 内容 |
|---------|--------------|------|
| コード例1 | H2: Taskクラスを設計する > H3: コード例1: Taskクラスの実装 | Taskクラスの属性定義（id, title, completed） |
| コード例2 | H2: Taskクラスにメソッドを追加する > H3: コード例2: メソッドを追加したTaskクラス | complete, to_stringメソッドを追加した完全なTaskクラス |

---

## コード例（参考）

### コード例1: Taskクラスの属性定義

```perl
package Task {
    use Moo;
    use Types::Standard qw(Int Str Bool);

    has id => (
        is       => 'ro',
        isa      => Int,
        required => 1,
    );

    has title => (
        is       => 'ro',
        isa      => Str,
        required => 1,
    );

    has completed => (
        is      => 'rw',
        isa     => Bool,
        default => 0,
    );
};
```

### コード例2: メソッドを追加したTaskクラス

```perl
package Task {
    use Moo;
    use Types::Standard qw(Int Str Bool);

    has id => (
        is       => 'ro',
        isa      => Int,
        required => 1,
    );

    has title => (
        is       => 'ro',
        isa      => Str,
        required => 1,
    );

    has completed => (
        is      => 'rw',
        isa     => Bool,
        default => 0,
    );

    sub complete {
        my $self = shift;
        $self->completed(1);
    }

    sub to_string {
        my $self = shift;
        my $mark = $self->completed ? 'x' : ' ';
        return sprintf "[%s] %d: %s", $mark, $self->id, $self->title;
    }
};

# 使用例
my $task = Task->new(id => 1, title => '買い物');
print $task->to_string . "\n";  # [ ] 1: 買い物
$task->complete;
print $task->to_string . "\n";  # [x] 1: 買い物
```

---

## 推奨タグ

- perl
- moo
- todo-cli
- oop

---

## 内部リンク候補

| リンク先 | 用途 |
|---------|------|
| `/2021/10/31/191008/` | 前シリーズ第1回（Moo入門）への導入リンク |
| `/2025/12/30/163810/` | 前シリーズ第2回（データとロジックをまとめる）への参照 |
| `/2025/12/30/163820/` | 前シリーズ第12回（型制約）への参照 |

---

## 執筆時の注意事項

1. **第1回特有の要件を満たす**
   - 連載全体の導入と位置づけを冒頭で明確に
   - 前提知識（Perl入学式卒業程度、前シリーズ読了）を明示
   - 第2回への導線を末尾に配置

2. **「問題→解決」の流れ**
   - 「なぜオブジェクト指向で作るのか」セクションで、手続き型の問題点からクラス化のメリットへ導く

3. **1記事1概念の原則**
   - 本回の新概念は「Taskクラスの設計」のみ
   - Repository/Commandパターンは予告のみで詳細は後の回に譲る

4. **コード例は2つまで**
   - コード例1: 属性定義
   - コード例2: メソッド追加版（完全なTaskクラス）

5. **前シリーズのスタイルを踏襲**
   - `[@nqounet](https://x.com/nqounet)です。`で始める
   - `{{< linkcard "URL" >}}`で内部リンク
   - まとめは箇条書き
   - 次回予告で興味を引く

---

**作成日**: 2026年1月1日
**担当エージェント**: SEO・メタ情報専門エージェント
