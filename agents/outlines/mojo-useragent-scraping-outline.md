# Mojo::UserAgent でスクレイピング入門 - アウトライン案

**作成日**: 2025年12月30日  
**対象記事**: Perl/Mojo::UserAgent を使ったWebスクレイピング入門記事  
**対象読者**: 基本的なプログラミングの知識はある初心者  
**ペルソナ**: Perlでウェブサイトのスクレイピングをして、情報を取得したい  
**目標**: PerlでWebサイトのスクレイピングができるようになる

---

## 案A: 基礎から実践へ - 段階的学習アプローチ

### タイトル候補
「Perl スクレイピング入門｜Mojo::UserAgent と Mojo::DOM で始める Web データ収集」

### 要約（1行）
Perl の Mojo::UserAgent を使ったHTTPリクエストから、Mojo::DOM によるCSSセレクタでのHTML解析まで、Webスクレイピングの基礎を段階的に学ぶ入門ガイド。

### meta description（120-160文字）
Perl でWebスクレイピングを始めたい方へ。Mojo::UserAgent でHTTPリクエストを送り、Mojo::DOM でHTMLを解析する基礎を解説。CSSセレクタでデータ抽出、Cookie管理、エラー処理まで、実践的なコード例で学べます。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojo-useragent`

### H2/H3 見出し構造

#### H2: はじめに - Perl でスクレイピングを始めよう
- スクレイピングとは何か
- なぜ Mojo::UserAgent なのか
- この記事で学べること

#### H2: 環境を準備する
##### H3: Mojolicious のインストール
- cpanm での導入方法
- 必要な Perl バージョン
##### H3: 動作確認
- 最初のリクエストを送る
- 正常に動くか確認

#### H2: HTTPリクエストの基本
##### H3: GET リクエストを送る
- 基本構文
- レスポンスの確認方法
##### H3: POST リクエストを送る
- フォームデータの送信
- JSON データの送信
##### H3: レスポンスを扱う
- ステータスコードの確認
- ボディの取得

#### H2: HTML を解析する - Mojo::DOM の使い方
##### H3: DOM オブジェクトを取得する
- result->dom の基本
##### H3: at メソッド - 単一要素の取得
- 基本構文
- text で文字列を取得
##### H3: find メソッド - 複数要素の取得
- 基本構文
- each でループ処理

#### H2: CSSセレクタで要素を抽出する
##### H3: 基本的なセレクタ
- タグ名、クラス名、ID
##### H3: 属性セレクタ
- 属性の存在、値の一致
##### H3: 階層セレクタ
- 子要素、子孫要素

#### H2: 実践編：スクレイピングのユースケース
##### H3: Cookie/セッション管理
- ログインが必要なサイト
##### H3: エラーハンドリング
- 接続エラー、HTTPエラー
##### H3: リトライ処理
- 指数バックオフ

#### H2: スクレイピングのマナーと注意点
##### H3: robots.txt を確認する
##### H3: 適切なリクエスト間隔
##### H3: User-Agent の設定
##### H3: 法的・倫理的考慮事項

#### H2: まとめ
- 学んだことの振り返り
- 次のステップ
- 参考リンク

---

## 案B: ハンズオン形式 - 実践から学ぶアプローチ

### タイトル候補
「動かして学ぶ Perl スクレイピング｜Mojo::UserAgent でデータ収集を体験しよう」

### 要約（1行）
「まず動かす」をモットーに、Mojo::UserAgent と Mojo::DOM で実際に Web サイトからデータを取得しながら、スクレイピングの基礎を体験で学ぶ実践型入門。

### meta description（120-160文字）
実践しながら学ぶ Perl スクレイピング入門。Mojo::UserAgent で実際にWebサイトからデータを収集。コピペで動くコード例と解説で、初心者でも挫折せずにスクレイピングの基礎が身につきます。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojolicious`

### H2/H3 見出し構造

#### H2: はじめに - まずは動かしてみよう
- この記事のゴール
- 必要な環境

#### H2: Step 1：最初のスクレイピング
##### H3: 環境をセットアップ
- インストール手順
##### H3: 10行で動くサンプル
- コピペして実行
- 結果を確認
##### H3: 何をしたのか簡単に説明
- UA でリクエスト
- DOM で解析

#### H2: Step 2：特定の情報を抽出する
##### H3: CSSセレクタの基本
- タグ、クラス、ID
##### H3: リンクを全て取得する
- find と each
##### H3: 表のデータを取得する
- テーブルからデータ抽出

#### H2: Step 3：フォームを送信する
##### H3: POST リクエストの基本
- form パラメータ
##### H3: ログインを試す
- Cookie の自動管理
##### H3: 認証後のページを取得

#### H2: Step 4：エラーに対処する
##### H3: 接続エラー
- タイムアウト設定
##### H3: HTTP エラー
- ステータスコード確認
##### H3: リトライ処理
- 実装例

#### H2: 振り返り：何を学んだか
##### H3: Mojo::UserAgent の役割
##### H3: Mojo::DOM の役割
##### H3: CSS セレクタの重要性

#### H2: もっとやってみよう - 練習課題
##### H3: 課題1：ニュースサイトの見出し取得
##### H3: 課題2：複数ページの巡回
##### H3: 課題3：JSON API の呼び出し

#### H2: 守るべきマナー
##### H3: robots.txt
##### H3: リクエスト間隔
##### H3: User-Agent

#### H2: まとめ
- Step 1-4 の振り返り
- 次のステップ

---

## 案C: 比較で理解する - 他ライブラリとの違いから学ぶ

### タイトル候補
「なぜ Mojo::UserAgent？Perl スクレイピングライブラリ比較と実践入門」

### 要約（1行）
LWP::UserAgent や Web::Scraper との比較を通じて Mojo::UserAgent の利点を理解し、モダンな Perl スクレイピング手法を基礎から実践まで習得する入門記事。

### meta description（120-160文字）
LWP と何が違う？Mojo::UserAgent がスクレイピングに最適な理由を解説。Mojo::DOM との連携、非同期処理、モダンな設計など、他ライブラリとの比較で Mojo の優位性が理解できる Perl スクレイピング入門。

### 推奨タグ
- `perl`
- `mojo-useragent`
- `web-scraping`

### H2/H3 見出し構造

#### H2: はじめに - スクレイピングライブラリ選びに迷ったら
- Perl のスクレイピングライブラリは複数ある
- この記事で Mojo::UserAgent を推す理由
- 目標：最適なツールで効率的にスクレイピング

#### H2: Perl スクレイピングライブラリを比較する
##### H3: LWP::UserAgent
- 長い歴史と実績
- 同期処理のみ
- DOM 解析は別途必要
##### H3: Web::Scraper
- DSL で直感的
- 保守が低調
##### H3: Mojo::UserAgent
- 非同期対応
- DOM 統合
- 活発な開発

#### H2: Mojo::UserAgent を選ぶ理由
##### H3: Mojo::DOM との統合
- 一貫した API
##### H3: モダンな設計
- Promise 対応
##### H3: 活発なコミュニティ
- 継続的なアップデート

#### H2: 基礎から学ぶ Mojo::UserAgent
##### H3: インストールと準備
##### H3: GET リクエスト
##### H3: POST リクエスト
##### H3: レスポンス処理

#### H2: HTML 解析 - Mojo::DOM の威力
##### H3: CSS セレクタで要素抽出
##### H3: at と find の使い分け
##### H3: 属性値の取得

#### H2: 実践：完全なスクレイピング例
##### H3: ログインとセッション管理
##### H3: 複数ページの巡回
##### H3: エラーハンドリング

#### H2: Mojo::UserAgent ならではの機能
##### H3: 非同期リクエスト
- Promise::Async パターン
##### H3: プロキシサポート
- HTTP/SOCKS5
##### H3: WebSocket 対応

#### H2: スクレイピングのマナー
##### H3: robots.txt の確認
##### H3: リクエスト間隔
##### H3: 法的考慮事項

#### H2: まとめ
- Mojo::UserAgent を選んだ理由
- 次のステップ

---

## 第1版 課題分析

### 全体的な課題
1. **SEO改善の余地**: タイトルと見出しのキーワード配置を最適化
2. **初心者への配慮**: コード例の説明を詳細化
3. **内部リンク**: 調査で見つけた関連記事へのリンク誘導を組み込む

### 案A の改善点
- 「環境を準備する」のセクションが冗長
- 実践例の具体性が不足

### 案B の改善点
- Step 構成は良いが、概念説明が薄い
- 練習課題の難易度調整が必要

### 案C の改善点
- 比較に時間をかけすぎて本題が遅れる
- 非同期機能の説明は入門には高度すぎる

---

## 改善版（第2版）

## 案A: 基礎から実践へ - 段階的学習アプローチ（改善版）

### タイトル候補
「Perl スクレイピング入門｜Mojo::UserAgent で Web からデータを取得する完全ガイド」

### 要約（1行）
Perl の Mojo::UserAgent でHTTPリクエストを送り、Mojo::DOM のCSSセレクタでHTMLを解析。Webスクレイピングの基礎から実践まで、初心者向けに段階的に解説する完全ガイド。

### meta description（120-160文字）
Perl でスクレイピングを始めたい初心者向け完全ガイド。Mojo::UserAgent でHTTPリクエスト、Mojo::DOM でHTML解析。CSSセレクタでのデータ抽出、Cookie管理、エラー処理まで実践コード付きで解説します。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojo-useragent`

### H2/H3 見出し構造

#### H2: はじめに - Perl でスクレイピングを始めよう
- スクレイピングとは：Webサイトからデータを自動取得する技術
- Mojo::UserAgent を選ぶ理由：DOM解析統合、モダンな設計
- この記事のゴール：基本的なスクレイピングができるようになる

#### H2: 環境準備：Mojolicious をインストールする
##### H3: cpanm でインストール
- コマンド例
- 必要な Perl バージョン（5.16以上）
##### H3: 動作確認：最初のリクエスト
- 5行で動くサンプル
- 成功すれば準備完了

#### H2: HTTP リクエストの基本を理解する
##### H3: GET リクエスト - ページを取得する
- `$ua->get($url)` の基本構文
- レスポンスオブジェクトの確認
- ボディの取得方法
##### H3: POST リクエスト - データを送信する
- フォームデータの送信
- JSON データの送信
##### H3: レスポンスのエラーチェック
- `is_success` でステータス確認
- エラーメッセージの取得

#### H2: HTML を解析する - Mojo::DOM 入門
##### H3: DOM オブジェクトを取得する
- `$res->dom` で DOM を取得
- HTML 全体を文字列で取得
##### H3: at メソッド - 1つの要素を取得
- 基本構文と使用例
- `text` で文字列を抽出
- `attr` で属性値を取得
##### H3: find メソッド - 複数の要素を取得
- 基本構文と使用例
- `each` でループ処理
- `map` で値を収集

#### H2: CSS セレクタをマスターする
##### H3: 基本セレクタ：タグ・クラス・ID
- `div`, `.class`, `#id` の書き方
- コード例
##### H3: 属性セレクタ
- `[href]` 属性の存在
- `[href*="example"]` 部分一致
- コード例
##### H3: 階層セレクタ
- `parent > child` 直接の子
- `ancestor descendant` 子孫
- コード例
##### H3: 擬似クラス
- `:nth-child(n)`, `:not(selector)`
- コード例

#### H2: 実践：よくあるスクレイピングパターン
##### H3: パターン1：Cookie とセッション管理
- ログインが必要なサイトへのアクセス
- Cookie jar の自動管理
- コード例
##### H3: パターン2：エラーハンドリング
- 接続エラーへの対処
- HTTP エラーへの対処
- Try::Tiny との組み合わせ
##### H3: パターン3：リトライ処理
- 指数バックオフの実装
- 最大リトライ回数の設定
- コード例

#### H2: スクレイピングのマナーと法的注意点
##### H3: robots.txt を必ず確認する
- WWW::RobotRules との組み合わせ
- コード例
##### H3: 適切なリクエスト間隔を空ける
- sleep での待機
- サーバー負荷への配慮
##### H3: User-Agent を適切に設定する
- ボット名とコンタクト情報
- コード例
##### H3: 法的・倫理的な注意事項
- 利用規約の確認
- 著作権への配慮
- API があれば API を使う

#### H2: まとめ - 次のステップへ
- 学んだこと：HTTP リクエスト、DOM 解析、CSS セレクタ
- 発展トピック：非同期リクエスト、ページネーション対応
- 関連記事へのリンク
- 参考リソース

---

## 案B: ハンズオン形式 - 実践から学ぶアプローチ（改善版）

### タイトル候補
「動かして学ぶ Perl スクレイピング｜Mojo::UserAgent 実践チュートリアル」

### 要約（1行）
「まず動かす」をモットーに、Mojo::UserAgent と Mojo::DOM でWebサイトからデータを取得する体験を通じて、スクレイピングの基礎を実践的に習得するハンズオンチュートリアル。

### meta description（120-160文字）
動かしながら学ぶ Perl スクレイピング入門。Mojo::UserAgent でWebからデータ収集を体験。Step形式で進むチュートリアル、コピペで動くコード、練習課題付きで初心者でもスクレイピングが身につきます。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojolicious`

### H2/H3 見出し構造

#### H2: はじめに - コードを動かしながら学ぼう
- この記事のアプローチ：まず動かす、後から理解
- ゴール：Webサイトからデータを取得できるようになる
- 対象読者：Perl の基礎を知っている方

#### H2: 準備：環境をセットアップする
##### H3: Mojolicious をインストール
- コマンド1行でインストール
- 確認コマンド
##### H3: この記事で使うファイル構成
- 作業ディレクトリの準備

#### H2: Step 1 - 最初のスクレイピング
##### H3: 10行で動くサンプルコード
- 完全なコード例
- コピペして実行
##### H3: 実行結果を確認する
- 何が出力されたか
##### H3: コードを1行ずつ理解する
- Mojo::UserAgent の生成
- GET リクエスト
- DOM の取得
- タイトルの抽出

#### H2: Step 2 - 複数の要素を取得する
##### H3: すべてのリンクを取得する
- find メソッドの使い方
- each でループ
- コード例
##### H3: 特定のクラスの要素だけ取得
- CSS セレクタで絞り込み
- コード例
##### H3: 属性値を取得する
- href, src などの属性
- attr メソッド

#### H2: Step 3 - フォームを送信する
##### H3: POST リクエストの基本
- form パラメータ
- コード例
##### H3: ログインをシミュレート
- Cookie の自動管理
- 認証後のページ取得
- コード例（概念のみ）

#### H2: Step 4 - エラーに対処する
##### H3: 接続エラーへの対応
- タイムアウト設定
- エラーチェック
##### H3: HTTP エラーへの対応
- ステータスコード確認
- 404, 500 などの処理
##### H3: リトライ処理を実装する
- 指数バックオフ
- コード例

#### H2: ここで振り返り - 何を学んだか
##### H3: Mojo::UserAgent とは
- HTTP クライアント
- 機能のまとめ
##### H3: Mojo::DOM とは
- HTML/XML パーサー
- 機能のまとめ
##### H3: CSS セレクタとは
- 要素を指定する記法
- よく使うパターン

#### H2: 練習課題に挑戦
##### H3: 課題1：テーブルからデータを抽出
- 期待する出力
- ヒント
##### H3: 課題2：画像のURLをすべて取得
- 期待する出力
- ヒント
##### H3: 課題3：見出しタグを階層的に取得
- 期待する出力
- ヒント

#### H2: 守るべきスクレイピングのマナー
##### H3: robots.txt を確認する
##### H3: リクエスト間隔を空ける
##### H3: 適切な User-Agent を設定する
##### H3: 法的注意事項を理解する

#### H2: まとめ - 次に進むために
- Step 1-4 の振り返り
- 発展トピック：非同期処理、ページネーション
- 関連記事へのリンク
- 参考リソース

---

## 案C: 比較で理解する - Mojo::UserAgent の優位性を知る（改善版）

### タイトル候補
「なぜ Mojo::UserAgent？LWP との比較で学ぶ Perl スクレイピング入門」

### 要約（1行）
LWP::UserAgent との違いを理解しながら、Mojo::UserAgent + Mojo::DOM によるモダンな Perl スクレイピング手法を基礎から実践まで学ぶ入門記事。

### meta description（120-160文字）
LWP と Mojo の違いがわからない？Mojo::UserAgent がスクレイピングに最適な理由を解説。DOM 統合、モダンな API など比較で理解し、実践コードで Perl スクレイピングの基礎を習得できます。

### 推奨タグ
- `perl`
- `mojo-useragent`
- `web-scraping`

### H2/H3 見出し構造

#### H2: はじめに - どのライブラリを使うべき？
- Perl のスクレイピングライブラリ選びに迷う
- この記事の結論：Mojo::UserAgent がおすすめ
- ゴール：選んだ理由を理解し、使いこなす

#### H2: 30秒で理解する - 主なライブラリの特徴
##### H3: LWP::UserAgent
- 長い歴史、安定性
- 同期処理のみ、DOM は別途必要
##### H3: Web::Scraper
- DSL で直感的
- 保守が低調
##### H3: Mojo::UserAgent
- DOM 統合、モダン設計
- 活発な開発

#### H2: Mojo::UserAgent を選ぶ3つの理由
##### H3: 理由1：Mojo::DOM との統合
- HTTPリクエストとHTML解析が一貫したAPI
- コード比較（LWP vs Mojo）
##### H3: 理由2：シンプルで直感的なAPI
- メソッドチェーン
- コード例
##### H3: 理由3：活発なコミュニティ
- 継続的なアップデート
- 最新機能への対応

#### H2: Mojo::UserAgent の基礎
##### H3: インストール
- cpanm での導入
##### H3: GET リクエスト
- 基本構文
- レスポンス処理
##### H3: POST リクエスト
- フォーム送信
- JSON 送信

#### H2: Mojo::DOM で HTML を解析する
##### H3: at と find の使い分け
- 単一要素 vs 複数要素
##### H3: CSS セレクタの基本
- タグ、クラス、ID、属性
##### H3: テキストと属性の取得
- text, attr メソッド

#### H2: 実践：完全なスクレイピング例
##### H3: Cookie/セッション管理
- ログイン処理
- Cookie jar
##### H3: エラーハンドリング
- 接続エラー、HTTP エラー
##### H3: リトライ処理
- 指数バックオフ

#### H2: LWP で困っていたことが Mojo で解決する
##### H3: DOM 解析の統合
- LWP では HTML::TreeBuilder など別途必要
- Mojo は一体で使える
##### H3: コードの簡潔さ
- 同じ処理のコード行数比較

#### H2: スクレイピングのマナー
##### H3: robots.txt の確認
##### H3: リクエスト間隔
##### H3: 法的注意事項

#### H2: まとめ - Mojo::UserAgent でモダンなスクレイピングを
- 選んだ理由の振り返り
- 発展トピック
- 関連記事へのリンク
- 参考リソース

---

## 第2版 課題分析

### 改善できた点
1. **構成の明確化**: 各案の特徴がより明確に
2. **初心者への配慮**: コード例のステップを細分化
3. **タイトルの改善**: SEOキーワードをより効果的に配置

### さらなる改善点（第3版へ）
1. **SEO の最終調整**: 主要キーワード「スクレイピング」「Mojo::UserAgent」の配置最適化
2. **meta description の精緻化**: 120-160文字の厳密な調整
3. **見出しの具体性向上**: 読者が得られる価値をより明確に
4. **内部リンク戦略**: 関連記事（/2025/12/22/000000/ 等）への誘導を意識

---

## 最終版（第3版）

## 案A: 基礎から実践へ - 段階的学習アプローチ（最終版）

### タイトル候補
「Perl Webスクレイピング入門｜Mojo::UserAgent と Mojo::DOM で始めるデータ収集」

### 要約（1行）
Perl の Mojo::UserAgent でHTTPリクエストを送り、Mojo::DOM のCSSセレクタでHTMLを解析。Webスクレイピングの基礎から Cookie 管理、エラー処理まで、初心者向けに段階的に解説する完全ガイド。

### meta description（120-160文字）
Perl でWebスクレイピングを始めたい初心者向け完全ガイド。Mojo::UserAgent でHTTPリクエスト、Mojo::DOM でHTML解析する方法を基礎から解説。CSSセレクタ、Cookie管理、エラー処理まで実践コード付きで学べます。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojo-useragent`

### H2/H3 見出し構造

#### H2: はじめに - Perl で Web スクレイピングを始めよう
- スクレイピングとは：Webサイトからデータを自動取得する技術
- なぜ Mojo::UserAgent か：DOM解析が統合されたモダンなライブラリ
- この記事のゴール：基本的なスクレイピングができるようになる
- 対象読者：Perl の基礎を知っている方

#### H2: 環境準備 - Mojolicious をインストールする
##### H3: cpanm でインストール
- `cpanm Mojo` コマンド
- 必要な Perl バージョン（5.16以上）
- インストール確認
##### H3: 最初のリクエストで動作確認
- 5行で動くサンプルコード
- 実行結果の確認

#### H2: HTTP リクエストの基本を学ぶ
##### H3: GET リクエスト - Web ページを取得する
- `$ua->get($url)` の基本構文
- result メソッドでレスポンス取得
- body でHTMLを取得
- 完全なコード例
##### H3: POST リクエスト - データを送信する
- フォームデータの送信（form）
- JSON データの送信（json）
- 完全なコード例
##### H3: レスポンスをチェックする
- `is_success` で成功判定
- `code` でステータスコード
- `message` でエラーメッセージ

#### H2: HTML 解析入門 - Mojo::DOM の使い方
##### H3: DOM オブジェクトを取得する
- `$res->dom` で DOM を取得
- DOM とは何か簡単に説明
##### H3: at メソッド - 1つの要素を取得
- 基本構文：`$dom->at('selector')`
- `text` で文字列を抽出
- `attr('href')` で属性値を取得
- コード例：ページタイトルの取得
##### H3: find メソッド - 複数の要素を取得
- 基本構文：`$dom->find('selector')`
- `each` でループ処理
- `map` で値を一括収集
- コード例：すべてのリンクを取得

#### H2: CSS セレクタをマスターする
##### H3: 基本セレクタ - タグ・クラス・ID
- タグ名：`div`, `a`, `p`
- クラス：`.classname`
- ID：`#idname`
- 組み合わせ：`div.article`
##### H3: 属性セレクタ - 属性で要素を絞り込む
- `[href]` 属性が存在する要素
- `[href="value"]` 完全一致
- `[href*="value"]` 部分一致
- `[href^="value"]` 前方一致
##### H3: 階層セレクタ - 親子関係で指定
- `parent > child` 直接の子要素
- `ancestor descendant` 子孫要素
- `ul > li` と `ul li` の違い
##### H3: 擬似クラス - 特殊な条件で選択
- `:nth-child(n)` n番目の子要素
- `:first-child`, `:last-child`
- `:not(selector)` 否定

#### H2: 実践パターン - よくあるスクレイピング処理
##### H3: パターン1：Cookie/セッション管理
- ログインが必要なサイトへのアクセス
- Cookie jar の自動管理機能
- POSTでログイン後にGETで会員ページを取得
- 完全なコード例
##### H3: パターン2：エラーハンドリング
- 接続エラーへの対処
- HTTP エラー（404, 500）への対処
- Try::Tiny との組み合わせ
- 完全なコード例
##### H3: パターン3：リトライ処理
- 一時的なエラーへの対策
- 指数バックオフ（Exponential Backoff）
- 最大リトライ回数の設定
- 完全なコード例

#### H2: スクレイピングのマナーと法的注意点
##### H3: robots.txt を必ず確認する
- robots.txt とは何か
- WWW::RobotRules での確認方法
- コード例
##### H3: 適切なリクエスト間隔を空ける
- サーバー負荷への配慮
- 最低2秒は空ける
- コード例
##### H3: User-Agent を適切に設定する
- ボット名とコンタクト情報を設定
- transactor->name メソッド
- コード例
##### H3: 法的・倫理的な注意事項
- 利用規約の確認
- 著作権への配慮
- 個人情報の扱い
- API が公開されていれば API を使う

#### H2: まとめ - Web スクレイピングの第一歩を踏み出した
- 学んだこと：HTTPリクエスト、DOM解析、CSSセレクタ
- 実践パターン：Cookie管理、エラー処理、リトライ
- 次のステップ：非同期リクエスト、ページネーション対応
- 関連記事へのリンク
- 公式ドキュメントと参考リソース

---

## 案B: ハンズオン形式 - 実践から学ぶアプローチ（最終版）

### タイトル候補
「動かして学ぶ Perl スクレイピング｜Mojo::UserAgent 実践ハンズオン」

### 要約（1行）
「まず動かす」をモットーに、Mojo::UserAgent と Mojo::DOM で Web サイトからデータを取得する体験を通じて、Perl スクレイピングの基礎を実践的に習得するハンズオンチュートリアル。

### meta description（120-160文字）
動かしながら学ぶ Perl スクレイピング入門。Mojo::UserAgent で Web からデータ収集を体験するハンズオン形式。Step形式のチュートリアルと練習課題で、初心者でも確実にスクレイピングスキルが身につきます。

### 推奨タグ
- `perl`
- `web-scraping`
- `mojolicious`

### H2/H3 見出し構造

#### H2: はじめに - コードを動かしながら学ぼう
- この記事のアプローチ：まず動かす、後から理解
- ゴール：Web サイトからデータを自動取得できるようになる
- 対象読者：Perl の基礎を知っている方
- 準備するもの：Perl 5.16以上、cpanm

#### H2: 準備 - 環境をセットアップする
##### H3: Mojolicious をインストール
- `cpanm Mojo` コマンド1行でインストール
- インストール確認方法
##### H3: 作業ディレクトリを準備
- サンプルコード用のディレクトリ作成

#### H2: Step 1 - 最初のスクレイピングを体験する
##### H3: 10行で動くサンプルコード
- 完全なコード（コピペ可能）
- ファイルとして保存して実行
##### H3: 実行結果を確認する
- 出力内容の説明
- 成功したことの確認
##### H3: コードを1行ずつ理解する
- use 文の意味
- UserAgent オブジェクトの生成
- GET リクエストの送信
- DOM オブジェクトの取得
- タイトルタグの抽出

#### H2: Step 2 - 複数の要素を取得する
##### H3: すべてのリンクを取得する
- find メソッドの導入
- each でループ処理
- 完全なコード例と実行結果
##### H3: 特定のクラスの要素だけ取得する
- CSS セレクタで絞り込み
- `.classname` の書き方
- 完全なコード例
##### H3: 属性値を取得する
- href, src, title などの属性
- attr メソッドの使い方
- 完全なコード例

#### H2: Step 3 - フォームを送信する
##### H3: POST リクエストの基本
- form パラメータでデータ送信
- コード例
##### H3: ログイン処理をシミュレートする
- Cookie の自動管理
- ログイン後のページ取得
- コード例（概念説明）
##### H3: JSON API を呼び出す
- json パラメータでリクエスト
- JSON レスポンスの処理
- コード例

#### H2: Step 4 - エラーに対処する
##### H3: 接続エラーへの対応
- タイムアウト設定
- エラーオブジェクトの確認
- コード例
##### H3: HTTP エラーへの対応
- ステータスコードの確認
- 404, 500 などの処理
- コード例
##### H3: リトライ処理を実装する
- 指数バックオフとは
- 実装コード例
- 最大リトライ回数の設定

#### H2: ここで振り返り - 何を学んだか
##### H3: Mojo::UserAgent とは
- Perl のモダンな HTTP クライアント
- 主な機能のまとめ
##### H3: Mojo::DOM とは
- HTML/XML をパースするライブラリ
- CSS セレクタで要素抽出
##### H3: 学んだ CSS セレクタ
- タグ、クラス、ID
- 属性セレクタ
- よく使うパターンの一覧表

#### H2: 練習課題に挑戦しよう
##### H3: 課題1：テーブルからデータを抽出する
- 期待する出力の例
- ヒント：`tr`, `td` セレクタ
- 解答例
##### H3: 課題2：画像の URL をすべて取得する
- 期待する出力の例
- ヒント：`img[src]` セレクタ
- 解答例
##### H3: 課題3：見出しタグを階層的に取得する
- 期待する出力の例
- ヒント：`h1, h2, h3` セレクタ
- 解答例

#### H2: スクレイピングのマナーを守る
##### H3: robots.txt を確認する
- robots.txt の意味
- 確認方法
##### H3: リクエスト間隔を空ける
- サーバー負荷への配慮
- 最低2秒は空ける
##### H3: 適切な User-Agent を設定する
- ボット名を名乗る
- コード例
##### H3: 法的注意事項を理解する
- 利用規約、著作権、個人情報

#### H2: まとめ - 次に進むために
- Step 1-4 で学んだことの振り返り
- 練習課題で得た実践力
- 次のステップ：非同期処理、ページネーション対応
- 関連記事へのリンク
- 参考リソース

---

## 案C: 比較で理解する - Mojo::UserAgent の優位性（最終版）

### タイトル候補
「なぜ Mojo::UserAgent を選ぶ？LWP との比較で学ぶ Perl スクレイピング入門」

### 要約（1行）
LWP::UserAgent との違いを比較しながら、Mojo::UserAgent + Mojo::DOM によるモダンな Perl スクレイピング手法を基礎から実践まで習得する入門記事。

### meta description（120-160文字）
LWP::UserAgent と Mojo::UserAgent の違いがわからない？DOM 統合、シンプルな API など比較で Mojo の優位性を解説。実践コード付きで Perl スクレイピングの基礎を学べる入門ガイドです。

### 推奨タグ
- `perl`
- `mojo-useragent`
- `web-scraping`

### H2/H3 見出し構造

#### H2: はじめに - どのライブラリでスクレイピングすべき？
- Perl のスクレイピングライブラリは複数ある
- この記事の結論：Mojo::UserAgent がおすすめ
- ゴール：選んだ理由を理解し、実践で使いこなす
- 対象読者：Perl の基礎を知っている方

#### H2: 30秒で比較 - Perl スクレイピングライブラリの特徴
##### H3: LWP::UserAgent
- 20年以上の歴史、安定性抜群
- 同期処理のみ
- DOM 解析は HTML::TreeBuilder など別途必要
##### H3: Web::Scraper
- DSL で直感的に書ける
- 保守が低調（最終更新が古い）
##### H3: Mojo::UserAgent
- Mojo::DOM と統合、一貫した API
- 非同期処理もサポート
- 活発な開発が継続中
##### H3: 比較表
- 機能比較の表

#### H2: Mojo::UserAgent を選ぶ3つの理由
##### H3: 理由1：Mojo::DOM との統合
- HTTP リクエストと HTML 解析が一体
- LWP との コード比較（同じ処理を両方で書く）
- 行数とシンプルさの違い
##### H3: 理由2：直感的でシンプルな API
- メソッドチェーンが使える
- CSS セレクタで要素抽出
- コード例
##### H3: 理由3：活発なコミュニティ
- 継続的なアップデート
- 最新バージョン情報
- 新機能への対応

#### H2: Mojo::UserAgent の基礎を学ぶ
##### H3: インストール
- cpanm Mojo
- 動作確認
##### H3: GET リクエスト
- 基本構文
- レスポンスの取得
- 完全なコード例
##### H3: POST リクエスト
- フォームデータ送信
- JSON 送信
- 完全なコード例
##### H3: エラーチェック
- is_success, code, message

#### H2: Mojo::DOM で HTML を解析する
##### H3: at と find の使い分け
- at：1つの要素を取得
- find：複数の要素を取得
- どちらを使うべきか
##### H3: CSS セレクタの基本
- タグ、クラス、ID
- 属性セレクタ
- 階層セレクタ
- コード例
##### H3: テキストと属性の取得
- text メソッド
- attr メソッド
- コード例

#### H2: 実践：完全なスクレイピング例
##### H3: Cookie/セッション管理
- ログイン処理
- Cookie jar の自動管理
- 完全なコード例
##### H3: エラーハンドリング
- 接続エラー
- HTTP エラー
- 完全なコード例
##### H3: リトライ処理
- 指数バックオフ
- 完全なコード例

#### H2: LWP で困っていたことが Mojo で解決する
##### H3: 課題1：DOM 解析が別ライブラリ
- LWP + HTML::TreeBuilder のコード
- Mojo::UserAgent + Mojo::DOM のコード
- 比較：コードがシンプルに
##### H3: 課題2：CSS セレクタが使えない
- XPath vs CSS セレクタ
- CSS セレクタの直感性

#### H2: スクレイピングのマナー
##### H3: robots.txt の確認
##### H3: リクエスト間隔
##### H3: User-Agent 設定
##### H3: 法的注意事項

#### H2: まとめ - Mojo::UserAgent でモダンなスクレイピングを
- Mojo::UserAgent を選んだ理由の振り返り
- 学んだこと：HTTP リクエスト、DOM 解析、CSS セレクタ
- 次のステップ：非同期処理、ページネーション
- 関連記事へのリンク
- 参考リソース

---

## 第3版（最終版）作成完了

**作成日時**: 2025年12月30日  
**最終改善点**:
1. **SEO 強化**: 主要キーワード「スクレイピング」「Perl」「Mojo::UserAgent」を見出しに効果的に配置
2. **meta description**: 120-160文字の範囲で検索意図に合致する説明文に調整
3. **入門者への配慮**: 段階的なステップ構成、コード例の充実
4. **タグの最適化**: 英語小文字・ハイフン形式で統一（`perl`, `web-scraping`, `mojo-useragent`, `mojolicious`）
5. **内部リンク対応**: 調査で見つけた関連記事（`/2025/12/22/000000/`、`/2025/12/04/000000/`）への誘導を意識した構成

### 3案の最終的な差別化ポイント

**案A（基礎から実践へ）**:
- 対象読者: 体系的に基礎から学びたい人
- 強み: 理論と実践のバランスが取れた王道アプローチ
- 差別化: HTTPリクエスト→DOM解析→CSSセレクタ→実践パターンと段階的に進む

**案B（ハンズオン形式）**:
- 対象読者: まず動かしてから理解したい実践派
- 強み: Step 形式で進み、練習課題で定着
- 差別化: 「10行で動くサンプル」から始まり、練習課題で自力で書けるようになる

**案C（比較で理解する）**:
- 対象読者: LWP など他のライブラリ経験者、技術選定で迷っている人
- 強み: 「なぜ Mojo を選ぶのか」が明確になる
- 差別化: コード比較で Mojo の優位性を視覚的に理解

---

## 最終推奨

### 推奨案: 案A（基礎から実践へ）

#### 理由
1. **検索意図への最適合致**: 「Perl スクレイピング入門」という検索クエリに最も直接的に応答
2. **入門者への配慮**: 基礎から段階的に進む構成で、初心者が挫折しにくい
3. **SEO効果**: H2/H3 に主要キーワードが自然に配置されている
4. **網羅性**: HTTPリクエスト、DOM解析、CSSセレクタ、実践パターン、マナーまで網羅
5. **拡張性**: 調査で見つけた関連記事へのリンクを自然に組み込みやすい

#### ただし、こんな選択もあり
- **実践重視の読者が多い場合**: 案B（ハンズオン形式）を選択
- **LWP 経験者が多い読者層**: 案C（比較で理解）を選択
- **シリーズ化する場合**: 案A を入門編、案B を実践編、案C を発展編として展開

---

## 内部リンク推奨

調査ドキュメントで見つけた関連記事を、記事内で適切にリンクすることを推奨:

1. **必須リンク**: `/2025/12/22/000000/` - PerlでのWebスクレイピング比較記事
2. **推奨リンク**: `/2025/12/04/000000/` - Mojolicious入門（基礎知識として参照）
3. **発展リンク**: `/2025/12/14/183305/` - Perl WebSocket入門（発展的内容）

---

## ドキュメント情報

- **作成日**: 2025年12月30日
- **最終更新**: 2025年12月30日
- **バージョン**: 3.0（最終版）
- **作成者**: search-engine-optimization エージェント
- **レビュー回数**: 3回
- **ステータス**: 完了

---

**以上、「Mojo::UserAgent でスクレイピング入門」の3つのアウトライン案（第3版・最終版）の作成を完了しました。**
