# 連載構造案: Mooで覚えるオブジェクト指向プログラミング（全12回）

## 概要

- **対象読者**: プログラムといえばスパゲティコードだと思っている初心者
- **ペルソナ**: オブジェクト指向プログラミングの必要性がわからない
- **目標**: オブジェクト指向プログラミングを感覚的に理解できるようになる
- **トーン**: 優しく初心者向け（第1回と同様）
- **制約**:
  - コード例は毎回2つまで
  - 新しい概念は1記事あたり1つまで
- **推奨タグ**: `perl`, `object-oriented`, `programming`

---

## 案A: 概念積み上げアプローチ

### 要約
Mooの機能を一つずつ丁寧に学び、最後に掲示板として統合する「基礎固め重視」の構成

### 各回の構成

#### 第1回（公開済み）: blessは忘れよう
- **主要トピック**: Moo導入と用語理解
- **大見出し**:
  - H2: blessについて
  - H2: Mooを使ってみる
  - H2: まずは用語を覚えましょう
  - H2: まとめ
- **コード例**:
  1. MyAppクラスの基本実装（hoge.pl）

---

#### 第2回: コードを読み解こう
- **主要トピック**: package、has、subの意味を理解する
- **大見出し**:
  - H2: 前回のコードをもう一度見てみよう
  - H2: packageとは何か
    - H3: 名前空間という考え方
  - H2: hasでプロパティを定義する
    - H3: is => 'rw' の意味
  - H2: subでメソッドを定義する
    - H3: $selfって何？
  - H2: まとめ
- **コード例**:
  1. 第1回のコード（再掲・コメント付き解説版）
  2. プロパティを追加したバージョン（name属性追加）

---

#### 第3回: プロパティをもっと知ろう
- **主要トピック**: プロパティのオプション（ro/rw、required、default）
- **大見出し**:
  - H2: 読み取り専用のプロパティ
    - H3: is => 'ro' で値を守る
  - H2: 必須のプロパティ
    - H3: required => 1
  - H2: 初期値を設定する
    - H3: default の使い方
  - H2: なぜプロパティを守る必要があるのか
  - H2: まとめ
- **コード例**:
  1. ro属性を持つPersonクラス
  2. required と default を使った例

---

#### 第4回: メソッドを使いこなそう
- **主要トピック**: メソッドの定義と$selfの活用
- **大見出し**:
  - H2: メソッドとは何か
    - H3: 関数との違い
  - H2: $selfを理解する
    - H3: 自分自身を指す特別な変数
  - H2: 引数を受け取るメソッド
    - H3: @_からの取り出し方
  - H2: 戻り値を返すメソッド
  - H2: まとめ
- **コード例**:
  1. 挨拶メソッドを持つPersonクラス
  2. 引数を受け取って処理するメソッド

---

#### 第5回: スパゲティコードからの卒業
- **主要トピック**: なぜオブジェクト指向が必要なのか（Before/After比較）
- **大見出し**:
  - H2: よくあるスパゲティコード
    - H3: グローバル変数だらけの実装
  - H2: どこが問題なのか
    - H3: 機能追加すると壊れる
    - H3: どこを直せばいいかわからない
  - H2: オブジェクト指向で書き直すと
    - H3: 責任を分離する
  - H2: まとめ
- **コード例**:
  1. スパゲティ版のメッセージ投稿処理
  2. Messageクラスを使った実装

---

#### 第6回: チャットのメッセージを作ろう
- **主要トピック**: Messageクラスの設計と実装
- **大見出し**:
  - H2: チャットに必要なものを考える
    - H3: メッセージには何がある？
  - H2: Messageクラスを作る
    - H3: content、author、timestamp
  - H2: メッセージを表示するメソッド
  - H2: 動かしてみよう
  - H2: まとめ
- **コード例**:
  1. BBS::Messageクラスの実装
  2. メッセージを作成して表示するスクリプト

---

#### 第7回: 継承で機能を引き継ごう
- **主要トピック**: extendsによる継承
- **大見出し**:
  - H2: 継承とは何か
    - H3: 親クラスと子クラス
  - H2: extendsの使い方
  - H2: メッセージに返信機能を追加する
    - H3: ReplyMessageクラスを作る
  - H2: オーバーライドする
  - H2: まとめ
- **コード例**:
  1. Messageを継承したReplyMessageクラス
  2. オーバーライドした表示メソッド

---

#### 第8回: ロールで機能を共有しよう
- **主要トピック**: Moo::Roleとwithによるロールの適用
- **大見出し**:
  - H2: ロールとは何か
    - H3: 継承とは違うアプローチ
  - H2: Moo::Roleを使う
    - H3: ロールを定義する
  - H2: withでロールを適用する
  - H2: タイムスタンプ機能をロールにする
  - H2: まとめ
- **コード例**:
  1. Timestampableロールの定義
  2. Messageクラスにロールを適用

---

#### 第9回: 委譲で責任を分けよう
- **主要トピック**: handlesによる委譲
- **大見出し**:
  - H2: 委譲とは何か
    - H3: 「has-a」の関係
  - H2: handlesの使い方
  - H2: ユーザー情報を別クラスにする
    - H3: Userクラスを作る
  - H2: MessageからUserのメソッドを委譲する
  - H2: まとめ
- **コード例**:
  1. BBS::Userクラスの実装
  2. Messageクラスでhandlesを使う例

---

#### 第10回: メソッドを拡張しよう
- **主要トピック**: before、after、aroundメソッド修飾子
- **大見出し**:
  - H2: メソッド修飾子とは
    - H3: 既存のメソッドに処理を追加
  - H2: beforeで事前処理
  - H2: afterで事後処理
  - H2: ログ出力を追加してみる
  - H2: まとめ
- **コード例**:
  1. beforeでバリデーションを追加
  2. afterでログを出力

---

#### 第11回: オブジェクトの一生
- **主要トピック**: BUILDとDEMOLISH
- **大見出し**:
  - H2: オブジェクトが生まれるとき
    - H3: BUILDメソッド
  - H2: オブジェクトが消えるとき
    - H3: DEMOLISHメソッド
  - H2: 初期化処理を追加してみる
  - H2: いつ使うのか
  - H2: まとめ
- **コード例**:
  1. BUILDで初期化処理を行う例
  2. DEMOLISHでログを出力する例

---

#### 第12回: まとめと次のステップ
- **主要トピック**: シリーズの振り返りと発展的な内容の紹介
- **大見出し**:
  - H2: シリーズの振り返り
    - H3: 学んだことのまとめ
  - H2: 掲示板の全体像
    - H3: クラス図で見る構成
  - H2: 次のステップ
    - H3: Mooseへの道
    - H3: Perl 5.38以降の新しいclass構文
  - H2: おわりに
- **コード例**:
  1. 完成した掲示板のクラス構成（概要）
  2. Mooseでの書き換え例（比較用）

---

## 案B: 実装駆動アプローチ（推奨）

### 要約
チャット→掲示板を段階的に構築しながら、必要な概念をその都度学ぶ「作りながら覚える」構成

### 各回の構成

#### 第1回（公開済み）: blessは忘れよう
- **主要トピック**: Moo導入と用語理解
- **大見出し**:
  - H2: blessについて
  - H2: Mooを使ってみる
  - H2: まずは用語を覚えましょう
  - H2: まとめ
- **コード例**:
  1. MyAppクラスの基本実装（hoge.pl）

---

#### 第2回: 最初のコードを理解しよう
- **主要トピック**: package、use Moo、has、subの役割
- **大見出し**:
  - H2: 前回書いたコードを見直そう
  - H2: packageで名前を付ける
    - H3: クラスには名前が必要
  - H2: use Mooで魔法をかける
  - H2: hasでデータを持たせる
  - H2: subで動きを与える
  - H2: まとめ
- **コード例**:
  1. 第1回コードの詳細解説版
  2. もう1つプロパティを追加した例

---

#### 第3回: チャットを作ろう（前編）
- **主要トピック**: Messageクラスの設計
- **大見出し**:
  - H2: チャットを作ってみよう
    - H3: まずはゴールを決める
  - H2: メッセージに必要なものは？
    - H3: 内容、投稿者、時刻
  - H2: Messageクラスを設計する
  - H2: プロパティを定義する
    - H3: is => 'ro' で変更禁止
  - H2: まとめ
- **コード例**:
  1. BBS::Messageクラスの基本設計
  2. インスタンスを作成する例

---

#### 第4回: チャットを作ろう（後編）
- **主要トピック**: メソッドの実装と動作確認
- **大見出し**:
  - H2: メソッドを追加しよう
    - H3: 表示用のメソッド
  - H2: $selfでプロパティにアクセス
  - H2: 動かしてみよう
    - H3: 複数のメッセージを作る
  - H2: ここまでの振り返り
  - H2: まとめ
- **コード例**:
  1. formatメソッドを追加したMessageクラス
  2. 複数メッセージを表示するスクリプト

---

#### 第5回: スパゲティコードと比べてみよう
- **主要トピック**: オブジェクト指向のメリット（責任の分離）
- **大見出し**:
  - H2: もしオブジェクト指向を使わなかったら
    - H3: よくあるスパゲティコード
  - H2: 何が問題なのか
    - H3: 変更が大変
    - H3: バグが見つけにくい
  - H2: オブジェクト指向だと何が嬉しいのか
    - H3: 役割が明確
  - H2: まとめ
- **コード例**:
  1. スパゲティ版メッセージ処理（Before）
  2. オブジェクト版との比較（After）

---

#### 第6回: ユーザー機能を追加しよう
- **主要トピック**: extends（継承）の基礎
- **大見出し**:
  - H2: ユーザー情報を扱いたい
    - H3: Userクラスを作る
  - H2: 継承とは何か
    - H3: 共通部分を親クラスに
  - H2: extendsで継承する
  - H2: 管理者ユーザーを作る
    - H3: AdminUserクラス
  - H2: まとめ
- **コード例**:
  1. BBS::Userクラスの実装
  2. Userを継承したAdminUserクラス

---

#### 第7回: スレッド機能を追加しよう
- **主要トピック**: オブジェクトの集約（配列でオブジェクトを持つ）
- **大見出し**:
  - H2: スレッドって何だろう
    - H3: メッセージをまとめる箱
  - H2: Threadクラスを作る
    - H3: messagesプロパティ
  - H2: メッセージを追加するメソッド
  - H2: スレッドにメッセージを投稿する
  - H2: まとめ
- **コード例**:
  1. BBS::Threadクラスの実装
  2. スレッドにメッセージを追加する例

---

#### 第8回: 共通機能をロールにしよう
- **主要トピック**: Moo::Roleによるロール
- **大見出し**:
  - H2: 同じコードを何度も書いていませんか
    - H3: タイムスタンプ処理の重複
  - H2: ロールとは何か
    - H3: 継承とは違う「できること」の共有
  - H2: Moo::Roleを使う
  - H2: withでロールを適用する
  - H2: まとめ
- **コード例**:
  1. BBS::Role::Timestampableの実装
  2. MessageとThreadにロールを適用

---

#### 第9回: 委譲で責任を分離しよう
- **主要トピック**: handlesによる委譲
- **大見出し**:
  - H2: Messageの中でUserを使う
    - H3: オブジェクトをプロパティに
  - H2: 委譲とは何か
    - H3: 別のオブジェクトにお任せ
  - H2: handlesの使い方
  - H2: author_nameを委譲する
  - H2: まとめ
- **コード例**:
  1. authorプロパティにUserを持つMessage
  2. handlesでnameメソッドを委譲

---

#### 第10回: 処理を拡張しよう
- **主要トピック**: before/afterメソッド修飾子
- **大見出し**:
  - H2: 既存の処理に何かを追加したい
  - H2: beforeで事前チェック
    - H3: 投稿前のバリデーション
  - H2: afterで事後処理
    - H3: 投稿後のログ出力
  - H2: 元のコードを変えずに拡張できる
  - H2: まとめ
- **コード例**:
  1. beforeでcontentの空チェック
  2. afterでログ出力

---

#### 第11回: 初期化と後始末
- **主要トピック**: BUILDとDEMOLISH
- **大見出し**:
  - H2: オブジェクトが作られるとき
    - H3: BUILDメソッド
  - H2: 初期化処理を書く
    - H3: IDの自動採番
  - H2: オブジェクトが消えるとき
    - H3: DEMOLISHメソッド
  - H2: いつ使うと便利か
  - H2: まとめ
- **コード例**:
  1. BUILDでIDを自動設定
  2. DEMOLISHの使用例

---

#### 第12回: 多機能掲示板の完成
- **主要トピック**: シリーズの総括と次への道
- **大見出し**:
  - H2: これまでに作ったもの
    - H3: 全体の構成を振り返る
  - H2: クラス図で見る掲示板
  - H2: オブジェクト指向で何が変わったか
  - H2: 次のステップ
    - H3: Mooseへの移行
    - H3: 新しいclass構文
  - H2: おわりに
- **コード例**:
  1. 掲示板システムの全体構成（クラス一覧）
  2. 簡単な使用例

---

## 案C: 問題解決アプローチ

### 要約
「困りごと」を起点に、その解決策としてオブジェクト指向の概念を学ぶ「課題駆動」の構成

### 各回の構成

#### 第1回（公開済み）: blessは忘れよう
- **主要トピック**: Moo導入と用語理解
- **大見出し**:
  - H2: blessについて
  - H2: Mooを使ってみる
  - H2: まずは用語を覚えましょう
  - H2: まとめ
- **コード例**:
  1. MyAppクラスの基本実装（hoge.pl）

---

#### 第2回: なぜスパゲティになるのか
- **主要トピック**: スパゲティコードの問題点を認識する
- **大見出し**:
  - H2: よくある掲示板のコード
    - H3: 動くけど読みにくい
  - H2: どこが問題なのか
    - H3: グローバル変数
    - H3: 責任の混在
  - H2: 機能を追加しようとすると
    - H3: どこを直せばいい？
  - H2: もっと良い方法があります
  - H2: まとめ
- **コード例**:
  1. スパゲティコードの掲示板例
  2. 機能追加で壊れる様子

---

#### 第3回: 最初のオブジェクトを作ろう
- **主要トピック**: クラスの基本構造（package、use Moo）
- **大見出し**:
  - H2: 前回のコードを整理したい
  - H2: クラスという考え方
    - H3: データと処理をまとめる
  - H2: Messageクラスを作る
  - H2: packageとuse Mooの意味
  - H2: まとめ
- **コード例**:
  1. BBS::Messageクラスの骨格
  2. クラスを使ってみる

---

#### 第4回: データを守りたい
- **主要トピック**: プロパティの保護（is => 'ro'/'rw'）
- **大見出し**:
  - H2: 勝手にデータを変えられたくない
  - H2: プロパティとは
    - H3: hasでデータを定義
  - H2: 読み取り専用にする
    - H3: is => 'ro'
  - H2: 必須にする、初期値を設定する
  - H2: まとめ
- **コード例**:
  1. roとrwの違いを示す例
  2. requiredとdefaultの例

---

#### 第5回: 機能を追加したい
- **主要トピック**: メソッドの定義と$self
- **大見出し**:
  - H2: 表示機能を追加したい
  - H2: メソッドとは
    - H3: subで機能を定義
  - H2: $selfって何？
    - H3: 自分自身を参照
  - H2: 引数を受け取るメソッド
  - H2: まとめ
- **コード例**:
  1. formatメソッドの実装
  2. 引数付きメソッドの例

---

#### 第6回: 同じコードを書きたくない
- **主要トピック**: extendsによる継承
- **大見出し**:
  - H2: UserとAdminの共通部分
    - H3: 同じコードがある
  - H2: 継承とは
    - H3: 親クラスの機能を引き継ぐ
  - H2: extendsの使い方
  - H2: 子クラスで機能を追加・変更
  - H2: まとめ
- **コード例**:
  1. BBS::Userクラス
  2. Userを継承したAdminUserクラス

---

#### 第7回: 横断的な機能を追加したい
- **主要トピック**: ロール（Moo::Role、with）
- **大見出し**:
  - H2: MessageもThreadも時刻を持つ
    - H3: でも継承関係はない
  - H2: ロールとは
    - H3: 「できること」を共有する
  - H2: Moo::Roleを定義する
  - H2: withでロールを使う
  - H2: まとめ
- **コード例**:
  1. Timestampableロール
  2. 複数クラスにロールを適用

---

#### 第8回: 別のオブジェクトに任せたい
- **主要トピック**: 委譲（handles）
- **大見出し**:
  - H2: MessageからUserの名前を取りたい
    - H3: 直接アクセスは面倒
  - H2: 委譲とは
    - H3: 別のオブジェクトのメソッドを借りる
  - H2: handlesの使い方
  - H2: 委譲 vs 継承
  - H2: まとめ
- **コード例**:
  1. authorプロパティを持つMessage
  2. handlesで委譲する例

---

#### 第9回: 処理の前後に何かしたい
- **主要トピック**: before/afterメソッド修飾子
- **大見出し**:
  - H2: 投稿前にチェックしたい
  - H2: beforeの使い方
    - H3: 事前処理を追加
  - H2: 投稿後にログを残したい
  - H2: afterの使い方
    - H3: 事後処理を追加
  - H2: まとめ
- **コード例**:
  1. beforeでバリデーション
  2. afterでログ出力

---

#### 第10回: 生成時に何かしたい
- **主要トピック**: BUILDメソッド
- **大見出し**:
  - H2: オブジェクト作成時に初期化したい
  - H2: BUILDとは
    - H3: コンストラクタ後の処理
  - H2: IDの自動採番をする
  - H2: defaultとの違い
  - H2: まとめ
- **コード例**:
  1. BUILDでIDを設定
  2. defaultとの比較

---

#### 第11回: 掲示板を完成させよう
- **主要トピック**: Threadクラスの追加と全体統合
- **大見出し**:
  - H2: スレッド機能を作る
    - H3: Threadクラス
  - H2: Boardクラスで全体を管理
  - H2: すべてを組み合わせる
  - H2: 動かしてみよう
  - H2: まとめ
- **コード例**:
  1. BBS::Threadクラス
  2. 掲示板の動作例

---

#### 第12回: 次のステップへ
- **主要トピック**: 振り返りと発展的内容
- **大見出し**:
  - H2: 12回の振り返り
    - H3: 学んだ概念のまとめ
  - H2: オブジェクト指向でできるようになったこと
  - H2: もっと先へ
    - H3: Mooseという選択肢
    - H3: Perl 5.38+のclass構文
  - H2: DEMOLISH（おまけ）
  - H2: おわりに
- **コード例**:
  1. 完成した掲示板の構成図
  2. Mooseでの書き換え例

---

## 各案の比較

| 観点 | 案A（概念積み上げ） | 案B（実装駆動） | 案C（問題解決） |
|------|---------------------|-----------------|-----------------|
| アプローチ | 概念を順番に学ぶ | 作りながら学ぶ | 困りごとから学ぶ |
| メリット | 体系的な理解が可能 | 実践的でモチベーション維持しやすい | 必要性が明確で納得感がある |
| デメリット | 抽象的になりがち | 概念の整理が後回しになる場合がある | 問題設定が難しい回がある |
| 推奨度 | ★★★☆☆ | ★★★★★ | ★★★★☆ |

## 推奨: 案B（実装駆動アプローチ）

案Bを推奨する理由:

1. **「なぜ必要か」が実感できる**: チャット→掲示板という具体的なゴールがあり、機能追加のたびにオブジェクト指向の恩恵を体験できる
2. **第1回との連続性**: 第1回の「まず動かしてみる」というスタイルと一貫している
3. **初心者にやさしい**: 抽象的な説明より、動くコードを見ながら学ぶほうが理解しやすい
4. **モチベーション維持**: 毎回「何かができるようになる」達成感がある
5. **制約との相性**: 「コード例2つまで」「概念1つまで」の制約を守りやすい構成

---

## 付記

- 本アウトラインは調査ドキュメント `/agents/research/moo-oop-series.md` に基づいて作成
- 作成日: 2025-12-29
- 各回の執筆時は、第1回のトーン（優しく初心者向け）を維持すること
- コード例は可能な限り掲示板/チャットの文脈で作成すること
