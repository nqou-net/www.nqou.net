# Plot Outline: Adapter

## I. 導入 (Admission)
- **状況**: 深夜のオフィス。ガンドルフは20年物の自作CLIツール `legacy_tool.pl` のソースコードを前に、若手から突きつけられた「Web API化の要望」という無理難題に頭を抱えている。「この神聖なロジックにHTTPだのJSONだのという不純物を混ぜるわけにはいかん…だが、もう `elsif` を入れる隙間もない…」
- **シチュエーション**: 往診。ドクターと助手が音もなくオフィスに現れる。

## II. 検査 (Examination)
- **展開**: ドクターが `elsif` の連打（500行超）を一瞥し、キーボードを数回叩く。
- **ドクター**: 「硬化……癒着……末端。不純物。」
- **助手の通訳**: 「長年の継ぎ接ぎでインターフェースが動脈硬化を起こし、外部からの新しい情報（JSON）を受け入れる柔軟性を失っているとおっしゃっています」
- **患者の反応**: 「やはりそうか……だが、このロジックは俺の命だ。1行たりとも書き換えたくない！」

## III. 処置 (Surgery)
- **展開**: ドクターの高速タイピングによる Adapter パターンの適用。
- **Before**: `legacy_tool.pl` の中に、標準入力解析、コマンド分岐、DB処理、結果出力が渾然一体となった巨大な `if-elsif` ブロック。
- **After**: 既存のロジックをオブジェクトとしてラップし、Web API（JSON）が求めるメソッド名に変換して委譲する `LegacyToolAdapter.pm` の作成。
- **カタルシスポイント**: 既存のコードに1ミリも触れず、新しいインターフェースへの適合が完了した瞬間。

## IV. 予後 (Prognosis)
- **展開**: 動作確認。API経由でデータが流れるのを見て、ガンドルフは腰を抜かす。
- **勘違いシーン**: 立ち去ろうとするドクターが、無言でガンドルフのボロボロのマウスパッドを回収し、代わりに新しいリストレストを置く。ガンドルフはそれを「20年の功績を認めた形見の交換」と誤解するが、ドクターは単に不潔なものを排除しただけ。
- **別れ**: 往診を終えたドクターたちがオフィスを去る。
