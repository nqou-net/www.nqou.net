# Plot Outline

## Scene 1: The Emergency (Admission)
- **Setting**: 深夜のサーバー室。冷却ファンの音が響く中、患者（28歳インフラエンジニア）が端末に向かって頭を抱えている。
- **Situation**: 「ファイルならコピー、ディレクトリなら中に入って再帰…いや、空ディレクトリの場合はどうする？」とブツブツ言っている。条件分岐が複雑すぎて、移行スクリプトがバグだらけ。
- **Action**: ドクターと助手が現れる。「再帰の悲鳴が聞こえた」と助手。ドクターはサーバーラックを指でなぞり、埃をチェックする（ように見える）。

## Scene 2: The Examination (Diagnosis)
- **Diagnosis**: ドクターがコード（巨大な`if (-d) ... elsif (-f)`の連鎖）を覗き込む。
- **Dialogue**:
  - Doctor: 「差別だ。通らない。」
  - Assistant: 「ドクターは、『あなたはファイルとディレクトリをまるで敵同士のように扱っている。全てのノードに対して身分証の提示（`ref`チェック）を求めていては、処理が渋滞する』と仰っています。」
  - Patient: 「でも、区別しないと処理できないじゃないですか！ ファイルはコピーするもので、ディレクトリは潜るものなんです！」

## Scene 3: The Surgery (Treatment)
- **Action**: ドクターがキーボードを奪う。
- **Treatment**:
  - まず共通の役割（Role/Interface）として`Component`を定義。
  - `File`クラス（Leaf）と`Directory`クラス（Composite）に分ける。
  - メインループから条件分岐が消え、ただ`$node->process()`と呼ぶだけの美しいコードに変貌する。
  - **Visual**: ギザギザしていたインデントが、平坦な草原のようにきれいになる。

## Scene 4: The Misunderstanding (Prognosis/Comedy)
- **Comedy**:
  - 治療が終わり、患者は「すごい…区別しなくていいんだ…」と感動。
  - ふと、ドクターが患者の胸元をジッと見つめていることに気づく。
  - Patient's Thought: （僕の社員証を見ているのか？ この過酷な現場を支える責任感に敬意を表してくれているんだ…！）
  - Patient: 「このIDカードは、僕の誇りです。」
  - Doctor: （無言で手を伸ばし、胸ポケットから垂れ下がっていたねじれたLANケーブルを真っ直ぐにする）「…伝送ロス。」
  - Assistant: 「ケーブルがねじれていると、ドクター、気になって眠れないんです。」

## Closing
- **Resolution**: 患者は整然としたコードとLANケーブルを見送りながら、「僕たちはみんな、システムの一部（Node）なんだ」と悟る。
