# Patient Profile
- Name: 美意識の高い転身エンジニア (32)
- Role: 元Webデザイナー→バックエンドエンジニア（コード歴2年）。社内レポート生成ツールの開発担当
- Personality: 出力の見た目には一切妥協しない完璧主義者。PDF・HTMLの見栄えは社内で絶賛されている。しかしコードの構造・設計には無頓着で、「動いて美しい出力が出ればOK」がモットー。几帳面だがその几帳面さはUIに向いており、コードには向いていない。
- Background: 社内の営業部から「月次レポートをPDFだけでなくHTMLでもほしい」と依頼され、得意のデザインセンスでPDF・HTML両対応の出力システムをPerlで構築。出力は美しかったが、各フォーマットのコンポーネント（タイトル・テーブル・グラフ・フッター）を一つの関数内でif分岐して生成していた。2フォーマットまでは奇跡的に動作していたが、3つ目のMarkdown対応を追加した途端、PDFフッターにMarkdown記法が混入し、全フォーマットの出力が崩壊した。
- First Person: 「私」

# Medical Chart
- Symptom: レポート出力関数内でフォーマット種別をif分岐し、タイトル・テーブル・グラフ・フッターを直接生成。各コンポーネントの生成コードがフォーマット間で侵食し合い、あるファミリーのコンポーネントが別ファミリーの出力に混入。2種（PDF/HTML）まではコンポーネント数が少なく偶然動作していたが、3種目（Markdown）追加で生成順序の暗黙の依存が表面化し、ランダムに誤ったファミリーのコンポーネントが出力される状態。
- Diagnosis: 潜伏性クロスマッチ不全 ― 関連するプロダクト群（ファミリー）の生成が分離されておらず、ファミリー間でコンポーネントが交差汚染する状態。少数ファミリーでは免疫が対処するが、閾値を超えると全身で拒絶反応が連鎖する。
- Metaphor: 「A型・B型・O型の患者に同じ血液バッグから輸血している。2人までは偶然血液型が合っていたが、3人目で致命的な不適合反応が発生した」
- Cure: Abstract Factory Pattern による型別輸血システムの構築。ファミリーごとに専用の工場（ConcreteFactory）を設け、コンポーネントの一括生成と整合性をパターンレベルで保証する。
