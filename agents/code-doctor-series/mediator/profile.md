# Patient Profile: Mediator — レストランのオーダー管理

## 患者プロファイル

- **Name**: 仲村 翔太（なかむら しょうた）
- **Age**: 32歳
- **Role**: PM兼フルスタックエンジニア（経験7年）。スタートアップの飲食テック企業で、社内向けレストラン管理システムの開発リーダー
- **Personality**: 社交的でおしゃべり、チームの潤滑油的存在。人間関係のトラブルは即座に仲裁できるが、コードの設計になると「直接話を通す」感覚で各モジュールを直結してしまう。直感型で「動けばOK」の精神が強い
- **First Person**: 「俺」
- **Background**: 飲食業出身→独学でエンジニアに転身。実際にキッチンとホールの連携を経験しているからこそ、「リアルな業務フロー」をそのままコードに翻訳しようとした。しかし翻訳の仕方が「人間がやるように、全員が全員に直接声をかける」方式で、コンポーネント数が増えるたびに破綻していく
- **Chief Complaint**: 「人間同士ならうまく回せるのに、コードになると新しいセクション追加するたびに全部触らなきゃいけなくて、もう混乱してきた…」

## 診断カルテ (Medical Chart)

### 症状 (Symptoms)

| Technical | Medical Metaphor |
|-----------|-----------------|
| 5つ以上のモジュール（Waiter, Kitchen, Bar, Cashier, Delivery）が相互に `use` で直接参照。1モジュール追加で全既存モジュールの修正が必要 | **全身感染症（セプシス）** — 臓器（モジュール）が全て直接血管で繋がっており、一箇所の炎症が全臓器に転移する。免疫システム（テスト）も機能不全 |
| メソッド引数にオブジェクト参照が3〜5個連なる `sub process_order($self, $waiter, $kitchen, $bar, $cashier)` | **多臓器癒着** — 臓器同士が癒着しており、1つを動かすと他の全てが引きずられる |
| 新セクション（Delivery）追加時に既存4モジュール全ての修正が必要。修正漏れでサイレントバグ発生 | **転移性炎症** — 新たな臓器（モジュール）を接続するたびに、既存臓器に炎症が広がる |

### 病名 (Diagnosis)

**N×N依存症候群（多臓器セプシス型）** — コンポーネント間の通信経路が N×(N-1) 本に膨張し、システム全体が硬直化。変更耐性ゼロの末期状態。

### 処方 (Prescription)

**Mediator パターン投与** — 全モジュール間の直接参照を排し、OrderMediator（仲介者）を設置。各モジュールは Mediator だけを知り、Mediator が通信のルーティングを一元管理。N×N → N 本への依存圧縮手術。

## 来院/往診の判定

**往診** — 患者は自社オフィスで開発中のシステムを抱えている。ドクターとナナコが患者のオフィスを訪問する形式。患者の元気でおしゃべりな性格と、散らかったモニターだらけのデスクが対比として映える。

## コメディ設定

- **核心的ギャグ**: 人間関係では完璧な「仲介者」なのに、コードでは全直結。ナナコの「あなたが普段やっていること、そのものですよ」で目からウロコが落ちる
- **勘違いシーン**: ナナコがドクターにコーヒーを出す → ドクターが嬉しそうに受け取る（実はドクターの分は自分で入れる習慣。ナナコは患者に出すつもりで余っただけ）→ 患者「え、あの二人って…？」→ ナナコ「違いますよ」（即答）
- **患者の口癖**: 飲食業出身なので、技術的な話に料理や接客の比喩を混ぜてくる。「いやー、それってバイキングの配膳みたいなもんでしょ？」
