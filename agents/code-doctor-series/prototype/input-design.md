# Input Design: Prototype

## 選定結果

| 要素 | 採用案 | スコア |
|------|--------|--------|
| テーマ | ドキュメントテンプレート管理（逆転） | 21/25 |
| 患者 | コピペ職人の女性SIer（革新） | 22/25 |
| 症状 | 「テンプレ完璧症候群」— new地獄（逆転） | 21/25 |

---

## Step-Back思考

> **この記事で読者に何を持ち帰ってもらいたいか？**
> 「`new` で毎回ゼロから構築するのではなく、既存の完成品を `clone` して差分だけ変更する」という発想の転換。
> 特に「テンプレートをコピペで管理している」人に、「それ、Prototype パターンそのものですよ」と気づかせたい。

---

## テーマ3案

### 案A（王道）: ゲームキャラクターのバリエーション生成
- 一行説明: RPGの敵キャラクターをベースから派生させて量産する
- パターンとの接点: 基本モンスターを clone して色違い・強化版を生成
- 読者像: ゲーム開発者、OOP学習中の中級者
- **差別化の課題**: 既存シリーズ「モンスター軍団を量産」と題材が被る

### 案B（革新）: CI/CDパイプラインの環境設定
- 一行説明: 開発/ステージング/本番の環境設定を、ベース設定の clone で管理
- パターンとの接点: 基本設定オブジェクトを clone し、環境固有の値だけ上書き
- 読者像: DevOps/インフラエンジニア、設定管理に悩む中堅
- **差別化の課題**: やや抽象的で物語に落としにくい

### 案C（逆転）: 社内ドキュメントテンプレート管理
- 一行説明: 議事録・報告書・提案書などの定型ドキュメントをテンプレートから量産
- パターンとの接点: テンプレートオブジェクトを clone して部署・案件ごとにカスタマイズ
- 読者像: 非ゲーム系エンジニア、業務系プログラマー、「パターンは実務で使えない」と思っている層
- **差別化ポイント**: 「コピペでテンプレ管理してる」という日常的行為がPrototypeパターンそのもの、という逆説

---

## テーマ評価

| 評価軸 | 案A（王道） | 案B（革新） | 案C（逆転） |
|--------|:-----------:|:-----------:|:-----------:|
| ① 読者共感度 | 3 | 3 | 5 |
| ② メタファー適合度 | 4 | 3 | 4 |
| ③ コメディ発展性 | 3 | 2 | 5 |
| ④ 教育価値 | 4 | 4 | 4 |
| ⑤ 差別化 | 1 | 3 | 5 |
| **合計** | **15** | **15** | **23** |
| **推奨理由** | 既出と被る | やや抽象的 | 日常×逆説で記憶に残る |

→ **採用: 案C（逆転）— 社内ドキュメントテンプレート管理**

---

## 患者3案

### 案A（王道・共感型）: 「コピペ新人」— 入社2年目の若手SE
- 属性: 24歳女性、SIer勤務、エンジニア歴1.5年
- 性格: 真面目、素直、効率重視だがパターンは未学習
- 背景: 先輩から「前のやつコピーして使え」と教わった
- 主訴: 「テンプレを更新したら全部のファイルを手作業で直す羽目になりました……」
- コメディポテンシャル: 低め（素直すぎてドクターとの掛け合いが弱い）

### 案B（革新・意外型）: 「コピペ職人」— 10年目のSIer女性エンジニア
- 属性: 34歳女性、SIer勤務、エンジニア歴10年、サブリーダー
- 性格キーワード: 完璧主義、自負心強い、「私のテンプレは完璧」が口癖
- 背景: 長年かけて完成させた「究極のドキュメント生成スクリプト」が誇り。テンプレートをハッシュリファレンスで直書きし、new で毎回構築。「完璧な設計図から毎回組み立てるのが正しい」と信じている
- 主訴: 「テンプレートに新しいフィールドを追加したら、17箇所のコンストラクタを全部直す必要があって……でも設計は正しいはずなんです」
- コメディポテンシャル: 高い。「私のコードは完璧」という自負とドクターの無慈悲な一言の対比。clone の概念を「コピー」と混同し「私ずっとコピーしてましたけど！？」となる

### 案C（逆転・ギャップ型）: 「元営業マン」— 35歳、未経験からの転職組
- 属性: 35歳男性、Web系転職2年目
- 性格キーワード: 明るい、コミュ力は高い、技術は直感派
- 背景: 営業時代の「テンプレ提案書」の発想で実装
- 主訴: 「前に作ったやつをコピーして使い回してるんですけど、なんか毎回バグるんですよね」
- コメディポテンシャル: 中。営業トークとプログラミングの混同で笑いが取れるが、Prototype との接点がやや浅い

---

## 患者評価

| 評価軸 | 案A（王道） | 案B（革新） | 案C（逆転） |
|--------|:-----------:|:-----------:|:-----------:|
| ① 読者共感度 | 4 | 5 | 3 |
| ② メタファー適合度 | 3 | 5 | 3 |
| ③ コメディ発展性 | 2 | 5 | 4 |
| ④ 教育価値 | 3 | 4 | 3 |
| ⑤ 差別化 | 2 | 3 | 4 |
| **合計** | **14** | **22** | **17** |
| **推奨理由** | 無難だが弱い | 自負と現実のギャップが最高 | 面白いが技術深度に難 |

→ **採用: 案B（革新）— 「コピペ職人」10年目SIer**

---

## 症状3案

### 案A（王道・典型症状）: 「new地獄」— コンストラクタ引数の爆発
- 技術的症状: テンプレート種別ごとに `new` でハッシュを毎回構築。共通部分もすべて再記述
- 医療メタファー: 「手術のたびに臓器をゼロから培養している」
- 重症度: 中症
- Before/After: new 17箇所 → clone + customize 3パターン
- 読者の「あっ」ポイント: 「あれ、共通部分をまとめれば……って、そうか clone か！」

### 案B（革新・複合症状）: 「深層コピー欠損」— shallow copy による参照共有バグ
- 技術的症状: ハッシュリファレンスの浅いコピーで、ネストされた構造体が参照共有。一方を変更すると他方も壊れる
- 医療メタファー: 「臓器移植後の拒絶反応——ドナーの臓器がレシピエントの体に影響を与え続けている」
- 重症度: 重症
- Before/After: 浅いコピー → clone メソッドによる deep copy 保証
- 読者の「あっ」ポイント: 「ハッシュリファレンスのコピーって、ネストしたら参照共有になるのか！」

### 案C（逆転・潜伏症状）: 「テンプレ完璧症候群」— テンプレの変更が17箇所に波及
- 技術的症状: テンプレートの「雛形」がコード中に散在。フィールド追加時に全 new を修正。一見正しく動いているが、1箇所でも修正漏れがあると壊れる時限爆弾
- 医療メタファー: 「遺伝子異常の連鎖——原本（プロトタイプ）のDNAが各所にハードコードされており、変異が全身に転移する」
- 重症度: 中〜重症（表面上は健康に見える）
- Before/After: ハードコードされた17個の new → プロトタイプレジストリからの clone
- 読者の「あっ」ポイント: 「テンプレートに項目追加しただけなのに、17箇所エラー出た……あ、全部 new してるからか」

---

## 症状評価

| 評価軸 | 案A（王道） | 案B（革新） | 案C（逆転） |
|--------|:-----------:|:-----------:|:-----------:|
| ① 読者共感度 | 4 | 3 | 5 |
| ② メタファー適合度 | 3 | 4 | 5 |
| ③ コメディ発展性 | 3 | 3 | 4 |
| ④ 教育価値 | 4 | 5 | 4 |
| ⑤ 差別化 | 2 | 4 | 4 |
| **合計** | **16** | **19** | **22** |
| **推奨理由** | 基本だが印象薄い | deep copy は面白いが主題が逸れる | テーマ・患者との噛み合い最高 |

→ **採用: 案C（逆転）— 「テンプレ完璧症候群」**
ただし案B「深層コピー欠損」の要素を **副症状** として組み込む（浅いコピーの罠を手術中に発見する展開）

---

## 相乗効果の検証

### テーマ × 患者
✅ 10年目SIer女性が社内ドキュメント生成ツールを長年磨いてきた、というシナリオは極めて自然。SIerの業務は定型ドキュメントの量産が日常。

### テーマ × 症状
✅ 「テンプレートに新フィールドを追加したら17箇所のnewを全修正」は、ドキュメント生成ツールの現場で頻繁に起きるリアルな問題。

### 患者 × 症状
✅ 「私の設計は完璧」と自負する10年目エンジニアが、「完璧な設計図から毎回new」という発想に固執して clone の存在を見落としている。知識の盲点としてリアル。
✅ 前回のBuilder回（テックリードが自分の処方箋を飲まなかった話）との対比で、今回は「正しいと信じている設計が実は病因」というテーマの変奏。

### 勘違いシーンの設計方針
- **テーマ連動**: Prototype = 「複製」→ ドクターが患者のコードの一部を「clone」する時、患者が「先生、私のコードを盗作するんですか！？」と勘違い
- あるいは: ドクターがナナコにコーヒーを入れ直す（既にあるコーヒーのカップに注ぎ足す）のを見て、患者が「……先生、カップは新しいのを使わないんですか？」→「……ある物を使う」→ 患者（それって……Prototype!?）

---

## 選定結果

### 採用案
- **テーマ**: 案C「社内ドキュメントテンプレート管理」（23点）
- **患者**: 案B「10年目のSIerサブリーダー・コピペ職人」（22点）  
- **症状**: 案C「テンプレ完璧症候群 — new地獄 + 浅いコピーの副症状」（22点）
- **総合スコア**: 67/75

### 選定理由
テーマの逆説性（「日常のコピペ = Prototype」）と患者の自負（「完璧な設計」の盲点）が噛み合い、技術的教育価値とコメディ発展性を両立。症状は表面上「正しく動いている」ように見える時限爆弾型で、ドクターの診断が劇的に映える。

### 3要素の整合性
- テーマ × 患者: ✅ SIerの日常業務（定型ドキュメント量産）に完全一致
- テーマ × 症状: ✅ テンプレートへのフィールド追加 → 17箇所修正は現場あるある
- 患者 × 症状: ✅ 「完璧な設計」への自負が盲点を生む構造は、前回Builder回からの変奏として効果的

---

## テーマ詳細

### テーマ: 社内ドキュメントテンプレート管理
- 具体的な題材: 議事録・日報・週報・障害報告書など複数タイプのドキュメントをPerlスクリプトで自動生成するツール
- パターンとの接点: テンプレートオブジェクト（プロトタイプ）を clone して、案件固有の情報だけ差し替える
- 読者像: 業務系プログラマー、SIer出身者、「デザインパターンは学問の話であって実務では使えない」と思っている層

## 患者詳細

### 患者: 三橋 彩香（みつはし あやか）
- Name: コピペ職人の女性SIer（34）
- Role: SIer勤務 サブリーダー。社内ツール開発を10年担当
- Personality: 完璧主義で自負心が強い。「私のコードは設計書通り。だから正しい」が信条。後輩の面倒見はいいが、自分の設計を疑うことはない
- First Person: 「私」
- 背景: 入社3年目に作った「ドキュメント生成スクリプト」が社内標準ツールに。以降10年間改良を重ね、現在は17種類のドキュメントを生成。本人的には「私の最高傑作」
- 主訴: 「新しい必須フィールドを追加したら、17種類のテンプレート全部を修正しなきゃいけなくて……でも設計は正しいはずなんです。だって設計書通りに作ったんですから」

## 症状詳細

### 症状: テンプレ完璧症候群（Template Perfection Syndrome）
- 技術的症状: 各ドキュメントタイプごとに `new` メソッドで全フィールドをハードコード。共通フィールド（日付、部署名、作成者等）もすべて各 `new` 内に記述。shallow copy で参照共有バグの副症状も潜伏中
- 医療メタファー: 「遺伝子異常の連鎖 — 原本（プロトタイプ）の遺伝子が17の細胞にハードコードされ、変異が全身に転移」。副症状として「臓器の癒着 — shallow copy による参照共有」
- 重症度: 中〜重症（表面は健康だが時限爆弾）
- Before/After: 17個の独立した new → Prototype Registry + deep clone
- 読者の「あっ」ポイント: 「テンプレートにフィールド追加しただけなのに17箇所修正……あ、全部newしてるからだ」＋「浅いコピーでネストしたデータが共有されてる！」

## 不採用案（参考）

### テーマ
- 案A（王道）ゲームキャラクター生成: 15/25 — 既存シリーズ「モンスター軍団を量産」と題材が被り差別化困難
- 案B（革新）CI/CD環境設定: 15/25 — 物語に落としにくく、コメディ発展性が低い

### 患者  
- 案A（王道）入社2年目新人: 14/25 — 素直すぎてコメディのフックが弱い
- 案C（逆転）元営業マン: 17/25 — 面白いがPrototypeとの技術的接点が浅い

### 症状
- 案A（王道）new地獄: 16/25 — 基本的だが印象が薄い
- 案B（革新）deep copy欠損: 19/25 — 技術的に面白いがメイン症状にすると教育効果が分散 → 副症状として組込み
