# Plot Outline

## I. Admission (導入)
- **Scene**: 深夜のワンルームマンション兼開発室。エナジードリンクの空き缶が散乱している。
- **Action**: 患者（開発者）がキーボードに突っ伏して寝ていると、玄関のチャイムが鳴り響く。
- **Dialogue**:
    - 患者: 「宅配便？ こんな時間に……」
    - 助手: 「お届けものです。解決策（ソリューション）を。」
    - ドクター: （部屋に入るなり、モニターのメモリ使用量グラフを指差して）「……肥満。」

## II. Examination (検査)
- **Scene**: ドクターがコード（Goblinクラス）を覗き込む。
- **Action**: ドクターが溜め息をつき、患者のリュックサックを手に取る。中にあった辞書（英和辞典）を取り出し、患者に持たせる。
- **Dialogue**:
    - ドクター: 「全員、これを持ってるのか。」
    - 助手: 「ドクターは仰っています。『なぜ1万体のゴブリン全員が、個別に辞書（メッシュデータやテクスチャ）を背負って戦場に出るのか』と。」
    - 患者: 「えっ、それは……オブジェクト指向ですから！ 個体は独立していないと……」
    - ドクター: 「重すぎる。戦う前に自滅するぞ。」

## III. Surgery (処置)
- **Scene**: リファクタリング開始。
- **Step 1 (Extraction)**: `Goblin`クラスから、変化しないデータ（名前、メッシュ、テクスチャ、基本攻撃力）を`GoblinType`（Flyweight）として切り出す。
- **Step 2 (Injection)**: `Goblin`クラス（Context）には、変化するデータ（座標、残りHP）と、`GoblinType`への参照（リファレンス）のみを残す。
- **Step 3 (Factory)**: `GoblinFactory`を作成し、`GoblinType`のインスタンスをキャッシュする（重複生成を防ぐ）。
- **Highlight**: モニター上のメモリ使用量グラフが、修正を進めるごとに劇的に下がっていく様子（崖のように落ちる）。
- **Dialogue**:
    - 患者: 「うわっ、グラフが……！ さっきまで真っ赤だったのに！」
    - 助手: 「彼らは身軽になったんです。辞書は図書館（Factory）に置いて、必要な時だけ見に行けばいい。」

## IV. Prognosis (予後) & Comedy
- **Scene**: 1万体のゴブリンがスムーズに動き回る画面を見つめる3人。
- **Action (Comedy)**:
    - ドクターが患者のデスクにあるカップ麺（食べかけ）をじっと見つめる。
    - 患者: （ドキッ）「（まさか、徹夜の僕を気遣って……？ 腹が減っているのか？ 友情のシェア？）……あ、あの、食べますか？」
    - ドクター: （無言でカップ麺を取り上げ、プラスチックのフォークを抜き取り、カップと分別してゴミ箱へ）「……分別。」
    - 助手: 「リソースの管理には厳しいんです。メモリもゴミも、混ざっているのが許せない性分でして。」
    - 患者: 「（ただの分別マニアかよ……！）」
- **Closing**:
    - 患者: 「でも、これでリリースできます！ ありがとうございます！」
    - ドクター: 「感謝は、この（軽量化された）コードに。」
