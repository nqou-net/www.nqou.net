# Plot Outline: Bridge Pattern — 二軸癒着症候群

> **設定**: 来院（クリニック）
> **患者一人称**: 私

---

## I. 導入 — 来院

### 状況
月曜の朝、ミサキが紙に印刷したスプレッドシート（自分のコードの分岐一覧表）を抱えてクリニックに来院。元経理部らしく、if文の全パターンを表にまとめてきている。「問題を整理してきました」と几帳面に出すが、それ自体がドクターたちに衝撃を与える。

### ドクター登場
ミサキが恐る恐る鉄扉を引いて入ると、本の壁の向こうにトリプルディスプレイの青白い光。椅子に座った背中が見え、振り向きもしない。ナナコが受付カウンターから「大丈夫ですよ、ここはコード診療所です」と声をかける。

### 心理状態
ミサキは「ちゃんと動いてるのに何が悪いのか」半信半疑。同僚に紹介されたが、この場所が本当に何かを解決してくれるのか懐疑的。Excelなら表を見せればすぐわかるのに、プログラマーの世界はどうも勝手が違う。

### キーモーメント
ミサキが印刷したスプレッドシートをカウンターに広げると、ナナコが一瞬固まる。9列×5行の巨大な条件分岐マトリクス。ドクターが初めて椅子を回し、その紙を一瞥する。

ドクター:「……これは？」
ミサキ:「コードの設計書です。Excelで整理しました」
ドクター:（紙を指でなぞり）「……答えが、ここに書いてある」

ミサキには何のことかわからない。

---

## II. 検査 — 触診

### 展開
ドクターがノートPCを受け取り、コードを開く。200行超のif-elsif関数を5秒で走査し、眉をひそめる。

### ドクターの診断
ドクター:（モニタを指で弾いて）「……癒着」
ミサキ:「え？」
ナナコ:「部門のロジックと出力形式が完全に一体化しているということです。お腹の中で二つの臓器がべったりくっついてしまって、片方だけ治療しようにも、もう片方を傷つけてしまう——そんな状態ですね」

### Excel変数名の発見
ドクターがスクロールし、`$cell_A1`, `$sheet_name`, `$col_header` という変数名を発見。

ドクター:「……命名（Naming）。……Excel」
ナナコ:（困り顔で微笑んで）「変数名がExcelの……セル番地になっていますね？」
ミサキ:（赤面）「だ、だって考えやすいんです……」

### 患者の動揺
ドクターが無言でスプレッドシートに戻り、マトリクスの行と列をそれぞれ人差し指でなぞる。行（部門）を縦に、列（形式）を横に。そして、中央で指を交差させ、

ドクター:「二軸。……分離する」

ミサキは、ドクターが自分のExcel表を使って何かを説明しようとしていることに気づくが、それが何を意味するのかまだわからない。

---

## III. 処置 — 癒着分離手術

### 展開（意外な転回）
ドクターがおもむろにミサキのスプレッドシートを壁に貼る。ミサキは「私の資料を汚されるのでは」と焦るが、ドクターはペンで行と列を赤い線で囲み、ハサミで物理的に切り分ける。

ドクター:「行。……Abstraction」
（行の短冊を左に貼る）
ドクター:「列。……Implementation」
（列の短冊を右に貼る）

ナナコ:「お持ちになった表を見てください。行が部門——営業、経理、人事ですね。列が出力形式——PDF、CSV、HTML。今まではこの9つのマスの中身を全部1つの関数に詰め込んでいました。先生は、行と列を**別々の部品**にしましょう、とおっしゃっているんです」

ミサキ:（目が丸くなる）「……あ。……これ、Excelのピボットテーブルと同じ考え方じゃないですか？ 軸を分けて、あとから組み合わせる……」

ナナコ:「……まさに、その通りです」

ドクターがほんの一瞬、ミサキを見る。視線に驚きの色が混ざったように——いや、気のせいかもしれない。

### Before Code（患部）の提示
ドクターが画面に映し出す200行超の巨大関数。if-elsif-elsif...が延々と続く。

### After Code（処方）の実装
ドクターが黙々とキーボードを叩き始める。HHKB特有の静電容量の打鍵音が響く。

ナナコが随時解説:
1. まず `ReportFormatter` ロール（出力形式のインターフェース）を切り出す
2. 次に `DepartmentReport` 抽象クラスを作り、formatterを持たせる（has-a関係）
3. 各部門クラス（Sales, Accounting, HR）が `DepartmentReport` を継承
4. 各形式クラス（PDF, CSV, HTML）が `ReportFormatter` ロールを実装
5. 組み合わせはコンストラクタで注入

### カタルシスポイント
200行の関数が消え、各ファイルが20行程度に。ミサキが画面を覗き込み、

ミサキ:「……新しい部門が増えたら、部門クラスを1つ追加するだけ？」
ナナコ:「はい。出力形式側を触る必要はありません」
ミサキ:「新しい形式が増えても……」
ナナコ:「形式クラスを1つ追加するだけです。部門側は何も変わりません」
ミサキ:「胃が……痛くならない……」

---

## IV. 予後 — 退院指導

### 術後確認
テストが全てパスしたことを確認。ミサキが自分で新しい部門（「広報」）を追加してみる。ファイルを1つ作って、テスト1つ書いて、通る。以前なら3箇所のif文に分岐を追加する必要があった。

### 勘違いシーン
帰り際、ミサキがカウンターに置いてあったウェットティッシュで手を拭こうとすると、ドクターが無言でティッシュの箱を差し出す（椅子に座りながら片手を伸ばしただけ。実際にはウェットティッシュの箱がキーボードの邪魔だったので移動させただけ）。

ミサキ:（心の中で）「この人……不愛想なのに、さりげなく気遣いができるんだ……」
ナナコ:（何も言わず、やれやれという顔で微笑む）
ドクター:（すでにモニタに向き直っていて、ミサキのことは忘れている）

### ドクターの最後の一言
ミサキが帰り支度をし、鉄扉のほうへ歩きかける。ドクターが振り向かずに一言。

ドクター:「……命名。直せ」
ナナコ:「あ、あの……変数名がExcelのセル番地のままなのは……やはり、治していただけると」
ミサキ:（苦笑）「……はい」

### クロージング
ミサキが鉄扉を押して廊下に出る。磨かれたリノリウムの床を歩きながら、カバンの中のスプレッドシート——ハサミで切られた紙片——を見つめる。

ミサキ:（心の中で）「行と列を分ける。ピボットテーブルの考え方。……私がずっとExcelでやってきたことと、根っこは同じだったんだ」

廊下の蛍光灯がわずかに瞬き、ミサキの影が伸びた。ノートPCの中にはまだ `$cell_A1` が残っている。でも、それを直すのは——今の私にはもう、怖くない。

---

## メタ情報

### 舞台設定チェック
- [x] 来院設定: ミサキが来て帰る側、ドクターとナナコは診療所にいる側
- [x] 帰り支度の主語: ミサキ（患者）
- [x] 鉄扉の開閉: 入室時「引く」、退室時「押す」（外開き）
- [x] クリニック固有小物: O'Reilly本の壁、トリプルディスプレイ、HHKB ✓
- [x] 患者のデスク/自席: 存在しない（持ち込みノートPCのみ）✓
- [x] 退場後の描写: 患者が廊下に出る ✓

### 勘違いシーン配置
- **配置**: IV. 予後（退院直前）
- **トリガー**: ドクターがウェットティッシュの箱を差し出す（キーボードの邪魔だっただけ）
- **誤解**: ミサキが「さりげない気遣い」と受け取る
- **助手の反応**: 否定も肯定もせず微笑む ✓

### 意外性の設計
- **核心**: 患者が持参した「Excel表」が、ドクターに物理的にハサミで切られ、そのこと自体がBridgeパターンの説明になる——という、既存知識（Excel）から新知識（Bridge）への橋渡し
- **読者の予想裏切り**: 「非エンジニアの患者は理解に苦しむだろう」→ 実はExcelの経験がBridge理解の最短ルートだった
