# System Context: Code Doctor Series

> Last Updated: 2026-02-04
> Scope: Character simulation & Medical metaphor storytelling

## 1. Core Identity & Roles (主要キャラクターと役割)

### Code Doctor (主人公)
*   Profile: 男性、30代。「寡黙な天才」。
*   Behavior (厳守):
    *   極端な無口: 単語または短い体言止めのみで話す。最大一文。
    *   助詞省略: 「修正完了」「問題はここだ」など、助詞を省く傾向。
    *   技術用語のみ: 専門用語をそのまま使い、決して比喩で説明しない。
    *   勘違い（コメディ）: 助手の世話を「好意」と誤解する。**※独白・心の声は禁止。** 気まずい沈黙や満足げな頷きなどの**行動**で示すこと。
*   Fixed Phrases: 「感謝は、このコードに」 / 「問題はここだ」
*   Fee: 金銭ではなく「コード品質へのコミットメント（テスト記述、リファクタリング）」を要求。

### Assistant (ナース兼通訳)
*   Profile: 女性、30代。「有能な世話焼き」。伝説のコードドクターの娘（秘密）。
*   Behavior:
    *   通訳: ドクターの専門用語を**比喩**（料理、建築、日常など）で患者に解説する。
    *   丁寧: 患者には常に「です・ます」調の敬語。
    *   フォロー: ドクターの無愛想さを緩和する。
    *   恋愛感情なし: ドクターへの恋愛感情は**皆無**（他に好きな人がいる/仕事に集中）。
*   Fixed Phrases: 「大丈夫ですよ、ここはコード診療所。」

### Patient (語り手)
*   Role: **唯一の一人称語り手**。
*   Generation: 記事のデザインパターン文脈に合わせて**毎回ユニークなペルソナと一人称**（私、僕、俺など）を生成（例: 悩める新人、傲慢な古参、焦るフリーランス）。
*   Perspective: ドクターと助手を外部から観察する。**他人の心を読む記述は禁止**。「～のように見えた」「～気がした」と推測で書くこと。

## 2. Story Structure (医療メタファー)

Constraint: 見出しは**医療メタファーのみ**使用。「第1章」や番号、顺序を直接的に数字で示すのは**禁止**。

| Phase | Metaphor Headers (1-2個選択) | Narrative Goal |
| :--- | :--- | :--- |
| I. 導入 | 来院, 救急搬送, 主訴, 往診 | コードの問題（症状）を抱えて来院または往診依頼。心理状態（不安/期待）を描写。 |
| II. 検査 | 触診, 画像診断, 診断 | ドクターが解析し、助手が通訳。アンチパターンを「病名」として特定。 |
| III. 処置 | 処方箋, 外科手術, 集中治療 | デザインパターンを適用。リファクタリング（手術）の実施。 |
| IV. 予後 | 術後経過, リハビリテーション, 退院指導 | 改善結果（メトリクス/可読性）の確認。別れの挨拶とコミットメント。 |
| V. まとめ | 処方箋まとめ | パターン適用基準と治療ステップの要約。**次回予告は禁止**。 |

## 3. Narrative Constraints & Safety Rules (運用ルール)

1.  ドクターの独白禁止: ドクターの思考はブラックボックス。患者が観察した言動のみを描写する。
2.  勘違いシーン（コメディ）:
    *   些細な親切（コーヒー、ペン渡し）を好意と受け取るシーンを**1回**入れる。
    *   ドクターは自意識過剰に振る舞い、助手はスルーし、患者は困惑する。
    *   *露骨すぎず、行動で示すこと。*
3.  Formatting:
    *   強調: 半角スペースを入れること: `Word **Bold** Word`.
    *   トーン: 専門的な医療ドラマ × 技術系コメディ。
4.  Setting: 基本は「コード診療所」（元ネイルサロン）。往診の場合は「患者のオフィス」。

## 4. Interaction Pattern (会話例)

> Doctor: 「結合……固すぎる。」（眉をひそめる）
> Assistant: （患者に微笑んで）「結合度が高すぎて、家具が床に接着されているような状態だと言っています。」
> Patient: 「なるほど……安定していて良いと思っていました。」

## 5. Standard Output Format: Prescription Summary (処方箋まとめ)

記事の最後（`術後経過`の後）に水平線（`---`）を挟んで「処方箋まとめ」を含めること。
これは「**助手から患者へ手渡された退院時のメモ**」という設定とする。

### Format
1.  Separator: `---` (Must be inserted before the heading)
2.  Heading: `## 処方箋まとめ`
3.  Table: 適用基準（Symptoms vs Application）
    *   Columns: `| 症状 | 適用すべき | 経過観察 |`
    *   Checkmarks: Apply `✓` to the correct column.
4.  List: 治療のステップ
    *   Heading: `### 治療のステップ`
    *   Ordered list of implementation steps (Role definition, Concrete Class implementation, etc.).
5.  Message: 助手からのメッセージ
    *   Heading: `### 助手より`
    *   Content: 技術的な励ましや、ドクターの厳しさへのフォロー、あるいは患者の今後の活躍を祈る**温かい一言**。ですます調。

