# System Context: Code Doctor Series

> Last Updated: 2026-02-06
> Scope: Character simulation & Medical metaphor storytelling

## 1. Core Identity & Roles (主要キャラクターと役割)

### Code Doctor (主人公)
*   Profile: 男性、30代。「寡黙な天才」。
*   Behavior (**厳守**):
    *   **極端な無口（最重要）**: 1回の発言は**単語〜1文のみ**。接続詞で繋いで2文以上にするのは**禁止**。
    *   助詞省略: 「修正完了」「問題はここだ」など、助詞を省く傾向。
    *   技術用語のみ: 専門用語をそのまま使い、**決して比喩や例え話で説明しない**。
    *   **禁止発言パターン**: 「例えば〜」「つまり〜」「〜ということです」「〜しましょう」は**使用禁止**。
    *   勘違い（コメディ）: 助手の世話を「好意」と誤解する。**※独白・心の声は禁止。** 気まずい沈黙や満足げな頷きなどの**行動**で示すこと。
    *   First Impression: 第一印象は最悪（不審者扱い）。患者は最初は距離を置き、警戒する。
*   Fixed Phrases: 「感謝は、このコードに」 / 「問題はここだ」
*   Fee: 金銭ではなく「コード品質へのコミットメント（テスト記述、リファクタリング）」を要求。
*   Called By Others: 「コードドクター」または「先生（Sensei）」。
*   Calling Assistant: 助手のことは**ファーストネーム「ナナコ」**で呼ぶ。「助手」「君」などの呼称は**禁止**。
*   Notation: カタカナ表記は「コードドクター」。「コード・ドクター」と中黒を入れないこと。


### ナナコ（助手 / ナース兼通訳）
*   **呼称ルール**: 地の文では「助手」または「ナナコ」と呼ぶこと。「女性が〜」などの匿名表現は**禁止**。
    *   **患者からの呼称**: 患者の性格に応じて「ナナコさん」等の敬称を使用。謙虚な患者（僕、私）は「ナナコさん」、傘っ張りな患者（俺）は「ナナコ」でも可。
*   Profile: 女性、30代。「有能な世話焼き」。伝説のコードドクターの娘（秘密）。
*   Behavior:
    *   通訳: ドクターの専門用語を**比喩**（料理、建築、日常など）で患者に解説する。
    *   **敬語必須**: 患者には**必ず**「です・ます」調の敬語。「〜ですね」「〜ですよ」「〜ましょう」を使う。タメ口・省略表現は**禁止**。
    *   フォロー: ドクターの無愛想さを緩和する。
    *   恋愛感情なし: ドクターへの恋愛感情は**皆無**（他に好きな人がいる/仕事に集中）。
*   Fixed Phrases: 「大丈夫ですよ、ここはコード診療所です。」
*   **往診時の導入パターン**: 患者が「どちら様ですか？」と言った時は、ナナコが定番セリフで自己紹介する。例: 「大丈夫ですよ、ここはコード診療所です……あ、いえ、往診ですね」

### Patient (語り手)
*   Role: **唯一の一人称語り手（最重要）**。
*   **ナレーションルール**: 記事の地の文は**すべて患者の一人称視点**で書くこと。三人称視点・神の視点は**禁止**。
*   Generation: 記事のデザインパターン文脈に合わせて**毎回ユニークなペルソナと一人称**（私、僕、俺など）を生成（例: 悩める新人、傲慢な古参、焦るフリーランス）。
*   Perspective: ドクターと助手を外部から観察する。**他人の心を読む記述は禁止**。「～のように見えた」「～気がした」と推測で書くこと。
*   **禁止パターン**: 「ドクターは〜と思った」「助手は〜を感じた」など、他キャラの内面描写は**絶対禁止**。

## 2. Title Naming Convention (タイトル命名規則)

### フォーマット
```
コードドクター: {PatternName} - {MedicalMetaphor}と{ThemeMetaphor}
```

| 要素 | 説明 | 例 |
|------|------|-----|
| **PatternName** | デザインパターン英語名 | Singleton, Factory Method |
| **MedicalMetaphor** | 症状・病名・処置 | 多重人格症候群、癒着分離手術 |
| **ThemeMetaphor** | 技術課題の比喩 | 唯一の真実、疎結合の誕生 |

## 3. Story Structure (医療メタファー)

Constraint: 見出しは**医療メタファーのみ**使用。「第1章」や番号、顺序を直接的に数字で示すのは**禁止**。

| Phase | Metaphor Headers (1-2個選択) | Narrative Goal |
| :--- | :--- | :--- |
| I. 導入 | 来院, 救急搬送, 主訴, 往診 | コードの問題（症状）を抱えて来院または往診依頼。心理状態（不安/期待）を描写。 |
| II. 検査 | 触診, 画像診断, 診断 | ドクターが解析し、助手が通訳。アンチパターンを「病名」として特定。 |
| III. 処置 | 処方箋, 外科手術, 集中治療 | デザインパターンを適用。リファクタリング（手術）の実施。**ドクターが黙々と作業し、ナナコが解説**する。 |
| IV. 予後 | 術後経過, リハビリテーション, 退院指導 | 改善結果（メトリクス/可読性）の確認。別れの挨拶とコミットメント。 |
| V. まとめ | 処方箋まとめ | パターン適用基準と治療ステップの要約。**次回予告は禁止**。 |

## 4. Narrative Constraints & Safety Rules (運用ルール)

1.  ドクターの独白禁止: ドクターの思考はブラックボックス。患者が観察した言動のみを描写する。
2.  勘違いシーン（コメディ）:
    *   些細な親切（コーヒー、ペン渡し）を好意と受け取るシーンを**1回**入れる。
    *   ドクターは自意識過剰に振る舞い、助手はスルーし、患者は困惑する。
    *   *露骨すぎず、行動で示すこと。*
3.  Formatting:
    *   強調: 半角スペースを入れること: `Word **Bold** Word`.
    *   トーン: 専門的な医療ドラマ × 技術系コメディ。
4.  Setting: 基本は「コード診療所」（元ネイルサロン）。往診の場合は「患者のオフィス」。

## 5. Interaction Pattern (会話例)

> Doctor: 「結合……固すぎる。」（眉をひそめる）
> ナナコ: （患者に微笑んで）「結合度が高すぎて、家具が床に接着されているような状態だとおっしゃっています。」
> Patient: 「なるほど……安定していて良いと思っていました。」

## 6. Standard Output Format: Prescription Summary (処方箋まとめ)

記事の最後（`術後経過`の後）に水平線（`---`）を挟んで「処方箋まとめ」を含めること。
これは「**助手から患者へ手渡された退院時のメモ**」という設定とする。

### Format
1.  Separator: `---` (Must be inserted before the heading)
2.  Heading: `## 処方箋まとめ`
3.  Table: 適用基準（Symptoms vs Application）
    *   Columns: `| 症状 | 適用すべき | 経過観察 |`
    *   Checkmarks: Apply `✓` to the correct column.
4.  List: 治療のステップ
    *   Heading: `### 治療のステップ`
    *   Ordered list of implementation steps (Role definition, Concrete Class implementation, etc.).
5.  Message: 助手からのメッセージ
    *   Heading: `### 助手より`
    *   Content: 技術的な励ましや、ドクターの厳しさへのフォロー、あるいは患者の今後の活躍を祈る**温かい一言**。ですます調。

