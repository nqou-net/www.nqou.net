---
date: 2026-01-21T18:00:00+09:00
description: シリーズ記事「Interpreterパターンで学ぶオブジェクト指向設計」の連載構造案3つ（案A/B/C）- ダイス言語インタプリタ、占いAI、ハッカースクリプトの3題材
draft: true
epoch: 1769004000
image: /favicon.png
iso8601: 2026-01-21T18:00:00+09:00
title: '連載構造案 - Interpreterパターン新企画（全8回）'
---

# 連載構造案：Interpreterパターン新企画

調査結果: `content/warehouse/interpreter-pattern.md` の調査結果に基づく

## 前提情報

- **技術スタック**: Perl v5.36以降（signatures、postfix dereference対応）、Mooによるオブジェクト指向プログラミング
- **想定読者**: Perl入学式卒業したばかりの入門者
- **想定ペルソナ**: 「Mooで覚えるオブジェクト指向プログラミング」シリーズを読了してオブジェクト指向プログラミングを身に付けたい、モダンなPerlを使ってみたい
- **学習目標**:
  - オブジェクト指向プログラミングの原則を深く学べる
  - SOLID原則を深く学べる
  - Interpreterパターンを自然に覚えられる
  - デザインパターンの名前が覚えられる
- **位置づけ**: 「Mooで覚えるオブジェクト指向プログラミング」シリーズの次のステップとして、振る舞いパターンを実装で体得する
- **ストーリー**: 知っている知識で動くプログラムを作成 → 機能追加で問題が発覚 → SOLID原則やパターン導入で解決 → 完成コードで達成感
- **制約**:
  - 1記事1概念
  - コード例2つまで
  - 回の最後には完成コードを示す（原則1スクリプト）
  - デザインパターン名はシリーズ名に含めない

### Interpreterパターンの特徴

Interpreterパターンは以下の特性を持つ：

| 特性 | 説明 |
|------|------|
| **文法のクラス表現** | 言語の文法規則を各クラスが1つずつカプセル化 |
| **抽象構文木（AST）** | 式をツリー構造として表現し、再帰的に解釈 |
| **終端式/非終端式** | リーフノード（数値、変数）と複合ノード（演算子）の区別 |
| **Compositeとの親和性** | 抽象構文木はCompositeパターンの構造そのもの |
| **拡張性** | 新しい式クラスを追加するだけで文法を拡張可能 |

### 既存シリーズとの差別化

**使用済みの題材（避けるべき）:**

| シリーズ | 題材 | パターン |
|---------|------|---------|
| Perlでローグライク通知システムを作ろう | ゲーム通知 | Observer |
| Mooで作る簡易テキストエディタ | テキスト編集 | Command |
| PerlとMooでAPIレスポンスシミュレーターを作ってみよう | APIレスポンス | Factory Method |
| PerlとMooでSQLクエリビルダー | SQLビルダー | Builder |
| Mooを使ってデータエクスポーターを作ってみよう | データ変換 | Strategy |

---

## 案A: 「ダイス言語インタプリタ」アプローチ（王道）

### シリーズ名案

**「PerlとMooでダイス言語を作ってみよう」**（全8回）

### 特徴・アプローチ

TRPGやボードゲームで使われる「ダイス記法」（例: `2d6+3`、`3d8*2-1`）を解釈・評価するインタプリタを構築する。ゲーマーなら誰もが知るダイス記法を題材に、文法規則をクラスとして表現する設計を自然に体得する。

### USP（独自の価値提案）

**「なぜこのシリーズにお金を払う価値があるのか？」**

- 無料チュートリアルでは避けがちな「文法規則をオブジェクトで表現する」発想を、身近なダイス記法で体験できる
- ゲーム開発やTRPGツール開発への直接的な応用が可能
- 完成品を「自作ダイス言語」として友人に自慢でき、Discord Botへの組み込みなど実用的な展開が見える
- 「2d6+3」という文字列がオブジェクトのツリーに変換される過程を視覚的に理解できる

### メリット

- TRPG/ボードゲームファンには馴染みのある題材で直感的
- ダイス記法は「終端式」と「非終端式」の区別が明確（数値・ダイス vs 演算子）
- 文法が単純なためInterpreterパターンの本質に集中できる
- 拡張ポイント（ダイスプール、リロール、最大値取得）が豊富

### デメリット

- TRPGに馴染みのない読者には「2d6」の意味説明が必要
- 乱数生成があるためテスト検証にやや工夫が必要
- 本格的なダイスパーサーには正規表現の知識も必要

### 連載構造表

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 第1回 | 第1回-ダイスを振ろう - PerlとMooでダイス言語を作ってみよう | ダイス振りの基本 | 「2d6」を解釈してダイスを振る最小限の実装。まずは動くものを作る | Diceクラス（rollメソッド） | 実行デモ | perl, moo, dice, trpg, random |
| 第2回 | 第2回-計算式が複雑になると破綻 - PerlとMooでダイス言語を作ってみよう | if/elseの限界 | 「2d6+3」「3d8*2-1」など複雑な式に対応しようとしてif分岐が爆発する | ベタ書き解析コード | 問題点の整理 | perl, moo, code-smell, refactoring, parsing |
| 第3回 | 第3回-数値とダイスをオブジェクトに - PerlとMooでダイス言語を作ってみよう | 終端式（TerminalExpression） | 「数値」と「ダイス」を独立したクラスにして、evalメソッドで評価する | NumberExpr | DiceExpr | perl, moo, expression, terminal, class-design |
| 第4回 | 第4回-足し算クラスを作る - PerlとMooでダイス言語を作ってみよう | 非終端式（NonterminalExpression） | 「+」を表すAddExprクラスを作成。左辺と右辺のExpressionを持ち、再帰的に評価する | AddExprクラス | 「1d6+3」の評価デモ | perl, moo, expression, nonterminal, composition |
| 第5回 | 第5回-すべての式に共通ルールを - PerlとMooでダイス言語を作ってみよう | Moo::Roleとrequires | すべてのExpressionクラスに`eval`メソッドを必須にするRoleを定義 | ExpressionRoleロール | Role適用例 | perl, moo, moo-role, interface, requires |
| 第6回 | 第6回-掛け算・引き算も追加（OCP） - PerlとMooでダイス言語を作ってみよう | 開放閉鎖原則 | SubExpr、MulExprを追加。既存コードを変更せずに文法を拡張する | SubExprクラス | MulExprクラス | perl, moo, solid, open-closed-principle, extensibility |
| 第7回 | 第7回-完成！ダイス言語インタプリタ - PerlとMooでダイス言語を作ってみよう | 統合と完成 | パーサーを追加し、文字列「2d6+3*2」から自動で式ツリーを構築。完成版を実行 | DiceParserクラス | 完成版スクリプト | perl, moo, parser, integration, tutorial |
| 第8回 | 第8回-これがInterpreterパターンだ！ - PerlとMooでダイス言語を作ってみよう | Interpreterパターン | 作ってきた設計がInterpreterパターンだったことを明かす。構造図と応用を解説 | クラス対応表 | Compositeとの関係 | perl, moo, design-patterns, interpreter-pattern, pattern-comparison |

### 差別化ポイント

- ゲーム要素を取り入れた「遊べる」題材
- ダイス記法という明確な文法でInterpreterの構造が理解しやすい
- 完成品がDiscord BotやWebアプリに発展可能な実用性

---

## 案B: 「運勢占いAI」アプローチ（革新）

### シリーズ名案

**「Perlで運勢占いAIを作ろう」**（全8回）

### 特徴・アプローチ

占い師が使う「占い言語」（例: `星座 AND 血液型 OR 誕生日`）を解釈し、運勢を判定するAI風のシステムを構築する。論理式（AND/OR/NOT）の評価を題材に、抽象構文木の構築と解釈を学ぶ。

### USP（独自の価値提案）

**「なぜこのシリーズにお金を払う価値があるのか？」**

- 論理式評価という実用的なテーマを「占い」という親しみやすい衣装で包む
- 「自作占いAI」という自慢できるアウトプットが得られる
- Interpreterパターンの典型例である「論理式インタプリタ」を楽しく学べる
- ビジネスルールエンジンへの応用が可能な本格的な設計を体得

### メリット

- AND/OR/NOTという論理演算はInterpreterパターンの王道題材
- 「占い」という娯楽性で学習モチベーションを維持
- 条件の組み合わせによる判定ロジックは実務でも頻出
- 新しい占い条件の追加がOCPの練習になる

### デメリット

- 論理式の概念（AND/OR/NOT）の説明が必要
- 「占い」という題材に抵抗がある読者がいる可能性
- 判定ロジックが恣意的で「技術的正確性」のアピールが弱い

### 連載構造表

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 第1回 | 第1回-星座で運勢を占おう - Perlで運勢占いAIを作ろう | 基本の判定 | 星座だけで運勢を判定する最小限の占いシステムを作成 | FortuneJudgeクラス | 星座判定デモ | perl, moo, fortune, zodiac, logic |
| 第2回 | 第2回-条件が増えると地獄 - Perlで運勢占いAIを作ろう | 複数条件の破綻 | 血液型、誕生日、ラッキーカラーなど条件を追加するとif/elseが爆発 | ベタ書き条件コード | 問題点の整理 | perl, moo, code-smell, refactoring, logic |
| 第3回 | 第3回-条件をオブジェクトに - Perlで運勢占いAIを作ろう | 終端式（TerminalExpression） | 「星座チェック」「血液型チェック」を独立したクラスに分離 | ZodiacCondition | BloodTypeCondition | perl, moo, expression, terminal, class-design |
| 第4回 | 第4回-ANDとORを作る - Perlで運勢占いAIを作ろう | 非終端式（NonterminalExpression） | AND/OR条件を表すクラスを作成し、再帰的に評価する | AndConditionクラス | OrConditionクラス | perl, moo, expression, nonterminal, composition |
| 第5回 | 第5回-条件クラスを統一しよう - Perlで運勢占いAIを作ろう | Moo::Roleとrequires | すべての条件クラスに`evaluate`メソッドを必須にするRoleを定義 | ConditionRoleロール | Role適用例 | perl, moo, moo-role, interface, requires |
| 第6回 | 第6回-NOT条件も追加（OCP） - Perlで運勢占いAIを作ろう | 開放閉鎖原則 | NotConditionを追加。既存コードを変更せずに論理演算を拡張 | NotConditionクラス | 複合条件の評価 | perl, moo, solid, open-closed-principle, extensibility |
| 第7回 | 第7回-完成！運勢占いAI - Perlで運勢占いAIを作ろう | 統合と完成 | 全条件を統合し、占い結果を表示する対話的なシステムを完成 | 完成版スクリプト | 占い実行デモ | perl, moo, integration, fortune, tutorial |
| 第8回 | 第8回-これがInterpreterパターンだ！ - Perlで運勢占いAIを作ろう | Interpreterパターン | 作った仕組みがInterpreterパターンだったことを明かす。ビジネスルールエンジンへの応用を解説 | クラス対応表 | ルールエンジンとの比較 | perl, moo, design-patterns, interpreter-pattern, pattern-comparison |

### 差別化ポイント

- 「占い」という親しみやすい題材で論理式評価を学べる
- AND/OR/NOTというInterpreterパターンの典型例を扱う
- ビジネスルールエンジンへの応用可能性を示す

---

## 案C: 「ハッカースクリプト言語」アプローチ（逆転）

### シリーズ名案

**「Perlで俺専用スクリプト言語を作ろう」**（全8回）

### 特徴・アプローチ

変数代入と四則演算ができるミニ言語インタプリタを構築する。「プログラミング言語を自作する」という野心的な目標を掲げ、Interpreterパターンが本来想定する「言語処理系」に正面から取り組む。

### USP（独自の価値提案）

**「なぜこのシリーズにお金を払う価値があるのか？」**

- 「俺専用言語を作った」という最強の自慢ネタが手に入る
- プログラミング言語の仕組みを内側から理解できる貴重な体験
- 無料チュートリアルでは避けられがちな「言語処理系入門」を実践的に学べる
- Interpreterパターンの本来の用途である「ミニ言語の実装」を正面から扱う

### メリット

- 「言語を作る」という強烈なインパクトと達成感
- Interpreterパターンの本質（言語文法のオブジェクト表現）を最も直接的に学べる
- 変数代入、式評価というプログラミングの基礎概念を深く理解できる
- 拡張性（if文、ループ、関数）への発展可能性が高い

### デメリット

- 難易度が高く、初心者には敷居が高い可能性
- パーサーの実装が複雑になりがち
- 8回で収まる範囲に機能を絞る必要がある

### 連載構造表

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 第1回 | 第1回-数式を計算しよう - Perlで俺専用スクリプト言語を作ろう | 数式評価の基本 | 「3+5」を評価して結果を返す最小限のインタプリタを作成 | ベタ書き計算コード | 実行デモ | perl, moo, calculator, expression, parsing |
| 第2回 | 第2回-複雑な式で破綻 - Perlで俺専用スクリプト言語を作ろう | if/elseの限界 | 「3+5*2」「(1+2)*3」など複雑な式に対応しようとして破綻する | ベタ書き解析コード | 問題点の整理 | perl, moo, code-smell, refactoring, parsing |
| 第3回 | 第3回-数値をオブジェクトに - Perlで俺専用スクリプト言語を作ろう | 終端式（TerminalExpression） | 「数値」を独立したNumberExprクラスにして、evalメソッドで評価する | NumberExprクラス | 実行デモ | perl, moo, expression, terminal, class-design |
| 第4回 | 第4回-演算子をオブジェクトに - Perlで俺専用スクリプト言語を作ろう | 非終端式（NonterminalExpression） | 「+」「-」「*」「/」をそれぞれ独立したクラスに。左右の子式を持つ | AddExpr / SubExpr | MulExpr / DivExpr | perl, moo, expression, nonterminal, composition |
| 第5回 | 第5回-式の共通ルールを決める - Perlで俺専用スクリプト言語を作ろう | Moo::Roleとrequires | すべてのExpressionクラスに`eval`メソッドを必須にするRoleを定義 | ExpressionRoleロール | Role適用例 | perl, moo, moo-role, interface, requires |
| 第6回 | 第6回-変数を使えるようにする - Perlで俺専用スクリプト言語を作ろう | Context（変数テーブル） | 変数代入と参照を実装。Contextクラスで変数テーブルを管理 | Contextクラス | VariableExprクラス | perl, moo, context, variable, environment |
| 第7回 | 第7回-完成！俺専用言語 - Perlで俺専用スクリプト言語を作ろう | 統合と完成 | 簡易パーサーと統合し、対話的に式を評価できるREPLを完成 | 完成版スクリプト | REPL実行デモ | perl, moo, repl, integration, tutorial |
| 第8回 | 第8回-これがInterpreterパターンだ！ - Perlで俺専用スクリプト言語を作ろう | Interpreterパターン | 作った仕組みがInterpreterパターンだったことを明かす。本格的な言語処理系への発展を解説 | クラス対応表 | 他の言語処理系との比較 | perl, moo, design-patterns, interpreter-pattern, pattern-comparison |

### 差別化ポイント

- 「言語を自作する」という最強のインパクト
- Interpreterパターンの本来の用途を正面から学べる
- プログラミング言語の仕組みを内側から理解できる

---

## 推薦案とその理由

### 推薦：案A「ダイス言語インタプリタ」アプローチ

### 推薦理由

1. **ペルソナとの適合性**
   - TRPG/ボードゲームという「遊び心」のある題材で学習モチベーションを維持
   - ダイス記法（2d6+3）は文法がシンプルで、Interpreterパターンの構造理解に集中できる
   - 「自作ダイス言語」は友人に自慢できる実用的なアウトプット

2. **検索意図との適合性**
   - 「Perl ダイス」「TRPG ダイスロール」など尖った検索流入が期待できる
   - 最終回でInterpreterパターン名を明かしてデザインパターン検索にも対応
   - ゲーム開発者やTRPGファンという明確なターゲット層

3. **学習効果**
   - 「数値」「ダイス」→ 終端式、「+」「-」「*」→ 非終端式という対応が明確
   - 式のツリー構造（抽象構文木）を視覚的にイメージしやすい
   - 文法拡張（新しい演算子、関数）がOCPの練習になる

4. **既存シリーズとの連続性**
   - 既存シリーズの題材と被らず、完全に新しいドメイン
   - Compositeパターン（ツリー構造）を復習しつつ新しいパターンに繋がる
   - MooのRoleや型制約を復習しつつ実務的な題材に繋がる

5. **難易度のバランス**
   - 案Cの「言語自作」ほど難しくなく、案Bより技術的な深みがある
   - 8回で完結できる適切なスコープ

### 代替案の選択指針

- **案Bが適しているケース**: 論理式評価（AND/OR/NOT）を重視したい場合、ビジネスルールエンジンへの応用を見据える場合
- **案Cが適しているケース**: 挑戦的な読者層を想定する場合、言語処理系の本格的な入門を目指す場合

---

## 付記

### 各案の比較表

| 項目 | 案A | 案B | 案C |
|-----|-----|-----|-----|
| **回数** | 8回 | 8回 | 8回 |
| **題材** | ダイス言語 | 占いAI | 俺専用言語 |
| **直感的なわかりやすさ** | ◎ | ○ | △ |
| **「楽しさ」要素** | ◎ | ○ | ◎ |
| **実務との関連** | ○ | ◎ | ○ |
| **難易度** | 中 | 中 | 高 |
| **インパクト** | ○ | ○ | ◎ |

---

**作成日**: 2026年1月21日  
**担当エージェント**: GitHub Copilot  
**参照元**: `content/warehouse/interpreter-pattern.md`

---

## レビュー履歴

### 第1版（2026-01-21）

- 作成担当: GitHub Copilot
- 作成概要: 3案（ダイス言語インタプリタ、運勢占いAI、ハッカースクリプト言語）を作成
- 推薦案: 案A（ダイス言語インタプリタ）

### レビュー待ち事項

- [x] SEO視点でのタイトル・タグ・description改善
- [x] 品質視点での構造・難易度評価
- [x] 技術的正確性の確認

---

### 第1版レビュー（SEO視点）（2026-01-21）

- **レビュー担当**: search-engine-optimization エージェント
- **評価結果**: 合格（軽微な改善提案あり）
- **主な改善点**:
  - シリーズ名「PerlとMooでダイス言語を作ってみよう」は検索に適した長さ
  - SNS向け短縮案（例: 「Perlでダイス言語を作ろう」）を併記すると検索結果での表示切れを回避できる
  - 共通タグに `perl-tutorial` と `dsl` を追加すると検索意図に寄せやすい
  - 各回descriptionは記事執筆時に120〜160字で作成する
  - 「TRPG」「ダイスロール」「Discord Bot」など関連キーワードを記事内に自然に含める

---

### 第1版レビュー（品質視点）（2026-01-21）

- レビュー担当: reviewer エージェント
- 評価結果: 合格
- 主な改善点:
  - 第1回でダイス記法（NdM形式）の説明を明示する
  - 第7回の統合回でパーサーの実装が複雑にならないよう、正規表現ベースの簡易版で対応
  - 乱数テストにはシード固定のアプローチを第1回で紹介

#### 品質基準チェック

| 基準 | 評価 |
|------|------|
| 構造の一貫性 | ✓ |
| 段階的難易度上昇 | ✓ |
| 1記事1概念の原則 | ✓ |
| 各案の差別化 | ✓ |
| 連載構造表の完全性 | ✓ |
| ペルソナへの適合性 | ✓ |
| 技術的正確性 | ✓ |

---

### 最終版（第2版）確定（2026-01-21）

- 最終確認: reviewer エージェント
- 評価: 全品質基準を満たす
- 選定案: 案A（ダイス言語インタプリタ）

---

## テンプレート使用時のチェックリスト

1. [x] 前提情報（技術スタック、想定読者、学習目標）が記載されているか
2. [x] 3案（案A/B/C）が作成されているか
3. [x] 各案にメリット・デメリットが明記されているか
4. [x] 連載構造表が全回分完成しているか
5. [x] 推奨タグが英語小文字・ハイフン形式か（5個まで）
6. [x] 推薦案とその理由が記載されているか
7. [x] レビュー履歴セクションが用意されているか
8. [x] 調査ドキュメントへの参照が明記されているか
