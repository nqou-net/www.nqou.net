# AGENTS.md — リポジトリ用エージェント向けガイダンス

このファイルは `README.md` の補助文書で、Hugo ベースのウェブサイト（`www.nqou.net`）におけるエージェントの作業指針をまとめたものです。

# 目次

## 基礎セクション
- 最重要項目
- コミュニケーション
- プロジェクト概要

## セットアップと準備
- クイックスタート
- エージェントトピックマッピング

## ガイドラインと規約
- 調査ドキュメントの運用
- コンテンツ作成ルール
- コードスタイル & コンテンツ規約
- テスト手順
- プルリクエストとコントリビューション規約
- セキュリティとシークレット管理

## ワークフローと品質管理
- **詳細は [WORKFLOWS.md](WORKFLOWS.md) を参照**
- クイックリファレンス
  - [シリーズ記事のワークフロー](WORKFLOWS.md#シリーズ記事連載記事のワークフロー)
  - [単体記事のワークフロー](WORKFLOWS.md#単体記事のワークフロー)
  - [プロンプトテンプレート](WORKFLOWS.md#プロンプトテンプレート)
  - [品質基準](WORKFLOWS.md#検証と品質ゲート)

## 参考
- 付記

# 最重要項目

- **わからない場合や確証を持てない場合は、正直に『わからない』と答えること**
- 常に正確性と透明性を最優先に考え、適切な回答を心がけること

# コミュニケーション

- 原則として日本語で応答すること
- 技術用語やコードは英語のままで良い

# プロジェクト概要

- 目的: Hugo を用いた個人の技術ブログの管理
- 主要技術: Hugo、Markdown、必要に応じた補助スクリプト（例: Perl）
- 重要なディレクトリ:
  - `agents/`: エージェント用
  - `content/`: ソースコンテンツ（投稿は `content/post/`）
  - `layouts/`, `partials/`, `shortcodes/`: テーマやレイアウト
  - `static/`: 静的アセット
  - `resources/`: Hugo のリソース出力
  - `docs/`: 生成済みサイト（直接の編集は禁止）

# クイックスタート

- コンテンツは `content/post/` に追加する
- エージェントは環境セットアップやシステムレベルのインストールを自動実行してはならない
- `docs/` は生成物のため直接編集しない
- 開発サーバーを起動するには `hugo server -D -F` を実行する
  - `-D`: ドラフト記事（`draft: true`）も表示する
  - `-F`: 未来日の記事も表示する

# コンテンツ作成ルール

- フロントマターは YAML（`---`）で記述する
- 投稿はドラフト中は `draft: true` にする
- タグは英語小文字・ハイフン形式（例: `object-oriented`）
- ファイル名はスラッグ（例: `how-to-hugo.md`）を推奨。ただし、公開時にファイル名が変更される。関連記事の検索はタグを利用すること
- 見出しは ATX スタイル（`##` 以上）を使用。H1 はフロントマターの `title` に任せる
- 外部参照は既存ショートコード（例: `{{< linkcard "https://example.com" >}}`）を優先する
- よく使うフロントマターキー: `title`, `draft`, `tags`, `description`, `image`

# テスト手順

- 自動化されたユニットテストは本リポジトリに含まれていない。検証は主に目視とリンクチェッカーを利用する

# コードスタイル & コンテンツ規約

- Markdown は CommonMark 互換
- フェンスコードブロックに適切な言語タグを付与する
- 画像には意味のある `alt` を付ける
- 既存ショートコードやパーシャルを優先する。生 HTML 埋め込みは禁止

# プルリクエストとコントリビューション規約

- ブランチ命名例: `feature/write-hugo-article`, `fix/images-optimization`
- PR タイトル: `[post] 短い説明` または `[site] 短い説明`
- PR 提出前に行うこと:
  - 下書きは `draft: true` のままにする

# セキュリティとシークレット管理

- リポジトリにシークレットを置かない。CI のシークレットは GitHub Secrets 等を利用する
- フロントマターやコンテンツに資格情報を埋め込まない

# ワークフローと品質管理

記事作成の詳細なワークフロー、プロンプトテンプレート、品質基準については、[WORKFLOWS.md](WORKFLOWS.md) を参照してください。

## クイックリファレンス

- [シリーズ記事のワークフロー](WORKFLOWS.md#シリーズ記事連載記事のワークフロー)
- [単体記事のワークフロー](WORKFLOWS.md#単体記事のワークフロー)
- [プロンプトテンプレート](WORKFLOWS.md#プロンプトテンプレート)
  - [調査・情報収集依頼](WORKFLOWS.md#調査情報収集依頼)
  - [連載構造案作成依頼](WORKFLOWS.md#連載構造案作成依頼)
  - [連載構造案レビュー依頼](WORKFLOWS.md#連載構造案レビュー依頼)
  - [アウトライン依頼](WORKFLOWS.md#アウトライン依頼)
  - [記事作成依頼](WORKFLOWS.md#記事作成依頼)
- [品質基準](WORKFLOWS.md#検証と品質ゲート)

# エージェントトピックマッピング

専門家エージェントは `.github/agents/*.agent.md` を参照してください。以下は代表例です。

- Perl / CPAN / ワンライナー: `perl-monger`
- SQL / クエリ最適化 / DB 設計: `sql-otaku`
- JSON-RPC / API 設計: `json-rpc-otaku`
- WebSocket / リアルタイム通信: `websocket-otaku`
- Docker / コンテナ運用: `docker-otaku`
- Kubernetes / クラスタ運用: `kubernetes-otaku`
- Git / ブランチ運用: `git-otaku`
- GitHub / ワークフロー・PR ベストプラクティス: `github-otaku`
- カスタムエージェント: `github-copilot-otaku`
- AGENTS.pm / AIエージェントガイドライン: `agents-pm-otaku`
- 挿絵作成 / 図表・ダイアグラム / Mermaid: `illustration-craftsperson`

# 付記

- 変更や追補が必要な場合は `.github/agents/*.agent.md` を参照して各エージェントの特性に合わせて調整してください
