<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸ 1. åŸºæœ¬æƒ…å ± 1.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦ è¦ç‚¹ï¼š Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ãã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æŒ¯ã‚‹èˆã„ã«é–¢ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€çŠ¶æ…‹å›ºæœ‰ã®æŒ¯ã‚‹èˆã„ã‚’åˆ¥ã€…ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚‹èˆã„ãŒçŠ¶æ…‹ã«å¿œã˜ã¦å‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n"><title>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸</title><link rel=canonical href=https://www.nqou.net/warehouse/state-pattern/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸"><meta property='og:description' content="Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸ 1. åŸºæœ¬æƒ…å ± 1.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦ è¦ç‚¹ï¼š Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ãã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æŒ¯ã‚‹èˆã„ã«é–¢ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€çŠ¶æ…‹å›ºæœ‰ã®æŒ¯ã‚‹èˆã„ã‚’åˆ¥ã€…ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚‹èˆã„ãŒçŠ¶æ…‹ã«å¿œã˜ã¦å‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n"><meta property='og:url' content='https://www.nqou.net/warehouse/state-pattern/'><meta property='og:site_name' content='nqou.net'><meta property='og:type' content='article'><meta property='article:section' content='Warehouse'><meta property='article:tag' content='design-pattern'><meta property='article:tag' content='state-pattern'><meta property='article:tag' content='gof'><meta property='article:tag' content='behavioral-pattern'><meta property='article:tag' content='object-oriented'><meta property='article:published_time' content='2025-12-31T09:55:19+09:00'><meta property='article:modified_time' content='2025-12-31T09:55:19+09:00'><meta property='og:image' content='https://www.nqou.net/favicon.png'><meta name=twitter:title content="Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸"><meta name=twitter:description content="Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸ 1. åŸºæœ¬æƒ…å ± 1.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦ è¦ç‚¹ï¼š Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ãã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æŒ¯ã‚‹èˆã„ã«é–¢ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€çŠ¶æ…‹å›ºæœ‰ã®æŒ¯ã‚‹èˆã„ã‚’åˆ¥ã€…ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚‹èˆã„ãŒçŠ¶æ…‹ã«å¿œã˜ã¦å‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.nqou.net/favicon.png'><link rel="shortcut icon" href=/favicon.png><style>@import 'https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap';:root{--base-font-family:Arial, "Noto Sans JP", sans-serif}</style><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3923446804785015" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js defer></script><script defer>document.addEventListener("DOMContentLoaded",function(){try{typeof mermaid!="undefined"&&document.querySelector(".mermaid")&&mermaid.initialize({startOnLoad:!0,securityLevel:"strict"})}catch(e){console.warn("Mermaid failed to initialize:",e)}})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-E50H9ESN7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-E50H9ESN7E")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ããƒ»é–‰ã˜ã‚‹>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/public_images/nqounet201703.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥ƒ</span></figure><div class=site-meta><h1 class=site-name><a href=/>nqou.net</a></h1><h2 class=site-description>Whisky, Perl, Kansai.pm</h2></div></header><ol class=menu-social><li><a href=https://github.com/nqounet target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/nqounet target=_blank title=X rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/advent-calendar-2025/><svg class="icon icon-tabler icon-tabler-calendar" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><path d="M8 15h.01"/><path d="M12 15h.01"/><path d="M16 15h.01"/><path d="M8 19h.01"/><path d="M12 19h.01"/><path d="M16 19h.01"/></svg>
<span>Perl Advent Calendar 2025 - AI Edition</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/warehouse/><svg class="icon icon-tabler icon-tabler-warehouse" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10l9-6 9 6"/><rect x="5" y="10" width="14" height="10" rx="2"/><rect x="10" y="14" width="4" height="6" rx="1"/><path d="M7 20v-4h2v4"/><path d="M15 20v-4h2v4"/></svg>
<span>Warehouse</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®æ¬¡</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#1-åŸºæœ¬æƒ…å ±>1. åŸºæœ¬æƒ…å ±</a><ol><li><a href=#11-stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦>1.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦</a></li><li><a href=#12-gofgang-of-fourã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘>1.2 GoFï¼ˆGang of Fourï¼‰ã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘</a></li><li><a href=#13-æ­´å²çš„èƒŒæ™¯ã¨ç™»å ´æ™‚æœŸ>1.3 æ­´å²çš„èƒŒæ™¯ã¨ç™»å ´æ™‚æœŸ</a></li></ol></li><li><a href=#2-ç”¨é€”ã¨é©ç”¨ã‚·ãƒ¼ãƒ³>2. ç”¨é€”ã¨é©ç”¨ã‚·ãƒ¼ãƒ³</a><ol><li><a href=#21-è§£æ±ºã™ã‚‹å•é¡Œ>2.1 è§£æ±ºã™ã‚‹å•é¡Œ</a></li><li><a href=#22-å®Ÿå‹™ã§ã®å…¸å‹çš„ãªåˆ©ç”¨ã‚·ãƒ¼ãƒ³>2.2 å®Ÿå‹™ã§ã®å…¸å‹çš„ãªåˆ©ç”¨ã‚·ãƒ¼ãƒ³</a><ol><li><a href=#221-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ >2.2.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ </a></li><li><a href=#222-ã‚²ãƒ¼ãƒ é–‹ç™º>2.2.2 ã‚²ãƒ¼ãƒ é–‹ç™º</a></li><li><a href=#223-ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡>2.2.3 ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡</a></li></ol></li><li><a href=#23-ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„è¨€èªã§ã®å®Ÿè£…ä¾‹>2.3 ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„è¨€èªã§ã®å®Ÿè£…ä¾‹</a></li></ol></li><li><a href=#3-å®Ÿè£…ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰>3. å®Ÿè£…ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</a><ol><li><a href=#31-åŸºæœ¬çš„ãªå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³perl>3.1 åŸºæœ¬çš„ãªå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPerlï¼‰</a><ol><li><a href=#311-ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…>3.1.1 ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…</a></li><li><a href=#312-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªå®Ÿè£…mooä½¿ç”¨>3.1.2 ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªå®Ÿè£…ï¼ˆMooä½¿ç”¨ï¼‰</a></li></ol></li><li><a href=#32-çŠ¶æ…‹é·ç§»å›³ã¨umlã‚¯ãƒ©ã‚¹å›³>3.2 çŠ¶æ…‹é·ç§»å›³ã¨UMLã‚¯ãƒ©ã‚¹å›³</a><ol><li><a href=#321-çŠ¶æ…‹é·ç§»å›³ä¿¡å·æ©Ÿã®ä¾‹>3.2.1 çŠ¶æ…‹é·ç§»å›³ï¼ˆä¿¡å·æ©Ÿã®ä¾‹ï¼‰</a></li><li><a href=#322-umlã‚¯ãƒ©ã‚¹å›³>3.2.2 UMLã‚¯ãƒ©ã‚¹å›³</a></li></ol></li><li><a href=#33-å®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ä¾‹>3.3 å®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ä¾‹</a><ol><li><a href=#ä¾‹1-è‡ªå‹•è²©å£²æ©Ÿ>ä¾‹1: è‡ªå‹•è²©å£²æ©Ÿ</a></li><li><a href=#ä¾‹2-tcpã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³>ä¾‹2: TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³</a></li></ol></li></ol></li><li><a href=#4-åˆ©ç‚¹ã¨æ¬ ç‚¹>4. åˆ©ç‚¹ã¨æ¬ ç‚¹</a><ol><li><a href=#41-ãƒ¡ãƒªãƒƒãƒˆ>4.1 ãƒ¡ãƒªãƒƒãƒˆ</a></li><li><a href=#42-ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ>4.2 ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</a></li><li><a href=#43-é©ç”¨ã™ã¹ãçŠ¶æ³>4.3 é©ç”¨ã™ã¹ãçŠ¶æ³</a></li><li><a href=#44-é¿ã‘ã‚‹ã¹ãçŠ¶æ³>4.4 é¿ã‘ã‚‹ã¹ãçŠ¶æ³</a></li></ol></li><li><a href=#5-é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ¯”è¼ƒ>5. é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ¯”è¼ƒ</a><ol><li><a href=#51-strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„>5.1 Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„</a></li><li><a href=#52-ãã®ä»–ã®é–¢é€£ãƒ‘ã‚¿ãƒ¼ãƒ³>5.2 ãã®ä»–ã®é–¢é€£ãƒ‘ã‚¿ãƒ¼ãƒ³</a><ol><li><a href=#521-chain-of-responsibilityè²¬ä»»ã®é€£é–ãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.1 Chain of Responsibilityï¼ˆè²¬ä»»ã®é€£é–ï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³</a></li><li><a href=#522-commandãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.2 Commandãƒ‘ã‚¿ãƒ¼ãƒ³</a></li><li><a href=#523-flyweightãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.3 Flyweightãƒ‘ã‚¿ãƒ¼ãƒ³</a></li></ol></li></ol></li><li><a href=#6-å†…éƒ¨ãƒªãƒ³ã‚¯èª¿æŸ»>6. å†…éƒ¨ãƒªãƒ³ã‚¯èª¿æŸ»</a><ol><li><a href=#61-é–¢é€£è¨˜äº‹ã®æ¤œç´¢çµæœ>6.1 é–¢é€£è¨˜äº‹ã®æ¤œç´¢çµæœ</a></li><li><a href=#62-æ¨å¥¨ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ³ã‚¯>6.2 æ¨å¥¨ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ³ã‚¯</a></li></ol></li><li><a href=#7-å‚è€ƒæ–‡çŒ®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº>7. å‚è€ƒæ–‡çŒ®ãƒ»ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº</a><ol><li><a href=#71-æ›¸ç±>7.1 æ›¸ç±</a></li><li><a href=#72-ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹>7.2 ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹</a><ol><li><a href=#é«˜ä¿¡é ¼åº¦>é«˜ä¿¡é ¼åº¦</a></li><li><a href=#ä¸­ä¿¡é ¼åº¦>ä¸­ä¿¡é ¼åº¦</a></li></ol></li><li><a href=#73-ãã®ä»–ã®å‚è€ƒè³‡æ–™>7.3 ãã®ä»–ã®å‚è€ƒè³‡æ–™</a></li></ol></li><li><a href=#8-ã¾ã¨ã‚>8. ã¾ã¨ã‚</a><ol><li><a href=#81-stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ¬è³ª>8.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ¬è³ª</a></li><li><a href=#82-é©ç”¨ã®åˆ¤æ–­åŸºæº–>8.2 é©ç”¨ã®åˆ¤æ–­åŸºæº–</a></li><li><a href=#83-perlã§ã®å®Ÿè£…>8.3 Perlã§ã®å®Ÿè£…</a></li><li><a href=#84-æœ€çµ‚çš„ãªæ¨å¥¨äº‹é …>8.4 æœ€çµ‚çš„ãªæ¨å¥¨äº‹é …</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/warehouse/state-pattern/><img src=/favicon.png loading=lazy alt="Featured image of post Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/warehouse/state-pattern/>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>12æœˆ 31, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>èª­äº†æ™‚é–“: 21åˆ†</time></div></footer></div></header><section class=article-content><h1 id=stateãƒ‘ã‚¿ãƒ¼ãƒ³state-design-patternèª¿æŸ»å ±å‘Šæ›¸>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆState Design Patternï¼‰èª¿æŸ»å ±å‘Šæ›¸</h1><h2 id=1-åŸºæœ¬æƒ…å ±>1. åŸºæœ¬æƒ…å ±</h2><h3 id=11-stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦>1.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®šç¾©ã¨æ¦‚è¦</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ãã®æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æŒ¯ã‚‹èˆã„ã«é–¢ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã€çŠ¶æ…‹å›ºæœ‰ã®æŒ¯ã‚‹èˆã„ã‚’åˆ¥ã€…ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚‹èˆã„ãŒçŠ¶æ…‹ã«å¿œã˜ã¦å‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p><p><strong>æ ¹æ‹ ï¼š</strong>
Gang of Fourï¼ˆGoFï¼‰ã®å®šç¾©ã«ã‚ˆã‚‹ã¨ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚çŠ¶æ…‹ç‰¹æœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´ã™ã‚‹ä»£ã‚ã‚Šã«ã€åˆ¥ã€…ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã™ã‚‹ã€‚çµæœã¨ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŒ¯ã‚‹èˆã„ã¯ã€ã‚ãŸã‹ã‚‚ãã®ã‚¯ãƒ©ã‚¹ãŒå¤‰æ›´ã•ã‚ŒãŸã‹ã®ã‚ˆã†ã«å‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã€‚</p><p><strong>ä»®å®šï¼š</strong></p><ul><li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯è¤‡æ•°ã®çŠ¶æ…‹ã‚’æŒã¤</li><li>å„çŠ¶æ…‹ã«ãŠã„ã¦ã€åŒã˜ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã§ã‚‚ç•°ãªã‚‹æŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹</li><li>çŠ¶æ…‹é·ç§»ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒæ˜ç¢ºã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹</li></ul><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Refactoring Guru: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li><li>Wikipedia - State pattern: <a class=link href=https://en.wikipedia.org/wiki/State_pattern target=_blank rel=noopener>https://en.wikipedia.org/wiki/State_pattern</a></li><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=12-gofgang-of-fourã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘>1.2 GoFï¼ˆGang of Fourï¼‰ã«ãŠã‘ã‚‹ä½ç½®ã¥ã‘</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€GoFã®23ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã†ã¡ã€**æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆBehavioral Patternï¼‰**ã«åˆ†é¡ã•ã‚Œã‚‹ã€‚æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ç›¸äº’ä½œç”¨ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–¹æ³•ã‚’è¨˜è¿°ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ç¾¤ã§ã‚ã‚‹ã€‚</p><p><strong>æ ¹æ‹ ï¼š</strong>
GoFã§ã¯ã€ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä»¥ä¸‹ã®3ã¤ã®ã‚«ãƒ†ã‚´ãƒªã«åˆ†é¡ã—ã¦ã„ã‚‹ï¼š</p><ol><li><strong>ç”Ÿæˆã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆCreational Patternsï¼‰</strong> - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆãƒ¡ã‚«ãƒ‹ã‚ºãƒ </li><li><strong>æ§‹é€ ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆStructural Patternsï¼‰</strong> - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚¯ãƒ©ã‚¹ã®çµ„ã¿åˆã‚ã›</li><li><strong>æŒ¯ã‚‹èˆã„ã«é–¢ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆBehavioral Patternsï¼‰</strong> - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ç›¸äº’ä½œç”¨</li></ol><p>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å±ã—ã€é›¢æ•£çš„ãªçŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã®ã‚„ã‚Šã¨ã‚Šã‚’é€šã˜ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã©ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ã‹ã‚’ç®¡ç†ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å®Ÿè¡Œæ™‚ã«å‹•çš„ãªæŒ¯ã‚‹èˆã„ã®å¤‰æ›´ãŒå¯èƒ½ã«ãªã‚‹ã€‚</p><p><strong>ä»®å®šï¼š</strong>
æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸»ãªç›®çš„ã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚„è²¬å‹™ã®åˆ†é›¢ã¨ã‚«ãƒ—ã‚»ãƒ«åŒ–ã§ã‚ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Design Patterns - Wikipedia: <a class=link href=https://en.wikipedia.org/wiki/Design_Patterns target=_blank rel=noopener>https://en.wikipedia.org/wiki/Design_Patterns</a></li><li>GeeksforGeeks - Gang of Four (GOF) Design Patterns: <a class=link href=https://www.geeksforgeeks.org/system-design/gang-of-four-gof-design-patterns/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/gang-of-four-gof-design-patterns/</a></li><li>DigitalOcean - Gang of 4 Design Patterns: <a class=link href=https://www.digitalocean.com/community/tutorials/gangs-of-four-gof-design-patterns target=_blank rel=noopener>https://www.digitalocean.com/community/tutorials/gangs-of-four-gof-design-patterns</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=13-æ­´å²çš„èƒŒæ™¯ã¨ç™»å ´æ™‚æœŸ>1.3 æ­´å²çš„èƒŒæ™¯ã¨ç™»å ´æ™‚æœŸ</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€1994å¹´ã«å‡ºç‰ˆã•ã‚ŒãŸGang of Fourã®è‘—æ›¸ã€ŒDesign Patterns: Elements of Reusable Object-Oriented Softwareã€ã§åˆã‚ã¦ä½“ç³»çš„ã«æ–‡æ›¸åŒ–ã•ã‚ŒãŸã€‚</p><p><strong>æ ¹æ‹ ï¼š</strong>
Gang of Fourï¼ˆErich Gammaã€Richard Helmã€Ralph Johnsonã€John Vlissidesï¼‰ã«ã‚ˆã‚‹ã€ŒDesign Patternsã€ã¯ã€1994å¹´10æœˆ21æ—¥ã«å‡ºç‰ˆã•ã‚Œã€1994å¹´ã®OOPSLAä¼šè­°ã§åˆã‚ã¦ä¸€èˆ¬å…¬é–‹ã•ã‚ŒãŸã€‚ã“ã®æ›¸ç±ã¯23ã®å¤å…¸çš„ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç´¹ä»‹ã—ã€ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨­è¨ˆã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã™ã‚‹æ–¹æ³•ã«æ·±ã„å½±éŸ¿ã‚’ä¸ãˆãŸã€‚</p><p>æ›¸ç±ã®èµ·æºã¯ã€1990å¹´ã®OOPSLAä¼šè­°ã§ã®ã€ŒTowards an Architecture Handbookã€ã¨ã„ã†Birds-of-a-Featherï¼ˆBoFï¼‰ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã¾ã§é¡ã‚‹ã€‚ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã€Erich Gammaã¨Richard HelmãŒå…±é€šã®é–¢å¿ƒäº‹ã«ã¤ã„ã¦è­°è«–ã‚’äº¤ã‚ã—ãŸã€‚</p><p><strong>ä»®å®šï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³è‡ªä½“ã®æ¦‚å¿µã¯ã€GoFã®æ›¸ç±ä»¥å‰ã‹ã‚‰å­˜åœ¨ã—ã¦ã„ãŸå¯èƒ½æ€§ãŒã‚ã‚‹ãŒã€ä½“ç³»çš„ãªæ–‡æ›¸åŒ–ã¨æ™®åŠã¯1994å¹´ã®å‡ºç‰ˆä»¥é™ã§ã‚ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Design Patterns - Wikipedia: <a class=link href=https://en.wikipedia.org/wiki/Design_Patterns target=_blank rel=noopener>https://en.wikipedia.org/wiki/Design_Patterns</a></li><li>Amazon - Design Patterns: Elements of Reusable Object-Oriented Software: <a class=link href=https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8 target=_blank rel=noopener>https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8</a></li><li>ISBN: 0-201-63361-2ï¼ˆãƒãƒ¼ãƒ‰ã‚«ãƒãƒ¼ç‰ˆï¼‰ã€978-0-201-63361-0ï¼ˆISBN-13ï¼‰</li><li>ASIN: B000SEIBB8ï¼ˆKindleç‰ˆï¼‰</li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h2 id=2-ç”¨é€”ã¨é©ç”¨ã‚·ãƒ¼ãƒ³>2. ç”¨é€”ã¨é©ç”¨ã‚·ãƒ¼ãƒ³</h2><h3 id=21-è§£æ±ºã™ã‚‹å•é¡Œ>2.1 è§£æ±ºã™ã‚‹å•é¡Œ</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®çŠ¶æ…‹ã«åŸºã¥ãè¤‡é›‘ãªæ¡ä»¶åˆ†å²ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆif-elseæ–‡ã‚„switchæ–‡ã®ç¾…åˆ—ï¼‰ã‚’æ’é™¤ã—ã€ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã€‚</p><p><strong>æ ¹æ‹ ï¼š</strong>
çŠ¶æ…‹ã«ä¾å­˜ã™ã‚‹è¤‡é›‘ãªæ¡ä»¶åˆ†å²ã¯ã€ä»¥ä¸‹ã®å•é¡Œã‚’å¼•ãèµ·ã“ã™ï¼š</p><ol><li><strong>å¯èª­æ€§ã®ä½ä¸‹</strong> - å·¨å¤§ãªif-elseã‚„switchæ–‡ã¯ç†è§£ãŒå›°é›£</li><li><strong>ä¿å®ˆæ€§ã®æ‚ªåŒ–</strong> - æ–°ã—ã„çŠ¶æ…‹ã®è¿½åŠ æ™‚ã«æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å¤šãã®ç®‡æ‰€ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li><li><strong>å˜ä¸€è²¬ä»»åŸå‰‡ã®é•å</strong> - ä¸€ã¤ã®ã‚¯ãƒ©ã‚¹ãŒè¤‡æ•°ã®çŠ¶æ…‹ã«é–¢ã™ã‚‹æŒ¯ã‚‹èˆã„ã‚’æŒã¤</li><li><strong>ãƒ†ã‚¹ãƒˆã®å›°é›£ã•</strong> - å…¨ã¦ã®çŠ¶æ…‹ã¨é·ç§»ã®ãƒ†ã‚¹ãƒˆãŒè¤‡é›‘</li></ol><p>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€çŠ¶æ…‹å›ºæœ‰ã®æŒ¯ã‚‹èˆã„ã‚’åˆ¥ã€…ã®ã‚¯ãƒ©ã‚¹ã«å¤–éƒ¨åŒ–ã™ã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã€‚å„çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã¯è‡ªèº«ã®æŒ¯ã‚‹èˆã„ã®ã¿ã‚’æ‹…å½“ã—ã€å˜ä¸€è²¬ä»»åŸå‰‡ã‚’éµå®ˆã™ã‚‹ã€‚</p><p><strong>ä»®å®šï¼š</strong></p><ul><li>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯3ã¤ä»¥ä¸Šã®æ˜ç¢ºãªçŠ¶æ…‹ãŒå­˜åœ¨ã™ã‚‹</li><li>å„çŠ¶æ…‹ã§åŒã˜æ“ä½œã«å¯¾ã—ã¦ç•°ãªã‚‹æŒ¯ã‚‹èˆã„ãŒå¿…è¦</li><li>çŠ¶æ…‹é·ç§»ãŒé »ç¹ã«ç™ºç”Ÿã™ã‚‹ã€ã¾ãŸã¯å°†æ¥çš„ã«æ–°ã—ã„çŠ¶æ…‹ãŒè¿½åŠ ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li></ul><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Refactoring Guru - State Pattern: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li><li>System Overflow - State Pattern Trade-offs: <a class=link href=https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use target=_blank rel=noopener>https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use</a></li><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=22-å®Ÿå‹™ã§ã®å…¸å‹çš„ãªåˆ©ç”¨ã‚·ãƒ¼ãƒ³>2.2 å®Ÿå‹™ã§ã®å…¸å‹çš„ãªåˆ©ç”¨ã‚·ãƒ¼ãƒ³</h3><h4 id=221-ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ >2.2.1 ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ </h4><p><strong>è¦ç‚¹ï¼š</strong>
æ–‡æ›¸æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãªã©ã€æ˜ç¢ºãªçŠ¶æ…‹é·ç§»ã‚’æŒã¤ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã«é©ç”¨ã§ãã‚‹ã€‚</p><p><strong>å®Ÿè£…ä¾‹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>Workflow</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>process</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>process</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>WorkflowState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;process&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>DraftState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;WorkflowState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>process</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$workflow</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Processing as Draft.\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>ReviewState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;WorkflowState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>process</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$workflow</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Processing as Review.\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>ApprovedState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;WorkflowState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>process</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$workflow</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Processing as Approved.\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># æ‰¿èªå¾Œã®å‡¦ç†</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$workflow</span> <span class=o>=</span> <span class=nn>Workflow</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>state</span> <span class=o>=&gt;</span> <span class=nn>DraftState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$workflow</span><span class=o>-&gt;</span><span class=n>process</span><span class=p>;</span>  <span class=c1># &#34;Processing as Draft.&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$workflow</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>ReviewState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$workflow</span><span class=o>-&gt;</span><span class=n>process</span><span class=p>;</span>  <span class=c1># &#34;Processing as Review.&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¹æ‹ ï¼š</strong>
ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€æ–‡æ›¸ã‚„ã‚¿ã‚¹ã‚¯ãŒã€Œä¸‹æ›¸ãã€ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€ã€Œæ‰¿èªæ¸ˆã¿ã€ã€Œå´ä¸‹ã€ãªã©ã®æ˜ç¢ºãªçŠ¶æ…‹ã‚’æŒã¤ã€‚å„çŠ¶æ…‹ã§å¯èƒ½ãªæ“ä½œã‚„æ¬¡ã®çŠ¶æ…‹ã¸ã®é·ç§»ãƒ«ãƒ¼ãƒ«ãŒç•°ãªã‚‹ãŸã‚ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåŠ¹æœçš„ã§ã‚ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Cloudaffle - Use Cases For The State Design Pattern: <a class=link href=https://cloudaffle.com/series/behavioral-design-patterns/state-application/ target=_blank rel=noopener>https://cloudaffle.com/series/behavioral-design-patterns/state-application/</a></li><li>Moments Log - Managing System State Transitions: <a class=link href=https://www.momentslog.com/development/design-pattern/managing-system-state-transitions-with-the-state-pattern target=_blank rel=noopener>https://www.momentslog.com/development/design-pattern/managing-system-state-transitions-with-the-state-pattern</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h4 id=222-ã‚²ãƒ¼ãƒ é–‹ç™º>2.2.2 ã‚²ãƒ¼ãƒ é–‹ç™º</h4><p><strong>è¦ç‚¹ï¼š</strong>
ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®çŠ¶æ…‹ç®¡ç†ï¼ˆå¾…æ©Ÿã€èµ°è¡Œã€ã‚¸ãƒ£ãƒ³ãƒ—ã€æ”»æ’ƒãªã©ï¼‰ã«ãŠã„ã¦ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFSMï¼‰ã¨ã—ã¦åºƒãä½¿ç”¨ã•ã‚Œã‚‹ã€‚</p><p><strong>å®Ÿè£…ä¾‹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>Character</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle_input</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$input</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>handle_input</span><span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$input</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>CharacterState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;handle_input&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>IdleState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;CharacterState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle_input</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$character</span><span class=p>,</span> <span class=nv>$input</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$input</span> <span class=ow>eq</span> <span class=s>&#39;RUN&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Transitioning to Running\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$character</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>RunningState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>elsif</span> <span class=p>(</span><span class=nv>$input</span> <span class=ow>eq</span> <span class=s>&#39;JUMP&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Transitioning to Jumping\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$character</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>JumpingState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>RunningState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;CharacterState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle_input</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$character</span><span class=p>,</span> <span class=nv>$input</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$input</span> <span class=ow>eq</span> <span class=s>&#39;STOP&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Transitioning to Idle\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$character</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>IdleState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>elsif</span> <span class=p>(</span><span class=nv>$input</span> <span class=ow>eq</span> <span class=s>&#39;JUMP&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Transitioning to Jumping\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$character</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>JumpingState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>JumpingState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;CharacterState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle_input</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$character</span><span class=p>,</span> <span class=nv>$input</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># ã‚¸ãƒ£ãƒ³ãƒ—ä¸­ã¯å…¥åŠ›ã‚’åˆ¶é™</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Cannot change state while jumping\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$player</span> <span class=o>=</span> <span class=nn>Character</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>state</span> <span class=o>=&gt;</span> <span class=nn>IdleState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$player</span><span class=o>-&gt;</span><span class=n>handle_input</span><span class=p>(</span><span class=s>&#39;JUMP&#39;</span><span class=p>);</span>  <span class=c1># &#34;Transitioning to Jumping&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¹æ‹ ï¼š</strong>
ã‚²ãƒ¼ãƒ é–‹ç™ºã§ã¯ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚„ã‚²ãƒ¼ãƒ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¤‡æ•°ã®çŠ¶æ…‹ã‚’æŒã¡ã€å„çŠ¶æ…‹ã§å…¥åŠ›ã«å¯¾ã™ã‚‹å¿œç­”ãŒç•°ãªã‚‹ã€‚Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å·¨å¤§ãªswitchæ–‡ã‚’é¿ã‘ã€å„çŠ¶æ…‹ã®æŒ¯ã‚‹èˆã„ã‚’æ˜ç¢ºã«åˆ†é›¢ã§ãã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Game Programming Patterns - State: <a class=link href=https://gameprogrammingpatterns.com/state.html target=_blank rel=noopener>https://gameprogrammingpatterns.com/state.html</a></li><li>DEV Community - Programming Patterns for Games: State: <a class=link href=https://dev.to/zigzagoon1/programming-patterns-for-games-state-2eop target=_blank rel=noopener>https://dev.to/zigzagoon1/programming-patterns-for-games-state-2eop</a></li><li>Moments Log - Using State Pattern for Game States: <a class=link href=https://www.momentslog.com/development/design-pattern/using-the-state-pattern-for-managing-game-states-in-interactive-applications target=_blank rel=noopener>https://www.momentslog.com/development/design-pattern/using-the-state-pattern-for-managing-game-states-in-interactive-applications</a></li><li>Neutronio Games - State Machine Pattern for Game Developers: <a class=link href=https://neutronio.games/gamedev/design-patterns-state-machine-pattern-for-game-developers/ target=_blank rel=noopener>https://neutronio.games/gamedev/design-patterns-state-machine-pattern-for-game-developers/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h4 id=223-ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡>2.2.3 ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡</h4><p><strong>è¦ç‚¹ï¼š</strong>
ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹ã‚„ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡ã«ãŠã„ã¦ã€ã‚ªãƒ³/ã‚ªãƒ•/ã‚¹ã‚¿ãƒ³ãƒã‚¤ãªã©ã®çŠ¶æ…‹ç®¡ç†ã«é©ç”¨ã§ãã‚‹ã€‚</p><p><strong>å®Ÿè£…ä¾‹ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>Device</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>press_button</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>press_button</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>DeviceState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;press_button&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>OnState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;DeviceState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>press_button</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$device</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Turning Off\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$device</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>OffState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>OffState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;DeviceState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>press_button</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$device</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Turning On\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$device</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>OnState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>StandbyState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;DeviceState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>press_button</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$device</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Waking from Standby\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$device</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>OnState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$smart_device</span> <span class=o>=</span> <span class=nn>Device</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>state</span> <span class=o>=&gt;</span> <span class=nn>OffState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$smart_device</span><span class=o>-&gt;</span><span class=n>press_button</span><span class=p>;</span>  <span class=c1># &#34;Turning On&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$smart_device</span><span class=o>-&gt;</span><span class=n>press_button</span><span class=p>;</span>  <span class=c1># &#34;Turning Off&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¹æ‹ ï¼š</strong>
çµ„ã¿è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ ã‚„IoTãƒ‡ãƒã‚¤ã‚¹ã§ã¯ã€é›»æºçŠ¶æ…‹ã‚„ãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚¨ã‚³ãƒ¢ãƒ¼ãƒ‰ã€é«˜æ€§èƒ½ãƒ¢ãƒ¼ãƒ‰ãªã©ï¼‰ã®ç®¡ç†ãŒé‡è¦ã§ã‚ã‚‹ã€‚Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚Šã€çŠ¶æ…‹é·ç§»ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ˜ç¢ºã«ã—ã€å„çŠ¶æ…‹ã§ã®æŒ¯ã‚‹èˆã„ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã§ãã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li><li>Cloudaffle - Use Cases For The State Design Pattern: <a class=link href=https://cloudaffle.com/series/behavioral-design-patterns/state-application/ target=_blank rel=noopener>https://cloudaffle.com/series/behavioral-design-patterns/state-application/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=23-ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„è¨€èªã§ã®å®Ÿè£…ä¾‹>2.3 ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„è¨€èªã§ã®å®Ÿè£…ä¾‹</h3><p><strong>è¦ç‚¹ï¼š</strong>
å¤šãã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚„è¨€èªã§ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ãŸã¯ãã®æ¦‚å¿µãŒæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã€‚</p><p><strong>å…·ä½“ä¾‹ï¼š</strong></p><ol><li><p><strong>Reactï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰</strong></p><ul><li>Reactã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã‚„<code>useState</code>ãƒ•ãƒƒã‚¯ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çŠ¶æ…‹ç®¡ç†ã«ä½¿ç”¨ã•ã‚Œã‚‹</li><li>çŠ¶æ…‹ã«å¿œã˜ã¦ç•°ãªã‚‹UIã‚’æç”»ã™ã‚‹</li></ul></li><li><p><strong>Spring Frameworkï¼ˆJavaï¼‰</strong></p><ul><li>Spring State Machineã¯ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…ã‚’æä¾›</li><li>è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚„ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®ç®¡ç†ã«ä½¿ç”¨ã•ã‚Œã‚‹</li></ul></li><li><p><strong>çµ„ã¿è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ </strong></p><ul><li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ OSã§ã¯ã€ã‚¿ã‚¹ã‚¯ã®çŠ¶æ…‹é·ç§»ï¼ˆReadyã€Runningã€Blockedï¼‰ã‚’ç®¡ç†</li><li>ãƒ‡ãƒã‚¤ã‚¹ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®çŠ¶æ…‹ç®¡ç†</li></ul></li><li><p><strong>Perl</strong></p><ul><li>CPANãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« <code>FSA::Rules</code> ã¯ã€ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹æ©Ÿæ¢°ã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹</li><li>Moo/Mooseã‚’ä½¿ç”¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªå®Ÿè£…ãŒå¯èƒ½</li></ul></li></ol><p><strong>æ ¹æ‹ ï¼š</strong>
å¤šãã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ã€å†…éƒ¨çš„ã«çŠ¶æ…‹ç®¡ç†ã®ä»•çµ„ã¿ã‚’æŒã£ã¦ãŠã‚Šã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŸå‰‡ã‚’é©ç”¨ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¤‡é›‘ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’æ•´ç†ã—ã€ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã¦ã„ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>MetaCPAN - FSA::Rules: <a class=link href=https://metacpan.org/pod/FSA::Rules target=_blank rel=noopener>https://metacpan.org/pod/FSA::Rules</a></li><li>Refactoring Guru - State Pattern: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> ä¸­</p><h2 id=3-å®Ÿè£…ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰>3. å®Ÿè£…ä¾‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰</h2><h3 id=31-åŸºæœ¬çš„ãªå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³perl>3.1 åŸºæœ¬çš„ãªå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPerlï¼‰</h3><h4 id=311-ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…>3.1.1 ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…</h4><p><strong>è¦ç‚¹ï¼š</strong>
å°è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã«ã¯ã€ãƒãƒƒã‚·ãƒ¥ã¨ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ä½¿ç”¨ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ãŒåŠ¹æœçš„ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>strict</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>warnings</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># çŠ¶æ…‹ã‚’ã‚µãƒ–ãƒ«ãƒ¼ãƒãƒ³ã¨ã—ã¦å®šç¾©</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>%states</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>GREEN</span>  <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Traffic flows (Green light)\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#39;YELLOW&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>YELLOW</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Prepare to stop (Yellow light)\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#39;RED&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>RED</span>    <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Traffic halted (Red light)\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#39;GREEN&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># GREENã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$current</span> <span class=o>=</span> <span class=s>&#39;GREEN&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>6</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$current</span> <span class=o>=</span> <span class=nv>$states</span><span class=p>{</span><span class=nv>$current</span><span class=p>}</span><span class=o>-&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‡ºåŠ›:</span>
</span></span><span class=line><span class=cl><span class=c1># Traffic flows (Green light)</span>
</span></span><span class=line><span class=cl><span class=c1># Prepare to stop (Yellow light)</span>
</span></span><span class=line><span class=cl><span class=c1># Traffic halted (Red light)</span>
</span></span><span class=line><span class=cl><span class=c1># Traffic flows (Green light)</span>
</span></span><span class=line><span class=cl><span class=c1># Prepare to stop (Yellow light)</span>
</span></span><span class=line><span class=cl><span class=c1># Traffic halted (Red light)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¹æ‹ ï¼š</strong>
ã“ã®å®Ÿè£…ã¯ã€çŠ¶æ…‹ã¨é·ç§»ã‚’ãƒãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã¨ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§è¡¨ç¾ã™ã‚‹ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã§ç†è§£ã—ã‚„ã™ã„ãŒã€å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯å‘ã‹ãªã„ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>JavaDeploy - Perl State-Machine Model: <a class=link href=https://www.javadeploy.com/advanced-perl/module4/perl-stateMachine-example.jsp target=_blank rel=noopener>https://www.javadeploy.com/advanced-perl/module4/perl-stateMachine-example.jsp</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h4 id=312-ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªå®Ÿè£…mooä½¿ç”¨>3.1.2 ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªå®Ÿè£…ï¼ˆMooä½¿ç”¨ï¼‰</h4><p><strong>è¦ç‚¹ï¼š</strong>
GoFã®è¨­è¨ˆã«å¿ å®Ÿãªã€ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…ä¾‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>TrafficLightContext</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>request</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>handle</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>TrafficState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;handle&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>TrafficGreen</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TrafficState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$context</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Green: Cars go\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$context</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>TrafficYellow</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>TrafficYellow</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TrafficState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$context</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Yellow: Slow down\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$context</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>TrafficRed</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>TrafficRed</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TrafficState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>handle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$context</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Red: Stop!\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$context</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>TrafficGreen</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>main</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$light</span> <span class=o>=</span> <span class=nn>TrafficLightContext</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>state</span> <span class=o>=&gt;</span> <span class=nn>TrafficGreen</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>6</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$light</span><span class=o>-&gt;</span><span class=n>request</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‡ºåŠ›:</span>
</span></span><span class=line><span class=cl><span class=c1># Green: Cars go</span>
</span></span><span class=line><span class=cl><span class=c1># Yellow: Slow down</span>
</span></span><span class=line><span class=cl><span class=c1># Red: Stop!</span>
</span></span><span class=line><span class=cl><span class=c1># Green: Cars go</span>
</span></span><span class=line><span class=cl><span class=c1># Yellow: Slow down</span>
</span></span><span class=line><span class=cl><span class=c1># Red: Stop!</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ ¹æ‹ ï¼š</strong>
ã“ã®å®Ÿè£…ã¯ã€å„çŠ¶æ…‹ã‚’ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®šç¾©ã—ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒç¾åœ¨ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æŒ¯ã‚‹èˆã„ã‚’å§”è­²ã™ã‚‹ã€‚GoFã®Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¤å…¸çš„ãªå®Ÿè£…ã«è¿‘ã„ã€‚</p><p>Moo::Roleã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã™ã¹ã¦ã®çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ãŒ<code>handle</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’å¼·åˆ¶ã§ãã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>GitHub - Perl-OOO-Gang-of-4-Design: <a class=link href=https://github.com/dgrunwal/Perl-OOO-Gang-of-4-Design target=_blank rel=noopener>https://github.com/dgrunwal/Perl-OOO-Gang-of-4-Design</a></li><li>Refactoring Guru - State Pattern: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=32-çŠ¶æ…‹é·ç§»å›³ã¨umlã‚¯ãƒ©ã‚¹å›³>3.2 çŠ¶æ…‹é·ç§»å›³ã¨UMLã‚¯ãƒ©ã‚¹å›³</h3><h4 id=321-çŠ¶æ…‹é·ç§»å›³ä¿¡å·æ©Ÿã®ä¾‹>3.2.1 çŠ¶æ…‹é·ç§»å›³ï¼ˆä¿¡å·æ©Ÿã®ä¾‹ï¼‰</h4><pre class=mermaid>
	stateDiagram-v2
    [*] --&gt; Green
    Green --&gt; Yellow: ã‚¿ã‚¤ãƒãƒ¼æº€äº†
    Yellow --&gt; Red: ã‚¿ã‚¤ãƒãƒ¼æº€äº†
    Red --&gt; Green: ã‚¿ã‚¤ãƒãƒ¼æº€äº†
    Green --&gt; [*]: ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
    Yellow --&gt; [*]: ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
    Red --&gt; [*]: ã‚·ã‚¹ãƒ†ãƒ åœæ­¢
</pre><h4 id=322-umlã‚¯ãƒ©ã‚¹å›³>3.2.2 UMLã‚¯ãƒ©ã‚¹å›³</h4><pre class=mermaid>
	classDiagram
    class Context {
        -state: State
        +request()
        +setState(state: State)
    }
    
    class State {
        &lt;&lt;interface&gt;&gt;
        +handle(context: Context)
    }
    
    class ConcreteStateA {
        +handle(context: Context)
    }
    
    class ConcreteStateB {
        +handle(context: Context)
    }
    
    class ConcreteStateC {
        +handle(context: Context)
    }
    
    Context --&gt; State
    State &lt;|.. ConcreteStateA
    State &lt;|.. ConcreteStateB
    State &lt;|.. ConcreteStateC
    
    note for Context &#34;ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ç¾åœ¨ã®çŠ¶æ…‹\nã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚ç…§ã‚’ä¿æŒã—ã€\næŒ¯ã‚‹èˆã„ã‚’å§”è­²ã™ã‚‹&#34;
    note for State &#34;çŠ¶æ…‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯\nå…¨ã¦ã®å…·è±¡çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ãŒ\nå®Ÿè£…ã™ã¹ããƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©&#34;
</pre><p><strong>è¦ç‚¹ï¼š</strong></p><ul><li><strong>Contextï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰</strong>: ç¾åœ¨ã®çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚ç…§ã‚’ä¿æŒã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å§”è­²ã™ã‚‹</li><li><strong>Stateï¼ˆçŠ¶æ…‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰</strong>: ã™ã¹ã¦ã®å…·è±¡çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ãŒå®Ÿè£…ã™ã¹ããƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©</li><li><strong>ConcreteStateï¼ˆå…·è±¡çŠ¶æ…‹ï¼‰</strong>: ç‰¹å®šã®çŠ¶æ…‹ã«ãŠã‘ã‚‹æŒ¯ã‚‹èˆã„ã‚’å®Ÿè£…ã—ã€æ¬¡ã®çŠ¶æ…‹ã¸ã®é·ç§»ã‚’ç®¡ç†</li></ul><p><strong>æ ¹æ‹ ï¼š</strong>
GoFã®Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã“ã®æ§‹é€ ã‚’åŸºæœ¬ã¨ã—ã¦ã„ã‚‹ã€‚çŠ¶æ…‹é·ç§»ã¯ã€çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªèº«ãŒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã•ã‚Œã‚‹ã€‚</p><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=33-å®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ä¾‹>3.3 å®Ÿè·µçš„ãªã‚³ãƒ¼ãƒ‰ä¾‹</h3><h4 id=ä¾‹1-è‡ªå‹•è²©å£²æ©Ÿ>ä¾‹1: è‡ªå‹•è²©å£²æ©Ÿ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>VendingMachine</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span> <span class=nn>NoCoinState</span><span class=o>-&gt;</span><span class=k>new</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;inventory&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span> <span class=mi>10</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>insert_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>insert_coin</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>eject_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>eject_coin</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>dispense</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>dispense</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>VendingMachineState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=sx>qw(insert_coin eject_coin dispense)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>NoCoinState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;VendingMachineState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>insert_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Coin inserted\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>HasCoinState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>eject_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;No coin to eject\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>dispense</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Insert coin first\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>HasCoinState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;VendingMachineState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>insert_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Coin already inserted\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>eject_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Coin ejected\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>NoCoinState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>dispense</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>inventory</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Dispensing product\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>inventory</span><span class=p>(</span><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>inventory</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>NoCoinState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>print</span> <span class=s>&#34;Out of stock\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>SoldOutState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>SoldOutState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;VendingMachineState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>insert_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Machine is sold out. Returning coin\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>eject_coin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;No coin to eject\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>dispense</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$machine</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Machine is sold out\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>main</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$machine</span> <span class=o>=</span> <span class=nn>VendingMachine</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>insert_coin</span><span class=p>;</span>    <span class=c1># &#34;Coin inserted&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>dispense</span><span class=p>;</span>       <span class=c1># &#34;Dispensing product&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>dispense</span><span class=p>;</span>       <span class=c1># &#34;Insert coin first&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>insert_coin</span><span class=p>;</span>    <span class=c1># &#34;Coin inserted&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$machine</span><span class=o>-&gt;</span><span class=n>eject_coin</span><span class=p>;</span>     <span class=c1># &#34;Coin ejected&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è¦ç‚¹ï¼š</strong>
è‡ªå‹•è²©å£²æ©Ÿã¯ã€ã€Œã‚³ã‚¤ãƒ³ãªã—ã€ã€Œã‚³ã‚¤ãƒ³ã‚ã‚Šã€ã€Œå£²ã‚Šåˆ‡ã‚Œã€ãªã©ã®æ˜ç¢ºãªçŠ¶æ…‹ã‚’æŒã¡ã€å„çŠ¶æ…‹ã§æ“ä½œã«å¯¾ã™ã‚‹å¿œç­”ãŒç•°ãªã‚‹ã€‚Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚Šã€çŠ¶æ…‹ã”ã¨ã®æŒ¯ã‚‹èˆã„ã‚’æ˜ç¢ºã«åˆ†é›¢ã§ãã‚‹ã€‚</p><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h4 id=ä¾‹2-tcpã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³>ä¾‹2: TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>TCPConnection</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span> <span class=nn>ClosedState</span><span class=o>-&gt;</span><span class=k>new</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>open</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=nb>open</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>close</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=nb>close</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>acknowledge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>acknowledge</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>TCPState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo::Role</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=sx>qw(open close acknowledge)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>ClosedState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TCPState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>open</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Opening connection\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$connection</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>ListenState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>close</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Connection already closed\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>acknowledge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Cannot acknowledge - connection closed\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>ListenState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TCPState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>open</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Connection already open\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>close</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Closing connection\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$connection</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>ClosedState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>acknowledge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Acknowledging - connection established\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$connection</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>EstablishedState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>EstablishedState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>with</span> <span class=s>&#39;TCPState&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>open</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Connection already established\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>close</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Terminating established connection\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$connection</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>ClosedState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>acknowledge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$connection</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Data transmission in progress\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>main</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$tcp</span> <span class=o>=</span> <span class=nn>TCPConnection</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$tcp</span><span class=o>-&gt;</span><span class=nb>open</span><span class=p>;</span>           <span class=c1># &#34;Opening connection&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$tcp</span><span class=o>-&gt;</span><span class=n>acknowledge</span><span class=p>;</span>    <span class=c1># &#34;Acknowledging - connection established&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>$tcp</span><span class=o>-&gt;</span><span class=nb>close</span><span class=p>;</span>          <span class=c1># &#34;Terminating established connection&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>è¦ç‚¹ï¼š</strong>
TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ã€Œã‚¯ãƒ­ãƒ¼ã‚ºã€ã€Œãƒªã‚¹ãƒ³ã€ã€Œç¢ºç«‹ã€ãªã©ã®çŠ¶æ…‹ã‚’æŒã¡ã€å„çŠ¶æ…‹ã§è¨±å¯ã•ã‚Œã‚‹æ“ä½œãŒç•°ãªã‚‹ã€‚GoFã®æ›¸ç±ã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã‚‹å¤å…¸çš„ãªä¾‹ã€‚</p><p><strong>æ ¹æ‹ ï¼š</strong>
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯ã€çŠ¶æ…‹é·ç§»ã®æ˜ç¢ºãªä¾‹ã§ã‚ã‚‹ã€‚RFCä»•æ§˜ã«ã‚‚çŠ¶æ…‹é·ç§»å›³ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨ã«é©ã—ã¦ã„ã‚‹ã€‚</p><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h2 id=4-åˆ©ç‚¹ã¨æ¬ ç‚¹>4. åˆ©ç‚¹ã¨æ¬ ç‚¹</h2><h3 id=41-ãƒ¡ãƒªãƒƒãƒˆ>4.1 ãƒ¡ãƒªãƒƒãƒˆ</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸»ãªãƒ¡ãƒªãƒƒãƒˆã¯ã€ä¿å®ˆæ€§ã€æ‹¡å¼µæ€§ã€å¯èª­æ€§ã®å‘ä¸Šã§ã‚ã‚‹ã€‚</p><p><strong>è©³ç´°ï¼š</strong></p><ol><li><p><strong>å˜ä¸€è²¬ä»»åŸå‰‡ï¼ˆSRPï¼‰ã®éµå®ˆ</strong></p><ul><li>å„çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã¯è‡ªèº«ã®æŒ¯ã‚‹èˆã„ã®ã¿ã‚’æ‹…å½“</li><li>ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ãŒå‘ä¸Š</li><li>ãƒã‚°ã®å±€æ‰€åŒ–ãŒå®¹æ˜“</li></ul></li><li><p><strong>é–‹æ”¾/é–‰é–åŸå‰‡ï¼ˆOCPï¼‰ã®éµå®ˆ</strong></p><ul><li>æ–°ã—ã„çŠ¶æ…‹ã®è¿½åŠ ãŒæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ãªã—ã§å¯èƒ½</li><li>æ‹¡å¼µæ€§ã®å‘ä¸Š</li><li>ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒªã‚¹ã‚¯ã®ä½æ¸›</li></ul></li><li><p><strong>æ¡ä»¶åˆ†å²ã®å‰Šæ¸›</strong></p><ul><li>å·¨å¤§ãªif-elseã‚„switchæ–‡ã‚’æ’é™¤</li><li>ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§å‘ä¸Š</li><li>ãƒ­ã‚¸ãƒƒã‚¯ã®ç†è§£ãŒå®¹æ˜“</li></ul></li><li><p><strong>æ˜ç¤ºçš„ãªçŠ¶æ…‹é·ç§»</strong></p><ul><li>çŠ¶æ…‹é·ç§»ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ã®å¤‰æ›´ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã‚‹</li><li>ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“</li><li>çŠ¶æ…‹é·ç§»å›³ã¨ã®å¯¾å¿œãŒæ˜ç¢º</li></ul></li><li><p><strong>æŸ”è»Ÿæ€§ã®å‘ä¸Š</strong></p><ul><li>å®Ÿè¡Œæ™‚ã«æŒ¯ã‚‹èˆã„ã‚’å‹•çš„ã«å¤‰æ›´å¯èƒ½</li><li>ãƒ†ã‚¹ãƒˆã®å®¹æ˜“æ€§</li><li>ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½¿ç”¨ãŒç°¡å˜</li></ul></li></ol><p><strong>æ ¹æ‹ ï¼š</strong>
è¤‡æ•°ã®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºãŒã€ã“ã‚Œã‚‰ã®ãƒ¡ãƒªãƒƒãƒˆã‚’ä¸€è²«ã—ã¦æŒ‡æ‘˜ã—ã¦ã„ã‚‹ã€‚ç‰¹ã«ã€SOLIDåŸå‰‡ã¨ã®æ•´åˆæ€§ãŒé«˜ãè©•ä¾¡ã•ã‚Œã¦ã„ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Refactoring Guru - State Pattern: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li><li>System Overflow - State Pattern Trade-offs: <a class=link href=https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use target=_blank rel=noopener>https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use</a></li><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li><li>Vincent Wong - State Pattern: <a class=link href=https://vwong.dev/notes/COMP2511/behavioural_patterns/state_pattern.html target=_blank rel=noopener>https://vwong.dev/notes/COMP2511/behavioural_patterns/state_pattern.html</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=42-ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ>4.2 ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸»ãªãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¯ã€ã‚¯ãƒ©ã‚¹æ•°ã®å¢—åŠ ã¨ã€å ´åˆã«ã‚ˆã£ã¦ã¯éå‰°ãªè¤‡é›‘æ€§ã®å°å…¥ã§ã‚ã‚‹ã€‚</p><p><strong>è©³ç´°ï¼š</strong></p><ol><li><p><strong>ã‚¯ãƒ©ã‚¹æ•°ã®å¢—åŠ </strong></p><ul><li>å„çŠ¶æ…‹ãŒåˆ¥ã€…ã®ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã‚‹</li><li>ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã®å¢—åŠ </li><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®è¤‡é›‘åŒ–</li><li>å°è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯éå‰°</li></ul></li><li><p><strong>é–“æ¥æ€§ã¨è¤‡é›‘æ€§</strong></p><ul><li>å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã®ç†è§£ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨è¤‡æ•°ã®çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã‚’è¿½è·¡ã™ã‚‹å¿…è¦</li><li>åˆè¦‹ã®é–‹ç™ºè€…ã«ã¯ç†è§£ãŒå›°é›£ãªå ´åˆãŒã‚ã‚‹</li><li>ãƒ‡ãƒãƒƒã‚°æ™‚ã«ã‚¸ãƒ£ãƒ³ãƒ—ãŒå¤šã„</li></ul></li><li><p><strong>ã‚·ãƒ³ãƒ—ãƒ«ãªã‚±ãƒ¼ã‚¹ã§ã®ã‚ªãƒ¼ãƒãƒ¼ã‚­ãƒ«</strong></p><ul><li>2ã¤ã®çŠ¶æ…‹ã®ã¿ã®å ´åˆã€booleanå¤‰æ•°ã§ååˆ†</li><li>çŠ¶æ…‹é–“ã®æŒ¯ã‚‹èˆã„ã®é•ã„ãŒå°ã•ã„å ´åˆã¯ä¸è¦</li><li>é–‹ç™ºæ™‚é–“ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã®å¢—åŠ </li></ul></li><li><p><strong>å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã®è¤‡é›‘æ€§</strong></p><ul><li>çŠ¶æ…‹é–“ã§è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®APIãŒè‚¥å¤§åŒ–</li><li>çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒè¤‡é›‘ã«ãªã‚‹å¯èƒ½æ€§</li></ul></li><li><p><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿</strong></p><ul><li>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã¨ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰</li><li>ãƒªã‚½ãƒ¼ã‚¹ãŒå³ã—ã„ç’°å¢ƒã§ã¯è€ƒæ…®ãŒå¿…è¦</li><li>ãŸã ã—ã€å¤šãã®å ´åˆã€å•é¡Œã«ãªã‚‰ãªã„</li></ul></li></ol><p><strong>æ ¹æ‹ ï¼š</strong>
è¤‡æ•°ã®æƒ…å ±æºãŒã€ç‰¹ã«çŠ¶æ…‹æ•°ãŒå°‘ãªã„å ´åˆã‚„æŒ¯ã‚‹èˆã„ã®é•ã„ãŒå°ã•ã„å ´åˆã«ã¯ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ãŒéå‰°ã«ãªã‚‹å¯èƒ½æ€§ã‚’æŒ‡æ‘˜ã—ã¦ã„ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>O&rsquo;Reilly - Advantages/disadvantages of State pattern: <a class=link href=https://learning.oreilly.com/library/view/learning-python-design/9781785888038/ch10s03.html target=_blank rel=noopener>https://learning.oreilly.com/library/view/learning-python-design/9781785888038/ch10s03.html</a></li><li>Beetechnical - State Design Pattern: <a class=link href=https://beetechnical.com/tech-tutorial/state-design-patterns-when-to-use-pros-and-cons/ target=_blank rel=noopener>https://beetechnical.com/tech-tutorial/state-design-patterns-when-to-use-pros-and-cons/</a></li><li>University of Waterloo - State Design Pattern: <a class=link href=https://cs.uwaterloo.ca/~m2nagapp/courses/CS446/1171/Arch_Design_Activity/State.pdf target=_blank rel=noopener>https://cs.uwaterloo.ca/~m2nagapp/courses/CS446/1171/Arch_Design_Activity/State.pdf</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=43-é©ç”¨ã™ã¹ãçŠ¶æ³>4.3 é©ç”¨ã™ã¹ãçŠ¶æ³</h3><p><strong>è¦ç‚¹ï¼š</strong>
ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™å ´åˆã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨ã‚’æ¤œè¨ã™ã¹ãã§ã‚ã‚‹ã€‚</p><p><strong>å…·ä½“çš„ãªæ¡ä»¶ï¼š</strong></p><ol><li><p><strong>è¤‡æ•°ã®æ˜ç¢ºãªçŠ¶æ…‹ãŒå­˜åœ¨ã™ã‚‹</strong></p><ul><li>é€šå¸¸3ã¤ä»¥ä¸Šã®çŠ¶æ…‹</li><li>å„çŠ¶æ…‹ã§æ˜ç¢ºã«ç•°ãªã‚‹æŒ¯ã‚‹èˆã„</li></ul></li><li><p><strong>çŠ¶æ…‹ã«åŸºã¥ãè¤‡é›‘ãªæ¡ä»¶åˆ†å²</strong></p><ul><li>if-elseã‚„switchæ–‡ãŒå¤šæ•°å­˜åœ¨</li><li>åŒã˜æ¡ä»¶ãƒã‚§ãƒƒã‚¯ãŒè¤‡æ•°ç®‡æ‰€ã«æ•£åœ¨</li></ul></li><li><p><strong>å°†æ¥çš„ãªæ‹¡å¼µã®å¯èƒ½æ€§</strong></p><ul><li>æ–°ã—ã„çŠ¶æ…‹ã®è¿½åŠ ãŒäºˆæƒ³ã•ã‚Œã‚‹</li><li>ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒé »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹</li></ul></li><li><p><strong>çŠ¶æ…‹é·ç§»ãƒ­ã‚¸ãƒƒã‚¯ã®è¤‡é›‘æ€§</strong></p><ul><li>çŠ¶æ…‹é·ç§»ãŒè¤‡é›‘ã§ã€æ˜ç¢ºã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li><li>çŠ¶æ…‹é·ç§»å›³ãŒæœ‰ç”¨ãªå ´åˆ</li></ul></li><li><p><strong>ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã¨ã®æ•´åˆæ€§</strong></p><ul><li>ãƒ“ã‚¸ãƒã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒè‡ªç„¶ã«çŠ¶æ…‹ã‚’æŒã¤ï¼ˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãªã©ï¼‰</li></ul></li></ol><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>System Overflow - State Pattern Trade-offs: <a class=link href=https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use target=_blank rel=noopener>https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use</a></li><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=44-é¿ã‘ã‚‹ã¹ãçŠ¶æ³>4.4 é¿ã‘ã‚‹ã¹ãçŠ¶æ³</h3><p><strong>è¦ç‚¹ï¼š</strong>
ä»¥ä¸‹ã®å ´åˆã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨ã‚’é¿ã‘ã‚‹ã‹ã€ã‚ˆã‚Šå˜ç´”ãªä»£æ›¿æ¡ˆã‚’æ¤œè¨ã™ã¹ãã§ã‚ã‚‹ã€‚</p><p><strong>å…·ä½“çš„ãªæ¡ä»¶ï¼š</strong></p><ol><li><p><strong>çŠ¶æ…‹ãŒ1ã€œ2å€‹ã®ã¿</strong></p><ul><li>booleanå¤‰æ•°ã‚„enum + ifæ–‡ã§ååˆ†</li><li>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯éå‰°</li></ul></li><li><p><strong>çŠ¶æ…‹é–“ã®æŒ¯ã‚‹èˆã„ã®é•ã„ãŒå°ã•ã„</strong></p><ul><li>ãƒ‡ãƒ¼ã‚¿ã®ã¿ãŒç•°ãªã‚Šã€æŒ¯ã‚‹èˆã„ã¯åŒã˜</li><li>çŠ¶æ…‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚ˆã‚Šã‚‚è¨­å®šã‚¯ãƒ©ã‚¹ãŒé©åˆ‡</li></ul></li><li><p><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦</strong></p><ul><li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚·ã‚¹ãƒ†ãƒ ã‚„çµ„ã¿è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ ã§ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒè¨±å®¹ã§ããªã„</li><li>ãƒ¡ãƒ¢ãƒªåˆ¶ç´„ãŒå³ã—ã„ç’°å¢ƒ</li></ul></li><li><p><strong>ç´”ç²‹ã«ãƒ‡ãƒ¼ã‚¿é§†å‹•ã®çŠ¶æ…‹</strong></p><ul><li>æŒ¯ã‚‹èˆã„ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹å¿…è¦ãŒãªã„</li><li>å˜ç´”ãªæœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ï¼ˆFSMï¼‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ååˆ†</li></ul></li><li><p><strong>ã‚¯ãƒ©ã‚¹çˆ†ç™ºãŒæ‡¸å¿µã•ã‚Œã‚‹</strong></p><ul><li>äº›ç´°ãªé•ã„ã®ãŸã‚ã«å¤šæ•°ã®ã‚¯ãƒ©ã‚¹ãŒå¿…è¦ã«ãªã‚‹</li><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¤‡é›‘æ€§ãŒå¢—ã™ã ã‘</li></ul></li></ol><p><strong>æ ¹æ‹ ï¼š</strong>
éåº¦ãªæŠ½è±¡åŒ–ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ç†è§£ã‚’å›°é›£ã«ã—ã€é–‹ç™ºåŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚çŠ¶æ³ã«å¿œã˜ãŸé©åˆ‡ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã®é¸æŠãŒé‡è¦ã§ã‚ã‚‹ã€‚</p><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>System Overflow - State Pattern Trade-offs: <a class=link href=https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use target=_blank rel=noopener>https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use</a></li><li>Beetechnical - State Design Pattern: <a class=link href=https://beetechnical.com/tech-tutorial/state-design-patterns-when-to-use-pros-and-cons/ target=_blank rel=noopener>https://beetechnical.com/tech-tutorial/state-design-patterns-when-to-use-pros-and-cons/</a></li><li>O&rsquo;Reilly - Advantages/disadvantages of State pattern: <a class=link href=https://learning.oreilly.com/library/view/learning-python-design/9781785888038/ch10s03.html target=_blank rel=noopener>https://learning.oreilly.com/library/view/learning-python-design/9781785888038/ch10s03.html</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h2 id=5-é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ¯”è¼ƒ>5. é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ¯”è¼ƒ</h2><h3 id=51-strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„>5.1 Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„</h3><p><strong>è¦ç‚¹ï¼š</strong>
Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¨Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å®Ÿè£…ãŒéå¸¸ã«ä¼¼ã¦ã„ã‚‹ãŒã€<strong>æ„å›³ã¨ä½¿ç”¨æ–¹æ³•</strong>ãŒæ˜ç¢ºã«ç•°ãªã‚‹ã€‚</p><p><strong>è©³ç´°ãªæ¯”è¼ƒï¼š</strong></p><div class=table-wrapper><table><thead><tr><th>å´é¢</th><th>Stateãƒ‘ã‚¿ãƒ¼ãƒ³</th><th>Strategyãƒ‘ã‚¿ãƒ¼ãƒ³</th></tr></thead><tbody><tr><td><strong>ä¸»ãªç›®çš„</strong></td><td>çŠ¶æ…‹ã«ã‚ˆã‚‹æŒ¯ã‚‹èˆã„ã®å¤‰æ›´</td><td>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®é¸æŠã¨äº¤æ›</td></tr><tr><td><strong>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®é–¢ä¸</strong></td><td>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒå†…éƒ¨çš„ã«çŠ¶æ…‹ã‚’ç®¡ç†</td><td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæˆ¦ç•¥ã‚’é¸æŠ</td></tr><tr><td><strong>ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å‚ç…§</strong></td><td>çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒé€šå¸¸ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å‚ç…§ã‚’æŒã¤</td><td>æˆ¦ç•¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯é€šå¸¸ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å‚ç…§ã‚’æŒãŸãªã„</td></tr><tr><td><strong>é·ç§»</strong></td><td>çŠ¶æ…‹é–“ã®é·ç§»ãŒå­˜åœ¨</td><td>æˆ¦ç•¥é–“ã®é·ç§»ã¯å­˜åœ¨ã—ãªã„</td></tr><tr><td><strong>ç„¦ç‚¹</strong></td><td>ã€Œä½•ã‚’ã€è¡Œã†ã‹ï¼ˆwhatï¼‰</td><td>ã€Œã©ã®ã‚ˆã†ã«ã€è¡Œã†ã‹ï¼ˆhowï¼‰</td></tr><tr><td><strong>ä¸»ãªä½¿ç”¨ä¾‹</strong></td><td>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ã‚²ãƒ¼ãƒ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€ãƒ‡ãƒã‚¤ã‚¹çŠ¶æ…‹</td><td>ã‚½ãƒ¼ãƒˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€æ”¯æ‰•ã„æ–¹æ³•ã€åœ§ç¸®æ–¹æ³•</td></tr><tr><td><strong>çŠ¶æ…‹/æˆ¦ç•¥ã®é–¢ä¿‚</strong></td><td>å¾Œç¶™ãƒ»å‰ä»»ã®é–¢ä¿‚ãŒã‚ã‚‹å ´åˆãŒã‚ã‚‹</td><td>æˆ¦ç•¥é–“ã«é–¢ä¿‚æ€§ã¯ãªã„</td></tr></tbody></table></div><p><strong>æ ¹æ‹ ï¼š</strong></p><ol><li><p><strong>æ„å›³ã®é•ã„</strong></p><ul><li><strong>State</strong>: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒç›®çš„ã€‚æœ‰é™çŠ¶æ…‹æ©Ÿæ¢°ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ã€‚</li><li><strong>Strategy</strong>: ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ï¼ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒé¸æŠã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒç›®çš„ã€‚</li></ul></li><li><p><strong>åˆ¶å¾¡ã®æ‰€åœ¨</strong></p><ul><li><strong>State</strong>: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒè‡ªå¾‹çš„ã«çŠ¶æ…‹ã‚’ç®¡ç†ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç›´æ¥çš„ãªé–¢ä¸ãªã—ã«çŠ¶æ…‹é·ç§»ã™ã‚‹ã€‚</li><li><strong>Strategy</strong>: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒä½¿ç”¨ã™ã‚‹æˆ¦ç•¥ã‚’æ˜ç¤ºçš„ã«é¸æŠã™ã‚‹ã€‚</li></ul></li><li><p><strong>ç›¸äº’å‚ç…§</strong></p><ul><li><strong>State</strong>: çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¾Œæ–¹å‚ç…§ã‚’æŒã¡ã€ä»–ã®çŠ¶æ…‹ã¸ã®é·ç§»ã‚’ãƒˆãƒªã‚¬ãƒ¼ã§ãã‚‹ã€‚</li><li><strong>Strategy</strong>: æˆ¦ç•¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å˜ã«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã™ã‚‹ã ã‘ã§ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å‚ç…§ã¯ä¸è¦ã€‚</li></ul></li></ol><p><strong>å®Ÿè£…ä¾‹ã®æ¯”è¼ƒï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># Stateãƒ‘ã‚¿ãƒ¼ãƒ³ - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒçŠ¶æ…‹ã‚’ç®¡ç†</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>Document</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;state&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span><span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span> <span class=n>default</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span> <span class=nn>DraftState</span><span class=o>-&gt;</span><span class=k>new</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>publish</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>state</span><span class=o>-&gt;</span><span class=n>publish</span><span class=p>(</span><span class=nv>$self</span><span class=p>);</span>  <span class=c1># çŠ¶æ…‹ãŒè‡ªèº«ã‚’å¤‰æ›´</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>DraftState</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>publish</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$doc</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>print</span> <span class=s>&#34;Publishing draft...\n&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$doc</span><span class=o>-&gt;</span><span class=n>state</span><span class=p>(</span><span class=nn>PublishedState</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>  <span class=c1># çŠ¶æ…‹é·ç§»</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒæˆ¦ç•¥ã‚’é¸æŠ</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>Calculator</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;strategy&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span><span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span> <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>execute</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=nn>strategy</span><span class=o>-&gt;</span><span class=n>calculate</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>);</span>  <span class=c1># æˆ¦ç•¥ã«å§”è­²</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>AddStrategy</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>calculate</span> <span class=p>{</span> <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span> <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$calc</span> <span class=o>=</span> <span class=nn>Calculator</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>strategy</span> <span class=o>=&gt;</span> <span class=nn>AddStrategy</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$calc</span><span class=o>-&gt;</span><span class=n>strategy</span><span class=p>(</span><span class=nn>MultiplyStrategy</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>);</span>  <span class=c1># ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå¤‰æ›´</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Baeldung - State Pattern vs Strategy Pattern: <a class=link href=https://www.baeldung.com/cs/design-state-pattern-vs-strategy-pattern target=_blank rel=noopener>https://www.baeldung.com/cs/design-state-pattern-vs-strategy-pattern</a></li><li>Stack Overflow - Difference between Strategy and State: <a class=link href=https://stackoverflow.com/questions/1658192/what-is-the-difference-between-strategy-design-pattern-and-state-design-pattern target=_blank rel=noopener>https://stackoverflow.com/questions/1658192/what-is-the-difference-between-strategy-design-pattern-and-state-design-pattern</a></li><li>JavaBrahman - Strategy vs State Analysis: <a class=link href=https://www.javabrahman.com/design-patterns/strategy-design-pattern-versus-state-design-pattern-analysis/ target=_blank rel=noopener>https://www.javabrahman.com/design-patterns/strategy-design-pattern-versus-state-design-pattern-analysis/</a></li><li>bugfree.ai - Strategy vs State Pattern: <a class=link href=https://bugfree.ai/knowledge-hub/strategy-vs-state-pattern-ood-design-patterns target=_blank rel=noopener>https://bugfree.ai/knowledge-hub/strategy-vs-state-pattern-ood-design-patterns</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> é«˜</p><h3 id=52-ãã®ä»–ã®é–¢é€£ãƒ‘ã‚¿ãƒ¼ãƒ³>5.2 ãã®ä»–ã®é–¢é€£ãƒ‘ã‚¿ãƒ¼ãƒ³</h3><h4 id=521-chain-of-responsibilityè²¬ä»»ã®é€£é–ãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.1 Chain of Responsibilityï¼ˆè²¬ä»»ã®é€£é–ï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³</h4><p><strong>é¡ä¼¼ç‚¹ï¼š</strong></p><ul><li>ã©ã¡ã‚‰ã‚‚æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³</li><li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹è²¬ä»»ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å§”è­²</li></ul><p><strong>ç›¸é•ç‚¹ï¼š</strong></p><ul><li><strong>State</strong>: å¸¸ã«1ã¤ã®çŠ¶æ…‹ãŒè²¬ä»»ã‚’æŒã¤ã€æ˜ç¢ºãªé·ç§»</li><li><strong>Chain of Responsibility</strong>: è¤‡æ•°ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒé€£é–ã€æœ€åˆã«ãƒãƒƒãƒã—ãŸã‚‚ã®ãŒå‡¦ç†</li></ul><p><strong>ä½¿ã„åˆ†ã‘ï¼š</strong></p><ul><li>æ˜ç¢ºãªçŠ¶æ…‹é·ç§»ãŒã‚ã‚‹å ´åˆ â†’ State</li><li>å‡¦ç†ã®é€£é–ã‚„è¤‡æ•°ã®å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆ â†’ Chain of Responsibility</li></ul><h4 id=522-commandãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.2 Commandãƒ‘ã‚¿ãƒ¼ãƒ³</h4><p><strong>é¡ä¼¼ç‚¹ï¼š</strong></p><ul><li>æ“ä½œã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–</li><li>æŒ¯ã‚‹èˆã„ã®æŠ½è±¡åŒ–</li></ul><p><strong>ç›¸é•ç‚¹ï¼š</strong></p><ul><li><strong>State</strong>: çŠ¶æ…‹ã«ä¾å­˜ã—ãŸæŒ¯ã‚‹èˆã„ã€è‡ªå‹•çš„ãªé·ç§»</li><li><strong>Command</strong>: æ“ä½œã®ã‚«ãƒ—ã‚»ãƒ«åŒ–ã€undo/redoæ©Ÿèƒ½ã€ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°</li></ul><p><strong>ä½¿ã„åˆ†ã‘ï¼š</strong></p><ul><li>çŠ¶æ…‹ã«åŸºã¥ãæŒ¯ã‚‹èˆã„ã®å¤‰æ›´ â†’ State</li><li>æ“ä½œã®è¨˜éŒ²ã€undo/redoã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ â†’ Command</li></ul><h4 id=523-flyweightãƒ‘ã‚¿ãƒ¼ãƒ³>5.2.3 Flyweightãƒ‘ã‚¿ãƒ¼ãƒ³</h4><p><strong>çµ„ã¿åˆã‚ã›ï¼š</strong>
Stateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’å‰Šæ¸›ã§ãã‚‹ã€‚çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒçŠ¶æ…‹ã‚’æŒãŸãªã„å ´åˆï¼ˆç´”ç²‹ãªæŒ¯ã‚‹èˆã„ã®ã¿ï¼‰ã€Flyweightãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã§ãã‚‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># çŠ¶æ…‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã¨ã—ã¦å…±æœ‰</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>StateFactory</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>%states</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>get_state</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$state_class</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$states</span><span class=p>{</span><span class=nv>$state_class</span><span class=p>}</span> <span class=sr>//</span><span class=o>=</span> <span class=nv>$state_class</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$states</span><span class=p>{</span><span class=nv>$state_class</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>å‡ºå…¸ï¼š</strong></p><ul><li>Refactoring Guru - State Pattern: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li><li>GeeksforGeeks - State Design Pattern: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li></ul><p><strong>ä¿¡é ¼åº¦ï¼š</strong> ä¸­</p><h2 id=6-å†…éƒ¨ãƒªãƒ³ã‚¯èª¿æŸ»>6. å†…éƒ¨ãƒªãƒ³ã‚¯èª¿æŸ»</h2><h3 id=61-é–¢é€£è¨˜äº‹ã®æ¤œç´¢çµæœ>6.1 é–¢é€£è¨˜äº‹ã®æ¤œç´¢çµæœ</h3><p>ä»¥ä¸‹ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§<code>/content/post</code>é…ä¸‹ã‚’æ¤œç´¢ã—ãŸçµæœï¼š</p><ol><li><p><strong>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³é–¢é€£</strong></p><ul><li><code>/2025/12/25/234500/</code> - JSON-RPC Request/Responseå®Ÿè£… - è¤‡åˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆã€PerlÃ—TDDã€‘</li><li><code>/2025/12/30/164012/</code> - ç¬¬12å›-ã“ã‚ŒãŒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã ï¼ - Mooã‚’ä½¿ã£ã¦ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã‚’ä½œã£ã¦ã¿ã‚ˆã†</li><li><code>/2025/12/30/164011/</code> - ç¬¬11å›-å®Œæˆï¼ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ - Mooã‚’ä½¿ã£ã¦ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã‚’ä½œã£ã¦ã¿ã‚ˆã†</li></ul></li><li><p><strong>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘é–¢é€£</strong></p><ul><li><code>/2021/10/31/191008/</code> - Mooã§è¦šãˆã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</li><li><code>/2025/12/24/000000/</code> - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é–¢é€£è¨˜äº‹</li><li><code>/2025/12/22/000000/</code> - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°é–¢é€£è¨˜äº‹</li></ul></li><li><p><strong>ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ»ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³é–¢é€£</strong></p><ul><li>é–¢é€£è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼ˆè©³ç´°ã¯æ¤œç´¢çµæœå‚ç…§ï¼‰</li></ul></li></ol><h3 id=62-æ¨å¥¨ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ³ã‚¯>6.2 æ¨å¥¨ã•ã‚Œã‚‹å†…éƒ¨ãƒªãƒ³ã‚¯</h3><p>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã«é–¢é€£ã™ã‚‹è¨˜äº‹ã¨ã—ã¦ã€ä»¥ä¸‹ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã§å‚ç…§ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼š</p><ol><li><p><strong>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’ã®å°å…¥</strong></p><ul><li><a class=link href=/2025/12/30/164012/>ç¬¬12å›-ã“ã‚ŒãŒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã ï¼</a> - Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ã®è§£èª¬ï¼ˆStateãƒ‘ã‚¿ãƒ¼ãƒ³ã¨æ¯”è¼ƒï¼‰</li><li><a class=link href=/2025/12/30/164011/>ç¬¬11å›-å®Œæˆï¼ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼</a> - ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã®å®Ÿè£…ä¾‹</li></ul></li><li><p><strong>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®åŸºç¤</strong></p><ul><li><a class=link href=/2021/10/31/191008/>Mooã§è¦šãˆã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°</a> - Perlã§ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®åŸºç¤</li></ul></li><li><p><strong>å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³</strong></p><ul><li><a class=link href=/2025/12/25/234500/>JSON-RPC Request/Responseå®Ÿè£… - è¤‡åˆå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­è¨ˆã€PerlÃ—TDDã€‘</a> - å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨TDDã®å®Ÿè·µ</li></ul></li></ol><p><strong>æ³¨ï¼š</strong> ã“ã‚Œã‚‰ã®è¨˜äº‹ã¯ã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã®è£œè¶³çš„ãªå­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦æœ‰ç”¨ã€‚</p><h2 id=7-å‚è€ƒæ–‡çŒ®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº>7. å‚è€ƒæ–‡çŒ®ãƒ»ä¿¡é ¼ã§ãã‚‹æƒ…å ±æº</h2><h3 id=71-æ›¸ç±>7.1 æ›¸ç±</h3><ol><li><strong>Design Patterns: Elements of Reusable Object-Oriented Software</strong><ul><li>è‘—è€…: Erich Gamma, Richard Helm, Ralph Johnson, John Vlissidesï¼ˆGang of Fourï¼‰</li><li>å‡ºç‰ˆç¤¾: Addison-Wesley Professional</li><li>å‡ºç‰ˆå¹´: 1994å¹´10æœˆ21æ—¥</li><li>ISBN-10: 0-201-63361-2</li><li>ISBN-13: 978-0-201-63361-0</li><li>ASIN: B000SEIBB8ï¼ˆKindleç‰ˆï¼‰</li><li>ä¿¡é ¼åº¦: <strong>æœ€é«˜</strong> - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åŸå…¸</li><li>URL: <a class=link href=https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8 target=_blank rel=noopener>https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8</a></li></ul></li></ol><h3 id=72-ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹>7.2 ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒªã‚½ãƒ¼ã‚¹</h3><h4 id=é«˜ä¿¡é ¼åº¦>é«˜ä¿¡é ¼åº¦</h4><ol><li><p><strong>Refactoring Guru - State Pattern</strong></p><ul><li>URL: <a class=link href=https://refactoring.guru/design-patterns/state target=_blank rel=noopener>https://refactoring.guru/design-patterns/state</a></li><li>ä¿¡é ¼åº¦: <strong>é«˜</strong></li><li>ç†ç”±: ä½“ç³»çš„ãªèª¬æ˜ã€UMLå›³ã€å¤šè¨€èªã®ã‚³ãƒ¼ãƒ‰ä¾‹ã€åºƒãå¼•ç”¨ã•ã‚Œã‚‹</li></ul></li><li><p><strong>Wikipedia - State Pattern</strong></p><ul><li>URL: <a class=link href=https://en.wikipedia.org/wiki/State_pattern target=_blank rel=noopener>https://en.wikipedia.org/wiki/State_pattern</a></li><li>ä¿¡é ¼åº¦: <strong>é«˜</strong></li><li>ç†ç”±: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€å‚è€ƒæ–‡çŒ®ã®å……å®Ÿ</li></ul></li><li><p><strong>GeeksforGeeks - State Design Pattern</strong></p><ul><li>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/state-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/state-design-pattern/</a></li><li>ä¿¡é ¼åº¦: <strong>é«˜</strong></li><li>ç†ç”±: æ•™è‚²ç›®çš„ã®è©³ç´°ãªè§£èª¬ã€ã‚³ãƒ¼ãƒ‰ä¾‹ã®å……å®Ÿ</li></ul></li><li><p><strong>Game Programming Patterns - State</strong></p><ul><li>URL: <a class=link href=https://gameprogrammingpatterns.com/state.html target=_blank rel=noopener>https://gameprogrammingpatterns.com/state.html</a></li><li>è‘—è€…: Robert Nystrom</li><li>ä¿¡é ¼åº¦: <strong>é«˜</strong></li><li>ç†ç”±: ã‚²ãƒ¼ãƒ é–‹ç™ºã§ã®å®Ÿè·µçš„ãªèª¬æ˜ã€æ¥­ç•Œã§åºƒãèªçŸ¥</li></ul></li></ol><h4 id=ä¸­ä¿¡é ¼åº¦>ä¸­ä¿¡é ¼åº¦</h4><ol start=5><li><p><strong>Baeldung - State Pattern vs Strategy Pattern</strong></p><ul><li>URL: <a class=link href=https://www.baeldung.com/cs/design-state-pattern-vs-strategy-pattern target=_blank rel=noopener>https://www.baeldung.com/cs/design-state-pattern-vs-strategy-pattern</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­ã€œé«˜</strong></li><li>ç†ç”±: æŠ€è¡“çš„ã«æ­£ç¢ºã€æ¯”è¼ƒåˆ†æãŒè©³ç´°</li></ul></li><li><p><strong>Stack Overflow - State vs Strategy Discussion</strong></p><ul><li>URL: <a class=link href=https://stackoverflow.com/questions/1658192/what-is-the-difference-between-strategy-design-pattern-and-state-design-pattern target=_blank rel=noopener>https://stackoverflow.com/questions/1658192/what-is-the-difference-between-strategy-design-pattern-and-state-design-pattern</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li><li>ç†ç”±: ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®è­°è«–ã€å¤šæ§˜ãªè¦–ç‚¹</li></ul></li><li><p><strong>MetaCPAN - FSA::Rules</strong></p><ul><li>URL: <a class=link href=https://metacpan.org/pod/FSA::Rules target=_blank rel=noopener>https://metacpan.org/pod/FSA::Rules</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­ã€œé«˜</strong></li><li>ç†ç”±: Perlã®å…¬å¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªãƒã‚¸ãƒˆãƒª</li></ul></li></ol><h3 id=73-ãã®ä»–ã®å‚è€ƒè³‡æ–™>7.3 ãã®ä»–ã®å‚è€ƒè³‡æ–™</h3><ol start=8><li><p><strong>System Overflow - State Pattern Trade-offs</strong></p><ul><li>URL: <a class=link href=https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use target=_blank rel=noopener>https://www.systemoverflow.com/learn/behavioral-patterns/state-pattern/state-pattern-trade-offs-and-when-to-use</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li></ul></li><li><p><strong>Cloudaffle - Use Cases For State Design Pattern</strong></p><ul><li>URL: <a class=link href=https://cloudaffle.com/series/behavioral-design-patterns/state-application/ target=_blank rel=noopener>https://cloudaffle.com/series/behavioral-design-patterns/state-application/</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li></ul></li><li><p><strong>DEV Community - Programming Patterns for Games: State</strong></p><ul><li>URL: <a class=link href=https://dev.to/zigzagoon1/programming-patterns-for-games-state-2eop target=_blank rel=noopener>https://dev.to/zigzagoon1/programming-patterns-for-games-state-2eop</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li></ul></li><li><p><strong>JavaDeploy - Perl State-Machine Model</strong></p><ul><li>URL: <a class=link href=https://www.javadeploy.com/advanced-perl/module4/perl-stateMachine-example.jsp target=_blank rel=noopener>https://www.javadeploy.com/advanced-perl/module4/perl-stateMachine-example.jsp</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li></ul></li><li><p><strong>GitHub - Perl-OOO-Gang-of-4-Design</strong></p><ul><li>URL: <a class=link href=https://github.com/dgrunwal/Perl-OOO-Gang-of-4-Design target=_blank rel=noopener>https://github.com/dgrunwal/Perl-OOO-Gang-of-4-Design</a></li><li>ä¿¡é ¼åº¦: <strong>ä¸­</strong></li><li>ç†ç”±: Perlã§ã®GoFãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…ä¾‹</li></ul></li></ol><h2 id=8-ã¾ã¨ã‚>8. ã¾ã¨ã‚</h2><h3 id=81-stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ¬è³ª>8.1 Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®æœ¬è³ª</h3><p>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…éƒ¨çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã¨ãã«æŒ¯ã‚‹èˆã„ã‚’å¤‰æ›´ã™ã‚‹æŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ã‚‹ã€‚çŠ¶æ…‹å›ºæœ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ¥ã€…ã®çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã«ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã“ã¨ã§ã€è¤‡é›‘ãªæ¡ä»¶åˆ†å²ã‚’æ’é™¤ã—ã€ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹ã€‚</p><h3 id=82-é©ç”¨ã®åˆ¤æ–­åŸºæº–>8.2 é©ç”¨ã®åˆ¤æ–­åŸºæº–</h3><p>ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™å ´åˆã€Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨ã‚’æ¤œè¨ã™ã¹ãï¼š</p><ul><li>3ã¤ä»¥ä¸Šã®æ˜ç¢ºãªçŠ¶æ…‹ãŒå­˜åœ¨ã™ã‚‹</li><li>å„çŠ¶æ…‹ã§åŒã˜æ“ä½œã«å¯¾ã—ã¦ç•°ãªã‚‹æŒ¯ã‚‹èˆã„ãŒå¿…è¦</li><li>çŠ¶æ…‹é·ç§»ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒè¤‡é›‘</li><li>å°†æ¥çš„ã«æ–°ã—ã„çŠ¶æ…‹ãŒè¿½åŠ ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒé«˜ã„</li></ul><p>é€†ã«ã€çŠ¶æ…‹ãŒ1ã€œ2å€‹ã®ã¿ã€ã¾ãŸã¯æŒ¯ã‚‹èˆã„ã®é•ã„ãŒå°ã•ã„å ´åˆã¯ã€ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã‚’æ¤œè¨ã™ã¹ãã§ã‚ã‚‹ã€‚</p><h3 id=83-perlã§ã®å®Ÿè£…>8.3 Perlã§ã®å®Ÿè£…</h3><p>Perlã§ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ã§Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã§ãã‚‹ï¼š</p><ol><li><strong>ãƒãƒƒã‚·ãƒ¥ã¨ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</strong> - ã‚·ãƒ³ãƒ—ãƒ«ã§å°è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘</li><li><strong>Moo/Mooseã‚’ä½¿ç”¨ã—ãŸOOP</strong> - GoFã®è¨­è¨ˆã«å¿ å®Ÿã§ä¿å®ˆæ€§ãŒé«˜ã„</li><li><strong>FSA::Rulesãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</strong> - æ—¢è£½ã®çŠ¶æ…‹æ©Ÿæ¢°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ´»ç”¨</li></ol><h3 id=84-æœ€çµ‚çš„ãªæ¨å¥¨äº‹é …>8.4 æœ€çµ‚çš„ãªæ¨å¥¨äº‹é …</h3><ul><li><strong>å­¦ç¿’</strong>: ã¾ãšGoFã®æ›¸ç±ã¨Refactoring Guruã§åŸºæœ¬ã‚’ç†è§£ã™ã‚‹</li><li><strong>å®Ÿè·µ</strong>: å°ã•ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è©¦ã—ã€æ®µéšçš„ã«è¤‡é›‘ãªã‚±ãƒ¼ã‚¹ã«é©ç”¨ã™ã‚‹</li><li><strong>è©•ä¾¡</strong>: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã¨è¤‡é›‘æ€§ã«å¿œã˜ã¦ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨ã‚’åˆ¤æ–­ã™ã‚‹</li><li><strong>æ¯”è¼ƒ</strong>: Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ãªã©é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®é•ã„ã‚’ç†è§£ã—ã€é©åˆ‡ã«ä½¿ã„åˆ†ã‘ã‚‹</li></ul><p>Stateãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã ãŒã€ä¸‡èƒ½ã§ã¯ãªã„ã€‚çŠ¶æ³ã«å¿œã˜ãŸé©åˆ‡ãªåˆ¤æ–­ãŒã€å„ªã‚ŒãŸè¨­è¨ˆã®éµã¨ãªã‚‹ã€‚</p><hr><p><strong>èª¿æŸ»å®Ÿæ–½æ—¥</strong>: 2025å¹´12æœˆ31æ—¥<br><strong>èª¿æŸ»è€…</strong>: AIèª¿æŸ»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ<br><strong>ä¿¡é ¼åº¦è©•ä¾¡åŸºæº–</strong>: é«˜ï¼ˆè¤‡æ•°ã®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºã§ç¢ºèªï¼‰ã€ä¸­ï¼ˆä¸€éƒ¨ã®æƒ…å ±æºã§ç¢ºèªï¼‰ã€ä½ï¼ˆå˜ä¸€ã¾ãŸã¯éå…¬å¼ãªæƒ…å ±æºï¼‰</p></section><footer class=article-footer><section class=article-tags><a href=/tags/design-pattern/>Design-Pattern</a>
<a href=/tags/state-pattern/>State-Pattern</a>
<a href=/tags/gof/>Gof</a>
<a href=/tags/behavioral-pattern/>Behavioral-Pattern</a>
<a href=/tags/object-oriented/>Object-Oriented</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/warehouse/visitor-pattern-investigation/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Visitorãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆVisitor Design Patternï¼‰èª¿æŸ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h2></div></a></article><article class=has-image><a href=/warehouse/mediator-pattern/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Mediatorãƒ‘ã‚¿ãƒ¼ãƒ³ã®èª¿æŸ»</h2></div></a></article><article class=has-image><a href=/2026/01/03/001541/><div class=article-image><img src=/public_images/2026/moo-dispatcher-series-image.jpg loading=lazy data-key data-hash=/public_images/2026/moo-dispatcher-series-image.jpg></div><div class=article-details><h2 class=article-title>ç¬¬12å›-ã“ã‚ŒãŒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã ï¼ - Mooã‚’ä½¿ã£ã¦ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã‚’ä½œã£ã¦ã¿ã‚ˆã†</h2></div></a></article><article class=has-image><a href=/2026/01/02/233311/><div class=article-image><img src=/public_images/2021-moo-oop-image.jpg loading=lazy data-key data-hash=/public_images/2021-moo-oop-image.jpg></div><div class=article-details><h2 class=article-title>ã‚·ãƒªãƒ¼ã‚ºç›®æ¬¡ï¼šMooã§è¦šãˆã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼ˆå…¨12å›ï¼‰</h2></div></a></article><article class=has-image><a href=/warehouse/strategy-pattern-research/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Strategyãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæŒ¯ã‚‹èˆã„ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰èª¿æŸ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//nqounet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2000 -
2026 nqou.net</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> ã§æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>ãƒ†ãƒ¼ãƒ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> ã¯ <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> ã«ã‚ˆã£ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>