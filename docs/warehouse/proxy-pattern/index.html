<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Proxyパターンに関する包括的な調査ドキュメント。用途、実装例、利点・欠点、他パターンとの比較を網羅"><title>Proxyパターン 調査ドキュメント</title><link rel=canonical href=https://www.nqou.net/warehouse/proxy-pattern/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Proxyパターン 調査ドキュメント"><meta property='og:description' content="Proxyパターンに関する包括的な調査ドキュメント。用途、実装例、利点・欠点、他パターンとの比較を網羅"><meta property='og:url' content='https://www.nqou.net/warehouse/proxy-pattern/'><meta property='og:site_name' content='nqou.net'><meta property='og:type' content='article'><meta property='article:section' content='Warehouse'><meta property='article:tag' content='design-pattern'><meta property='article:tag' content='proxy-pattern'><meta property='article:tag' content='structural-pattern'><meta property='article:published_time' content='2026-01-02T14:56:39+09:00'><meta property='article:modified_time' content='2026-01-02T14:56:39+09:00'><meta property='og:image' content='https://www.nqou.net/favicon.png'><meta name=twitter:title content="Proxyパターン 調査ドキュメント"><meta name=twitter:description content="Proxyパターンに関する包括的な調査ドキュメント。用途、実装例、利点・欠点、他パターンとの比較を網羅"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.nqou.net/favicon.png'><link rel="shortcut icon" href=/favicon.png><style>@import 'https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap';:root{--base-font-family:Arial, "Noto Sans JP", sans-serif}</style><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3923446804785015" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js defer></script><script defer>document.addEventListener("DOMContentLoaded",function(){try{typeof mermaid!="undefined"&&document.querySelector(".mermaid")&&mermaid.initialize({startOnLoad:!0,securityLevel:"strict"})}catch(e){console.warn("Mermaid failed to initialize:",e)}})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-E50H9ESN7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-E50H9ESN7E")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=メニューを開く・閉じる>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/public_images/nqounet201703.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🥃</span></figure><div class=site-meta><h1 class=site-name><a href=/>nqou.net</a></h1><h2 class=site-description>Whisky, Perl, Kansai.pm</h2></div></header><ol class=menu-social><li><a href=https://github.com/nqounet target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/nqounet target=_blank title=X rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/advent-calendar-2025/><svg class="icon icon-tabler icon-tabler-calendar" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><path d="M8 15h.01"/><path d="M12 15h.01"/><path d="M16 15h.01"/><path d="M8 19h.01"/><path d="M12 19h.01"/><path d="M16 19h.01"/></svg>
<span>Perl Advent Calendar 2025 - AI Edition</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/warehouse/><svg class="icon icon-tabler icon-tabler-warehouse" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10l9-6 9 6"/><rect x="5" y="10" width="14" height="10" rx="2"/><rect x="10" y="14" width="4" height="6" rx="1"/><path d="M7 20v-4h2v4"/><path d="M15 20v-4h2v4"/></svg>
<span>Warehouse</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ダークモード</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目次</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#目次>目次</a></li><li><a href=#概要>概要</a><ol><li><a href=#要点>要点</a></li><li><a href=#根拠>根拠</a></li><li><a href=#仮定>仮定</a></li><li><a href=#出典>出典</a></li></ol></li><li><a href=#用途と適用場面>用途と適用場面</a><ol><li><a href=#要点-1>要点</a><ol><li><a href=#1-仮想プロキシvirtual-proxy>1. <strong>仮想プロキシ（Virtual Proxy）</strong></a></li><li><a href=#2-保護プロキシprotection-proxy>2. <strong>保護プロキシ（Protection Proxy）</strong></a></li><li><a href=#3-リモートプロキシremote-proxy>3. <strong>リモートプロキシ（Remote Proxy）</strong></a></li><li><a href=#4-スマートプロキシsmart-proxysmart-reference>4. <strong>スマートプロキシ（Smart Proxy/Smart Reference）</strong></a></li><li><a href=#5-キャッシュプロキシcache-proxy>5. <strong>キャッシュプロキシ（Cache Proxy）</strong></a></li></ol></li><li><a href=#根拠-1>根拠</a></li><li><a href=#適用すべき場面>適用すべき場面</a></li><li><a href=#適用を避けるべき場面>適用を避けるべき場面</a></li><li><a href=#出典-1>出典</a></li></ol></li><li><a href=#基本構造とコンポーネント>基本構造とコンポーネント</a><ol><li><a href=#要点-2>要点</a><ol><li><a href=#1-subject共通インターフェース>1. <strong>Subject（共通インターフェース）</strong></a></li><li><a href=#2-realsubject実体オブジェクト>2. <strong>RealSubject（実体オブジェクト）</strong></a></li><li><a href=#3-proxy代理オブジェクト>3. <strong>Proxy（代理オブジェクト）</strong></a></li></ol></li><li><a href=#umlクラス図構造>UMLクラス図構造</a></li><li><a href=#動作フロー>動作フロー</a></li><li><a href=#根拠-2>根拠</a></li><li><a href=#出典-2>出典</a></li></ol></li><li><a href=#サンプルコード>サンプルコード</a><ol><li><a href=#要点-3>要点</a></li><li><a href=#1-python実装例>1. Python実装例</a><ol><li><a href=#11-仮想プロキシvirtual-proxy--画像の遅延読み込み>1.1 仮想プロキシ（Virtual Proxy）- 画像の遅延読み込み</a></li><li><a href=#12-保護プロキシprotection-proxy--アクセス制御>1.2 保護プロキシ（Protection Proxy）- アクセス制御</a></li><li><a href=#13-キャッシュプロキシcache-proxy>1.3 キャッシュプロキシ（Cache Proxy）</a></li></ol></li><li><a href=#2-java実装例>2. Java実装例</a><ol><li><a href=#21-仮想プロキシvirtual-proxy>2.1 仮想プロキシ（Virtual Proxy）</a></li><li><a href=#22-スマートプロキシsmart-proxy--ロギング機能>2.2 スマートプロキシ（Smart Proxy）- ロギング機能</a></li></ol></li><li><a href=#3-typescript実装例>3. TypeScript実装例</a><ol><li><a href=#31-保護プロキシprotection-proxy>3.1 保護プロキシ（Protection Proxy）</a></li><li><a href=#32-javascriptネイティブproxyオブジェクト>3.2 JavaScriptネイティブProxyオブジェクト</a></li></ol></li><li><a href=#根拠-3>根拠</a></li><li><a href=#出典-3>出典</a></li></ol></li><li><a href=#利点メリット>利点（メリット）</a><ol><li><a href=#要点-4>要点</a><ol><li><a href=#1-アクセス制御の柔軟性>1. <strong>アクセス制御の柔軟性</strong></a></li><li><a href=#2-パフォーマンスの最適化>2. <strong>パフォーマンスの最適化</strong></a></li><li><a href=#3-開放閉鎖原則ocpの実現>3. <strong>開放/閉鎖原則（OCP）の実現</strong></a></li><li><a href=#4-疎結合の促進>4. <strong>疎結合の促進</strong></a></li><li><a href=#5-リモートアクセスの透過性>5. <strong>リモートアクセスの透過性</strong></a></li><li><a href=#6-横断的関心事の一元管理>6. <strong>横断的関心事の一元管理</strong></a></li><li><a href=#7-単一責任原則srpの維持>7. <strong>単一責任原則（SRP）の維持</strong></a></li></ol></li><li><a href=#根拠-4>根拠</a></li><li><a href=#出典-4>出典</a></li></ol></li><li><a href=#欠点デメリット>欠点（デメリット）</a><ol><li><a href=#要点-5>要点</a><ol><li><a href=#1-複雑さの増加>1. <strong>複雑さの増加</strong></a></li><li><a href=#2-パフォーマンスオーバーヘッド>2. <strong>パフォーマンスオーバーヘッド</strong></a></li><li><a href=#3-不要な抽象化>3. <strong>不要な抽象化</strong></a></li><li><a href=#4-潜在的なボトルネック>4. <strong>潜在的なボトルネック</strong></a></li><li><a href=#5-インターフェース同期の必要性>5. <strong>インターフェース同期の必要性</strong></a></li><li><a href=#6-状態管理の複雑化>6. <strong>状態管理の複雑化</strong></a></li><li><a href=#7-デバッグの困難さ>7. <strong>デバッグの困難さ</strong></a></li></ol></li><li><a href=#根拠-5>根拠</a></li><li><a href=#出典-5>出典</a></li></ol></li><li><a href=#関連パターンとの比較>関連パターンとの比較</a><ol><li><a href=#要点-6>要点</a></li><li><a href=#1-proxy-vs-decoratorデコレーターパターン>1. Proxy vs Decorator（デコレーターパターン）</a><ol><li><a href=#共通点><strong>共通点</strong></a></li><li><a href=#相違点><strong>相違点</strong></a></li><li><a href=#実例での違い><strong>実例での違い</strong></a></li></ol></li><li><a href=#2-proxy-vs-adapterアダプターパターン>2. Proxy vs Adapter（アダプターパターン）</a><ol><li><a href=#共通点-1><strong>共通点</strong></a></li><li><a href=#相違点-1><strong>相違点</strong></a></li><li><a href=#実例での違い-1><strong>実例での違い</strong></a></li></ol></li><li><a href=#3-proxy-vs-facadeファサードパターン>3. Proxy vs Facade（ファサードパターン）</a><ol><li><a href=#共通点-2><strong>共通点</strong></a></li><li><a href=#相違点-2><strong>相違点</strong></a></li><li><a href=#実例での違い-2><strong>実例での違い</strong></a></li></ol></li><li><a href=#まとめ比較表>まとめ比較表</a></li><li><a href=#根拠-6>根拠</a></li><li><a href=#出典-6>出典</a></li></ol></li><li><a href=#参考文献出典>参考文献・出典</a><ol><li><a href=#書籍>書籍</a></li><li><a href=#オンライン情報源日本語>オンライン情報源（日本語）</a></li><li><a href=#オンライン情報源英語>オンライン情報源（英語）</a></li><li><a href=#言語別実装リファレンス>言語別実装リファレンス</a><ol><li><a href=#python>Python</a></li><li><a href=#java>Java</a></li><li><a href=#typescriptjavascript>TypeScript/JavaScript</a></li></ol></li><li><a href=#その他の有用なリソース>その他の有用なリソース</a></li></ol></li><li><a href=#調査まとめ>調査まとめ</a><ol><li><a href=#調査完了項目>調査完了項目</a></li><li><a href=#追加推奨事項>追加推奨事項</a></li></ol></li><li><a href=#信頼度評価基準>信頼度評価基準</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/warehouse/proxy-pattern/><img src=/favicon.png loading=lazy alt="Featured image of post Proxyパターン 調査ドキュメント"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/warehouse/proxy-pattern/>Proxyパターン 調査ドキュメント</a></h2><h3 class=article-subtitle>Proxyパターンに関する包括的な調査ドキュメント。用途、実装例、利点・欠点、他パターンとの比較を網羅</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>1月 02, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>読了時間: 21分</time></div></footer></div></header><section class=article-content><h1 id=proxyパターン-調査ドキュメント>Proxyパターン 調査ドキュメント</h1><p><strong>調査日時</strong>: 2026-01-01<br><strong>調査目的</strong>: Proxyパターン（プロキシパターン）に関する記事執筆のための包括的調査<br><strong>調査者</strong>: Research専門エージェント</p><hr><h2 id=目次>目次</h2><ol><li><a class=link href=#%e6%a6%82%e8%a6%81>概要</a></li><li><a class=link href=#%e7%94%a8%e9%80%94%e3%81%a8%e9%81%a9%e7%94%a8%e5%a0%b4%e9%9d%a2>用途と適用場面</a></li><li><a class=link href=#%e5%9f%ba%e6%9c%ac%e6%a7%8b%e9%80%a0%e3%81%a8%e3%82%b3%e3%83%b3%e3%83%9d%e3%83%bc%e3%83%8d%e3%83%b3%e3%83%88>基本構造とコンポーネント</a></li><li><a class=link href=#%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%82%b3%e3%83%bc%e3%83%89>サンプルコード</a></li><li><a class=link href=#%e5%88%a9%e7%82%b9%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88>利点（メリット）</a></li><li><a class=link href=#%e6%ac%a0%e7%82%b9%e3%83%87%e3%83%a1%e3%83%aa%e3%83%83%e3%83%88>欠点（デメリット）</a></li><li><a class=link href=#%e9%96%a2%e9%80%a3%e3%83%91%e3%82%bf%e3%83%bc%e3%83%b3%e3%81%a8%e3%81%ae%e6%af%94%e8%bc%83>関連パターンとの比較</a></li><li><a class=link href=#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae%e5%87%ba%e5%85%b8>参考文献・出典</a></li></ol><hr><h2 id=概要>概要</h2><h3 id=要点>要点</h3><p>Proxyパターン（プロキシパターン）は、GoF（Gang of Four）デザインパターンの<strong>構造パターン</strong>（Structural Pattern）に分類される代表的なパターンの一つです。</p><p><strong>定義</strong>: あるオブジェクト（RealSubject）へのアクセスを制御し、クライアントとそのオブジェクトの間に「代理オブジェクト（Proxy）」を挟むことで、様々な目的を達成するパターン。</p><h3 id=根拠>根拠</h3><ul><li>Proxyは「代理」という意味であり、実際のオブジェクトの代わりにアクセスを受け取る</li><li>RealSubjectとProxyは同じインターフェース（Subject）を実装するため、クライアントからは透過的に利用できる</li><li>GoFの23のデザインパターンのうちの1つとして、構造パターンカテゴリに分類される</li></ul><h3 id=仮定>仮定</h3><ul><li>読者はオブジェクト指向プログラミングの基本概念を理解している</li><li>インターフェースやポリモーフィズムの概念を理解している</li></ul><h3 id=出典>出典</h3><ol><li><p><strong>Refactoring Guru - Proxy Pattern (日本語版)</strong><br>URL: <a class=link href=https://refactoring.guru/ja/design-patterns/proxy target=_blank rel=noopener>https://refactoring.guru/ja/design-patterns/proxy</a><br>信頼度: ★★★★★ (非常に高い - デザインパターンの定評あるリファレンス)</p></li><li><p><strong>cstechブログ - Proxyパターンとは｜GoFデザインパターンの解説</strong><br>URL: <a class=link href=https://cs-techblog.com/technical/proxy-pattern/ target=_blank rel=noopener>https://cs-techblog.com/technical/proxy-pattern/</a><br>信頼度: ★★★★☆ (高い - 日本語の詳細解説)</p></li><li><p><strong>Wikipedia - Proxy pattern</strong><br>URL: <a class=link href=https://en.wikipedia.org/wiki/Proxy_pattern target=_blank rel=noopener>https://en.wikipedia.org/wiki/Proxy_pattern</a><br>信頼度: ★★★★☆ (高い - 確立された情報源)</p></li><li><p><strong>GeeksforGeeks - Proxy Design Pattern</strong><br>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/proxy-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/proxy-design-pattern/</a><br>信頼度: ★★★★★ (非常に高い - 技術教育サイトとして信頼性高い)</p></li></ol><hr><h2 id=用途と適用場面>用途と適用場面</h2><h3 id=要点-1>要点</h3><p>Proxyパターンは以下のような目的で使用されます：</p><h4 id=1-仮想プロキシvirtual-proxy>1. <strong>仮想プロキシ（Virtual Proxy）</strong></h4><ul><li><strong>目的</strong>: リソースの多い重いオブジェクトの生成を必要になるまで遅延（遅延初期化、Lazy Initialization）</li><li><strong>使用例</strong>:<ul><li>大きな画像ファイルの読み込み</li><li>巨大なデータセットの読み込み</li><li>高コストなデータベース接続</li></ul></li></ul><h4 id=2-保護プロキシprotection-proxy>2. <strong>保護プロキシ（Protection Proxy）</strong></h4><ul><li><strong>目的</strong>: アクセス制御、認証、認可</li><li><strong>使用例</strong>:<ul><li>ユーザー権限に基づくアクセス制御</li><li>セキュリティチェック</li><li>ロールベースのアクセス管理（RBAC）</li></ul></li></ul><h4 id=3-リモートプロキシremote-proxy>3. <strong>リモートプロキシ（Remote Proxy）</strong></h4><ul><li><strong>目的</strong>: 別のアドレス空間（リモートサーバー、別プロセス）にあるオブジェクトのローカル表現を提供</li><li><strong>使用例</strong>:<ul><li>Java RMI (Remote Method Invocation)</li><li>Web サービス、API呼び出し</li><li>分散システムにおける通信の抽象化</li></ul></li></ul><h4 id=4-スマートプロキシsmart-proxysmart-reference>4. <strong>スマートプロキシ（Smart Proxy/Smart Reference）</strong></h4><ul><li><strong>目的</strong>: 実オブジェクトへのアクセス時に追加機能を提供</li><li><strong>使用例</strong>:<ul><li>ロギング（アクセスログの記録）</li><li>参照カウント（Reference Counting）</li><li>キャッシング（計算結果や取得データの保存）</li><li>トランザクション管理</li></ul></li></ul><h4 id=5-キャッシュプロキシcache-proxy>5. <strong>キャッシュプロキシ（Cache Proxy）</strong></h4><ul><li><strong>目的</strong>: 高コストな操作の結果を保存し、パフォーマンスを最適化</li><li><strong>使用例</strong>:<ul><li>API呼び出し結果のキャッシュ</li><li>データベースクエリ結果のキャッシュ</li><li>重い計算結果の保存</li></ul></li></ul><h3 id=根拠-1>根拠</h3><p>これらの分類は、GoFの元の文献およびRefactoring Guru、GeeksforGeeks等の信頼性の高い情報源で一貫して言及されています。</p><h3 id=適用すべき場面>適用すべき場面</h3><p>以下の条件が揃う場合、Proxyパターンの適用を検討すべき：</p><ol><li><strong>アクセス制御が必要</strong>: オブジェクトへのアクセスに認証・認可が必要</li><li><strong>遅延初期化が有効</strong>: オブジェクトの生成コストが高く、必要になるまで遅延させたい</li><li><strong>リモートアクセス</strong>: 別のプロセス、マシン、ネットワーク上のオブジェクトを扱う</li><li><strong>追加機能の注入</strong>: ロギング、キャッシング、監視などの横断的関心事を追加したい</li><li><strong>リソース管理</strong>: メモリや接続などのリソースを効率的に管理したい</li></ol><h3 id=適用を避けるべき場面>適用を避けるべき場面</h3><ol><li><strong>軽量なオブジェクト</strong>: 生成コストが低く、アクセス制御も不要なシンプルなオブジェクト</li><li><strong>不要な抽象化</strong>: プロキシによる追加の複雑さがメリットを上回る場合</li><li><strong>パフォーマンス重視</strong>: プロキシの間接参照がボトルネックになる可能性がある場合</li><li><strong>直接アクセスで問題ない</strong>: セキュリティやリソース管理の懸念がない場合</li></ol><h3 id=出典-1>出典</h3><ol><li><p><strong>Software System Design - Proxy Pattern</strong><br>URL: <a class=link href=https://softwaresystemdesign.com/design-pattern/structural-patterns/proxy/ target=_blank rel=noopener>https://softwaresystemdesign.com/design-pattern/structural-patterns/proxy/</a><br>信頼度: ★★★★☆</p></li><li><p><strong>Number Analytics - Mastering Proxy Pattern in Software Design</strong><br>URL: <a class=link href=https://www.numberanalytics.com/blog/ultimate-guide-proxy-pattern-software-design target=_blank rel=noopener>https://www.numberanalytics.com/blog/ultimate-guide-proxy-pattern-software-design</a><br>信頼度: ★★★★☆</p></li><li><p><strong>ScholarHat - Understanding Proxy Design Pattern</strong><br>URL: <a class=link href=https://www.scholarhat.com/tutorial/designpatterns/proxy-design-pattern target=_blank rel=noopener>https://www.scholarhat.com/tutorial/designpatterns/proxy-design-pattern</a><br>信頼度: ★★★★☆</p></li></ol><hr><h2 id=基本構造とコンポーネント>基本構造とコンポーネント</h2><h3 id=要点-2>要点</h3><p>Proxyパターンは以下の3つの主要コンポーネントで構成されます：</p><h4 id=1-subject共通インターフェース>1. <strong>Subject（共通インターフェース）</strong></h4><ul><li>RealSubjectとProxyが共通して実装するインターフェース</li><li>クライアントが使用する操作を定義</li><li>例: <code>request()</code>, <code>operation()</code>, <code>display()</code>など</li></ul><h4 id=2-realsubject実体オブジェクト>2. <strong>RealSubject（実体オブジェクト）</strong></h4><ul><li>Subjectインターフェースを実装</li><li>実際のビジネスロジックを担当</li><li>プロキシが代理するオブジェクトの実体</li></ul><h4 id=3-proxy代理オブジェクト>3. <strong>Proxy（代理オブジェクト）</strong></h4><ul><li>Subjectインターフェースを実装</li><li>RealSubjectへの参照を保持（コンポジション）</li><li>RealSubjectへのアクセスを制御</li><li>必要に応じて追加機能（ロギング、キャッシュなど）を提供</li><li>クライアントからのリクエストをRealSubjectに委譲</li></ul><h3 id=umlクラス図構造>UMLクラス図構造</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>      +-------------+
</span></span><span class=line><span class=cl>      |   Subject   |&lt;-------------------+
</span></span><span class=line><span class=cl>      +-------------+                    |
</span></span><span class=line><span class=cl>      | +request()  |                    |
</span></span><span class=line><span class=cl>      +-------------+                    |
</span></span><span class=line><span class=cl>          /   \                          |
</span></span><span class=line><span class=cl>         /     \                         |
</span></span><span class=line><span class=cl>+---------------+          +-------------------+
</span></span><span class=line><span class=cl>|  RealSubject  |          |      Proxy        |
</span></span><span class=line><span class=cl>+---------------+          +-------------------+
</span></span><span class=line><span class=cl>| +request()    |          | +request()        |
</span></span><span class=line><span class=cl>+---------------+          | -realSubject      |
</span></span><span class=line><span class=cl>                           +-------------------+
</span></span><span class=line><span class=cl>                                    |
</span></span><span class=line><span class=cl>                                    | (holds reference)
</span></span><span class=line><span class=cl>                                    v
</span></span><span class=line><span class=cl>                           [RealSubject instance]
</span></span></code></pre></td></tr></table></div></div><h3 id=動作フロー>動作フロー</h3><ol><li>クライアントがProxyの<code>request()</code>メソッドを呼び出す</li><li>Proxyが前処理を実行（認証チェック、ロギング、キャッシュ確認など）</li><li>Proxyが必要に応じてRealSubjectを生成（遅延初期化の場合）</li><li>ProxyがRealSubjectの<code>request()</code>メソッドに処理を委譲</li><li>Proxyが後処理を実行（ロギング、結果のキャッシュなど）</li><li>Proxyが結果をクライアントに返す</li></ol><h3 id=根拠-2>根拠</h3><p>この構造は、GoFの原典「Design Patterns: Elements of Reusable Object-Oriented Software」（ISBN: 0-201-63361-2）で定義されており、すべての主要な情報源で一貫して説明されています。</p><h3 id=出典-2>出典</h3><ol><li><p><strong>SourceMaking - Proxy Design Pattern</strong><br>URL: <a class=link href=https://sourcemaking.com/design_patterns/proxy target=_blank rel=noopener>https://sourcemaking.com/design_patterns/proxy</a><br>信頼度: ★★★★★ (UML図と詳細説明)</p></li><li><p><strong>OODesign - Proxy Pattern</strong><br>URL: <a class=link href=https://www.oodesign.com/proxy-pattern target=_blank rel=noopener>https://www.oodesign.com/proxy-pattern</a><br>信頼度: ★★★★☆</p></li><li><p><strong>Gang of Four (GoF) - Design Patterns Book</strong><br>ISBN: 0-201-63361-2<br>出版: Addison-Wesley, 1994<br>著者: Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides<br>信頼度: ★★★★★ (原典)</p></li></ol><hr><h2 id=サンプルコード>サンプルコード</h2><h3 id=要点-3>要点</h3><p>以下に、主要プログラミング言語でのProxyパターンの実装例を示します。各例は実際に動作するコードです。</p><hr><h3 id=1-python実装例>1. Python実装例</h3><h4 id=11-仮想プロキシvirtual-proxy--画像の遅延読み込み>1.1 仮想プロキシ（Virtual Proxy）- 画像の遅延読み込み</h4><p><strong>言語</strong>: Python 3.7+<br><strong>外部依存</strong>: なし（標準ライブラリのみ）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>abc</span> <span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Subject Interface</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Image</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RealSubject</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealImage</span><span class=p>(</span><span class=n>Image</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_load_from_disk</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_load_from_disk</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Loading image from disk: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 実際には重い処理（ファイルI/O、デコードなど）</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>image_data</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;Image data of </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Displaying </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Proxy</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ProxyImage</span><span class=p>(</span><span class=n>Image</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># 遅延初期化のため、最初はNone</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 必要になるまでRealImageを生成しない（遅延初期化）</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=o>=</span> <span class=n>RealImage</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>filename</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># プロキシを作成（この時点では画像は読み込まれない）</span>
</span></span><span class=line><span class=cl>    <span class=n>image1</span> <span class=o>=</span> <span class=n>ProxyImage</span><span class=p>(</span><span class=s2>&#34;photo1.jpg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image2</span> <span class=o>=</span> <span class=n>ProxyImage</span><span class=p>(</span><span class=s2>&#34;photo2.jpg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;--- 画像を表示（初回） ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image1</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># この時点で初めて読み込まれる</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>--- 画像を再表示 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image1</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># 既に読み込み済みなので再読み込みしない</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>--- 別の画像を表示 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>image2</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># この時点で読み込まれる</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>出力例</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>--- 画像を表示（初回） ---
</span></span><span class=line><span class=cl>Loading image from disk: photo1.jpg
</span></span><span class=line><span class=cl>Displaying photo1.jpg
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- 画像を再表示 ---
</span></span><span class=line><span class=cl>Displaying photo1.jpg
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- 別の画像を表示 ---
</span></span><span class=line><span class=cl>Loading image from disk: photo2.jpg
</span></span><span class=line><span class=cl>Displaying photo2.jpg
</span></span></code></pre></td></tr></table></div></div><h4 id=12-保護プロキシprotection-proxy--アクセス制御>1.2 保護プロキシ（Protection Proxy）- アクセス制御</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Subject Interface</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SecretDocument</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>view</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RealSubject</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ConfidentialDocument</span><span class=p>(</span><span class=n>SecretDocument</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>content</span> <span class=o>=</span> <span class=n>content</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>view</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;機密情報: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>content</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Protection Proxy</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DocumentProtectionProxy</span><span class=p>(</span><span class=n>SecretDocument</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>document</span><span class=p>,</span> <span class=n>user_role</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>document</span> <span class=o>=</span> <span class=n>document</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>user_role</span> <span class=o>=</span> <span class=n>user_role</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>view</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>user_role</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&#34;admin&#34;</span><span class=p>,</span> <span class=s2>&#34;manager&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;アクセス許可: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>user_role</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>document</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;アクセス拒否: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>user_role</span><span class=si>}</span><span class=s2>には閲覧権限がありません&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>real_doc</span> <span class=o>=</span> <span class=n>ConfidentialDocument</span><span class=p>(</span><span class=s2>&#34;トップシークレット情報&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 管理者としてアクセス</span>
</span></span><span class=line><span class=cl>    <span class=n>admin_proxy</span> <span class=o>=</span> <span class=n>DocumentProtectionProxy</span><span class=p>(</span><span class=n>real_doc</span><span class=p>,</span> <span class=s2>&#34;admin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>admin_proxy</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 一般ユーザーとしてアクセス</span>
</span></span><span class=line><span class=cl>    <span class=n>guest_proxy</span> <span class=o>=</span> <span class=n>DocumentProtectionProxy</span><span class=p>(</span><span class=n>real_doc</span><span class=p>,</span> <span class=s2>&#34;guest&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>guest_proxy</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=13-キャッシュプロキシcache-proxy>1.3 キャッシュプロキシ（Cache Proxy）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Subject Interface</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DataService</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nd>@abstractmethod</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RealSubject</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DatabaseService</span><span class=p>(</span><span class=n>DataService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;データベースから取得: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 実際には重いDB操作</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;Data for </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cache Proxy</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CachingProxy</span><span class=p>(</span><span class=n>DataService</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span> <span class=o>=</span> <span class=n>DatabaseService</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fetch_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;キャッシュから取得: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># キャッシュになければ実サービスから取得</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_service</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_cache</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>service</span> <span class=o>=</span> <span class=n>CachingProxy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;--- 1回目の取得 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>data1</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>(</span><span class=s2>&#34;user:1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>--- 2回目の取得（同じキー） ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>data2</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>(</span><span class=s2>&#34;user:1&#34;</span><span class=p>)</span>  <span class=c1># キャッシュから取得</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>--- 別のキーを取得 ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>data3</span> <span class=o>=</span> <span class=n>service</span><span class=o>.</span><span class=n>fetch_data</span><span class=p>(</span><span class=s2>&#34;user:2&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=2-java実装例>2. Java実装例</h3><h4 id=21-仮想プロキシvirtual-proxy>2.1 仮想プロキシ（Virtual Proxy）</h4><p><strong>言語</strong>: Java 11+<br><strong>外部依存</strong>: なし</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Subject Interface</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Image</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>display</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// RealSubject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>RealImage</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Image</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>RealImage</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>filename</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>filename</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>loadFromDisk</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>loadFromDisk</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Loading image from disk: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>filename</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 実際には重い処理</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>display</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Displaying &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>filename</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// Proxy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ProxyImage</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Image</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>RealImage</span><span class=w> </span><span class=n>realImage</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>ProxyImage</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>filename</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>filename</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>filename</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>display</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// 遅延初期化</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>realImage</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>realImage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RealImage</span><span class=p>(</span><span class=n>filename</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>realImage</span><span class=p>.</span><span class=na>display</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// 使用例</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ProxyPatternDemo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Image</span><span class=w> </span><span class=n>image1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ProxyImage</span><span class=p>(</span><span class=s>&#34;photo1.jpg&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Image</span><span class=w> </span><span class=n>image2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ProxyImage</span><span class=p>(</span><span class=s>&#34;photo2.jpg&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;--- 画像を表示（初回） ---&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>image1</span><span class=p>.</span><span class=na>display</span><span class=p>();</span><span class=w>  </span><span class=c1>// この時点で読み込まれる</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n--- 画像を再表示 ---&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>image1</span><span class=p>.</span><span class=na>display</span><span class=p>();</span><span class=w>  </span><span class=c1>// 再読み込みしない</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n--- 別の画像を表示 ---&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>image2</span><span class=p>.</span><span class=na>display</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=22-スマートプロキシsmart-proxy--ロギング機能>2.2 スマートプロキシ（Smart Proxy）- ロギング機能</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Subject Interface</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Service</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>doWork</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// RealSubject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>RealService</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Service</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doWork</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;RealServiceで作業を実行中...&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// Smart Proxy (Logging)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>LoggingProxy</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Service</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>RealService</span><span class=w> </span><span class=n>realService</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>LoggingProxy</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>realService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>RealService</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doWork</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logBefore</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>realService</span><span class=p>.</span><span class=na>doWork</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>logAfter</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>logBefore</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;[LOG] 作業開始: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>java</span><span class=p>.</span><span class=na>time</span><span class=p>.</span><span class=na>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>logAfter</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;[LOG] 作業完了: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>java</span><span class=p>.</span><span class=na>time</span><span class=p>.</span><span class=na>LocalDateTime</span><span class=p>.</span><span class=na>now</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=c1>// 使用例</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>SmartProxyDemo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Service</span><span class=w> </span><span class=n>service</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>LoggingProxy</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>service</span><span class=p>.</span><span class=na>doWork</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><hr><h3 id=3-typescript実装例>3. TypeScript実装例</h3><h4 id=31-保護プロキシprotection-proxy>3.1 保護プロキシ（Protection Proxy）</h4><p><strong>言語</strong>: TypeScript 4.5+<br><strong>外部依存</strong>: なし</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// Subject Interface
</span></span></span><span class=line><span class=cl><span class=kr>interface</span> <span class=nx>Document</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>read</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>write</span><span class=p>(</span><span class=nx>content</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// RealSubject
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>ConfidentialDocument</span> <span class=kr>implements</span> <span class=nx>Document</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>content</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nx>content</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=nx>content</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>read</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>content</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>write</span><span class=p>(</span><span class=nx>content</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=nx>content</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;文書が更新されました&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Protection Proxy
</span></span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>DocumentProxy</span> <span class=kr>implements</span> <span class=nx>Document</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nb>document</span><span class=o>:</span> <span class=nx>ConfidentialDocument</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>userRole</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=nb>document</span><span class=o>:</span> <span class=nx>ConfidentialDocument</span><span class=p>,</span> <span class=nx>userRole</span>: <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nb>document</span> <span class=o>=</span> <span class=nb>document</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>userRole</span> <span class=o>=</span> <span class=nx>userRole</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>read</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>([</span><span class=s2>&#34;admin&#34;</span><span class=p>,</span> <span class=s2>&#34;editor&#34;</span><span class=p>,</span> <span class=s2>&#34;viewer&#34;</span><span class=p>].</span><span class=nx>includes</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>userRole</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`アクセス許可: </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>userRole</span><span class=si>}</span><span class=sb>が読み取り`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nb>document</span><span class=p>.</span><span class=nx>read</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;アクセス拒否: 読み取り権限がありません&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>write</span><span class=p>(</span><span class=nx>content</span>: <span class=kt>string</span><span class=p>)</span><span class=o>:</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>userRole</span> <span class=o>===</span> <span class=s2>&#34;admin&#34;</span> <span class=o>||</span> <span class=k>this</span><span class=p>.</span><span class=nx>userRole</span> <span class=o>===</span> <span class=s2>&#34;editor&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`アクセス許可: </span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>userRole</span><span class=si>}</span><span class=sb>が書き込み`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=p>.</span><span class=nb>document</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>content</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;アクセス拒否: 書き込み権限がありません&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 使用例
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>realDoc</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ConfidentialDocument</span><span class=p>(</span><span class=s2>&#34;機密情報&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 管理者としてアクセス
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>adminProxy</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DocumentProxy</span><span class=p>(</span><span class=nx>realDoc</span><span class=p>,</span> <span class=s2>&#34;admin&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>adminProxy</span><span class=p>.</span><span class=nx>read</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=nx>adminProxy</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s2>&#34;更新された機密情報&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 閲覧者としてアクセス
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>viewerProxy</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DocumentProxy</span><span class=p>(</span><span class=nx>realDoc</span><span class=p>,</span> <span class=s2>&#34;viewer&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>viewerProxy</span><span class=p>.</span><span class=nx>read</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>viewerProxy</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=s2>&#34;これは失敗する&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=32-javascriptネイティブproxyオブジェクト>3.2 JavaScriptネイティブProxyオブジェクト</h4><p><strong>言語</strong>: JavaScript ES6+ / TypeScript<br><strong>外部依存</strong>: なし</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=c1>// 実オブジェクト
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>api</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getData</span><span class=p>(</span><span class=nx>id</span>: <span class=kt>number</span><span class=p>)</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`APIからデータ取得: ID </span><span class=si>${</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sb>`Data </span><span class=si>${</span><span class=nx>id</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nx>getSecret</span><span class=p>()</span><span class=o>:</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;classified&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Proxyハンドラー（ロギングとアクセス制御）
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>handler</span>: <span class=kt>ProxyHandler</span><span class=p>&lt;</span><span class=nt>typeof</span> <span class=na>api</span><span class=p>&gt;</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>get</span><span class=p>(</span><span class=nx>target</span><span class=p>,</span> <span class=nx>prop</span><span class=p>,</span> <span class=nx>receiver</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`[Proxy] メソッド呼び出し: </span><span class=si>${</span><span class=nb>String</span><span class=p>(</span><span class=nx>prop</span><span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 機密メソッドへのアクセス制御
</span></span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>prop</span> <span class=o>===</span> <span class=s2>&#34;getSecret&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s2>&#34;アクセス拒否: 機密情報にアクセスできません&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>Reflect</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=nx>target</span><span class=p>,</span> <span class=nx>prop</span><span class=p>,</span> <span class=nx>receiver</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Proxyの作成
</span></span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>proxyApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Proxy</span><span class=p>(</span><span class=nx>api</span><span class=p>,</span> <span class=nx>handler</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 使用例
</span></span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>proxyApi</span><span class=p>.</span><span class=nx>getData</span><span class=p>(</span><span class=mi>123</span><span class=p>));</span>  <span class=c1>// 成功
</span></span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>proxyApi</span><span class=p>.</span><span class=nx>getSecret</span><span class=p>());</span>  <span class=c1>// エラー
</span></span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>message</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=根拠-3>根拠</h3><p>これらのコード例は、以下の信頼性の高い情報源から参照・検証しています：</p><ul><li>Refactoring Guruの各言語実装例</li><li>GeeksforGeeksのサンプルコード</li><li>公式ドキュメント（Python、Java、TypeScript）</li></ul><h3 id=出典-3>出典</h3><ol><li><p><strong>Refactoring Guru - Proxy in Python</strong><br>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy/python/example target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy/python/example</a><br>信頼度: ★★★★★</p></li><li><p><strong>Refactoring Guru - Proxy in TypeScript</strong><br>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy/typescript/example target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy/typescript/example</a><br>信頼度: ★★★★★</p></li><li><p><strong>GeeksforGeeks - Proxy Design Pattern for Object Communication in Python</strong><br>URL: <a class=link href=https://www.geeksforgeeks.org/python/proxy-design-pattern-for-object-communication-in-python/ target=_blank rel=noopener>https://www.geeksforgeeks.org/python/proxy-design-pattern-for-object-communication-in-python/</a><br>信頼度: ★★★★★</p></li><li><p><strong>Java Design Patterns - Proxy Pattern</strong><br>URL: <a class=link href=https://java-design-patterns.com/patterns/proxy/ target=_blank rel=noopener>https://java-design-patterns.com/patterns/proxy/</a><br>信頼度: ★★★★★</p></li><li><p><strong>SBCODE - Proxy Design Patterns in TypeScript</strong><br>URL: <a class=link href=https://sbcode.net/typescript/proxy/ target=_blank rel=noopener>https://sbcode.net/typescript/proxy/</a><br>信頼度: ★★★★☆</p></li></ol><hr><h2 id=利点メリット>利点（メリット）</h2><h3 id=要点-4>要点</h3><p>Proxyパターンを適用することで得られる主な利点：</p><h4 id=1-アクセス制御の柔軟性>1. <strong>アクセス制御の柔軟性</strong></h4><ul><li><strong>詳細</strong>: オブジェクトへのアクセスを細かく制御できる</li><li><strong>具体例</strong>:<ul><li>ユーザー権限に基づいた認可</li><li>ロールベースアクセス制御（RBAC）</li><li>セキュリティポリシーの一元管理</li></ul></li></ul><h4 id=2-パフォーマンスの最適化>2. <strong>パフォーマンスの最適化</strong></h4><ul><li><strong>詳細</strong>: 遅延初期化とキャッシングによりリソース使用を最適化</li><li><strong>具体例</strong>:<ul><li>重いオブジェクトの生成を必要になるまで遅延</li><li>高コストな操作（DB、API呼び出し）の結果をキャッシュ</li><li>メモリ使用量の削減</li></ul></li></ul><h4 id=3-開放閉鎖原則ocpの実現>3. <strong>開放/閉鎖原則（OCP）の実現</strong></h4><ul><li><strong>詳細</strong>: 既存コードを変更せずに機能を追加できる</li><li><strong>具体例</strong>:<ul><li>RealSubjectのコードを変更せずにロギング機能を追加</li><li>横断的関心事（ロギング、監視、キャッシング）を分離</li></ul></li></ul><h4 id=4-疎結合の促進>4. <strong>疎結合の促進</strong></h4><ul><li><strong>詳細</strong>: クライアントとRealSubjectを分離し、依存関係を減らす</li><li><strong>具体例</strong>:<ul><li>クライアントはSubjectインターフェースのみに依存</li><li>RealSubjectの実装変更がクライアントに影響しない</li></ul></li></ul><h4 id=5-リモートアクセスの透過性>5. <strong>リモートアクセスの透過性</strong></h4><ul><li><strong>詳細</strong>: ネットワーク越しのオブジェクトをローカルオブジェクトのように扱える</li><li><strong>具体例</strong>:<ul><li>分散システムでの通信の詳細を隠蔽</li><li>ネットワークエラーのハンドリングを一元化</li></ul></li></ul><h4 id=6-横断的関心事の一元管理>6. <strong>横断的関心事の一元管理</strong></h4><ul><li><strong>詳細</strong>: ロギング、監視、トランザクション管理などを集約</li><li><strong>具体例</strong>:<ul><li>すべてのアクセスログを一箇所で記録</li><li>パフォーマンス測定を透過的に追加</li><li>参照カウントやリソース管理</li></ul></li></ul><h4 id=7-単一責任原則srpの維持>7. <strong>単一責任原則（SRP）の維持</strong></h4><ul><li><strong>詳細</strong>: RealSubjectはコアロジックに専念でき、付加機能はProxyが担当</li><li><strong>具体例</strong>:<ul><li>ビジネスロジックとインフラ層の分離</li><li>テストしやすいコード構造</li></ul></li></ul><h3 id=根拠-4>根拠</h3><p>これらのメリットは、GoFの原典およびソフトウェア工学の原則（SOLID原則など）に基づいています。また、実際のプロダクション環境での使用実績から検証されています。</p><h3 id=出典-4>出典</h3><ol><li><p><strong>GeeksforGeeks - Proxy Design Pattern</strong><br>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/proxy-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/proxy-design-pattern/</a><br>信頼度: ★★★★★</p></li><li><p><strong>Generalist Programmer - Proxy Pattern Guide</strong><br>URL: <a class=link href=https://generalistprogrammer.com/glossary/proxy-pattern target=_blank rel=noopener>https://generalistprogrammer.com/glossary/proxy-pattern</a><br>信頼度: ★★★★☆</p></li><li><p><strong>Refactoring Guru - Proxy Pattern</strong><br>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy</a><br>信頼度: ★★★★★</p></li></ol><hr><h2 id=欠点デメリット>欠点（デメリット）</h2><h3 id=要点-5>要点</h3><p>Proxyパターンには以下のような欠点や注意点があります：</p><h4 id=1-複雑さの増加>1. <strong>複雑さの増加</strong></h4><ul><li><strong>詳細</strong>: クラス数とレイヤーが増え、システムが複雑化</li><li><strong>影響</strong>:<ul><li>コードの可読性低下</li><li>新規開発者の学習コスト増加</li><li>デバッグの難易度上昇</li></ul></li><li><strong>対策</strong>: 適切なドキュメンテーションと命名規則</li></ul><h4 id=2-パフォーマンスオーバーヘッド>2. <strong>パフォーマンスオーバーヘッド</strong></h4><ul><li><strong>詳細</strong>: 間接参照による処理の遅延</li><li><strong>影響</strong>:<ul><li>単純な操作でも追加のメソッド呼び出しが発生</li><li>プロキシのチェーン（多段プロキシ）でオーバーヘッド増大</li><li>リアルタイム性が要求されるシステムでは問題に</li></ul></li><li><strong>対策</strong>: パフォーマンス測定とプロファイリング、必要最小限の使用</li></ul><h4 id=3-不要な抽象化>3. <strong>不要な抽象化</strong></h4><ul><li><strong>詳細</strong>: 軽量で単純なオブジェクトにプロキシを使うと過剰設計に</li><li><strong>影響</strong>:<ul><li>YAGNIの原則（You Aren&rsquo;t Gonna Need It）に反する</li><li>開発コストの増加</li><li>メンテナンスコストの増加</li></ul></li><li><strong>対策</strong>: 実際に必要になってから導入（Premature Optimizationを避ける）</li></ul><h4 id=4-潜在的なボトルネック>4. <strong>潜在的なボトルネック</strong></h4><ul><li><strong>詳細</strong>: すべてのリクエストがプロキシを経由するため単一障害点に</li><li><strong>影響</strong>:<ul><li>プロキシ自体がパフォーマンスのボトルネックに</li><li>スケーラビリティの制約</li><li>フェイルオーバーの考慮が必要</li></ul></li><li><strong>対策</strong>: プロキシの負荷分散、冗長化</li></ul><h4 id=5-インターフェース同期の必要性>5. <strong>インターフェース同期の必要性</strong></h4><ul><li><strong>詳細</strong>: ProxyとRealSubjectのインターフェースを常に一致させる必要がある</li><li><strong>影響</strong>:<ul><li>RealSubjectの変更時にProxyも更新が必要</li><li>同期漏れによるバグのリスク</li><li>メンテナンスコストの増加</li></ul></li><li><strong>対策</strong>: 自動テスト、インターフェース定義の厳格化</li></ul><h4 id=6-状態管理の複雑化>6. <strong>状態管理の複雑化</strong></h4><ul><li><strong>詳細</strong>: キャッシュや参照カウントなどの状態管理が必要</li><li><strong>影響</strong>:<ul><li>状態の不整合のリスク</li><li>マルチスレッド環境での同期問題</li><li>メモリリークの可能性</li></ul></li><li><strong>対策</strong>: 適切な状態管理戦略、スレッドセーフな実装</li></ul><h4 id=7-デバッグの困難さ>7. <strong>デバッグの困難さ</strong></h4><ul><li><strong>詳細</strong>: 実際の処理がどこで行われているか追跡しにくい</li><li><strong>影響</strong>:<ul><li>スタックトレースが深くなる</li><li>問題の特定に時間がかかる</li><li>ログの解析が複雑に</li></ul></li><li><strong>対策</strong>: 詳細なロギング、適切な命名、デバッグツールの活用</li></ul><h3 id=根拠-5>根拠</h3><p>これらの欠点は、実際のソフトウェア開発での経験と、デザインパターンのアンチパターン研究から明らかになっています。</p><h3 id=出典-5>出典</h3><ol><li><p><strong>GeeksforGeeks - Proxy Design Pattern</strong><br>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/proxy-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/proxy-design-pattern/</a><br>信頼度: ★★★★★</p></li><li><p><strong>DiverseDaily - Understanding the Proxy Pattern</strong><br>URL: <a class=link href=https://diversedaily.com/understanding-the-proxy-pattern-a-comprehensive-guide-with-coding-examples/ target=_blank rel=noopener>https://diversedaily.com/understanding-the-proxy-pattern-a-comprehensive-guide-with-coding-examples/</a><br>信頼度: ★★★★☆</p></li><li><p><strong>Java Development Journal - Proxy Design Pattern</strong><br>URL: <a class=link href=https://javadevjournal.com/java-design-patterns/proxy-design-pattern/ target=_blank rel=noopener>https://javadevjournal.com/java-design-patterns/proxy-design-pattern/</a><br>信頼度: ★★★★☆</p></li></ol><hr><h2 id=関連パターンとの比較>関連パターンとの比較</h2><h3 id=要点-6>要点</h3><p>Proxyパターンは他の構造パターンと似ている部分がありますが、目的と使用場面が異なります。</p><hr><h3 id=1-proxy-vs-decoratorデコレーターパターン>1. Proxy vs Decorator（デコレーターパターン）</h3><h4 id=共通点><strong>共通点</strong></h4><ul><li>両方とも同じインターフェースを実装</li><li>両方とも元のオブジェクトへの参照を持つ</li><li>両方とも処理を委譲する</li></ul><h4 id=相違点><strong>相違点</strong></h4><div class=table-wrapper><table><thead><tr><th>観点</th><th>Proxy</th><th>Decorator</th></tr></thead><tbody><tr><td><strong>主な目的</strong></td><td><strong>アクセス制御</strong>、遅延初期化、リモートアクセス</td><td><strong>機能の追加・拡張</strong></td></tr><tr><td><strong>インスタンス管理</strong></td><td>プロキシが実オブジェクトのライフサイクルを管理することが多い</td><td>デコレーターは既存オブジェクトをラップするだけ</td></tr><tr><td><strong>意図</strong></td><td>クライアントから実オブジェクトへのアクセスを<strong>制御</strong></td><td>実オブジェクトの機能を<strong>動的に拡張</strong></td></tr><tr><td><strong>透過性</strong></td><td>クライアントは代理されていることを意識しない</td><td>クライアントは装飾されていることを認識することもある</td></tr><tr><td><strong>複数適用</strong></td><td>通常、1つのプロキシ</td><td>複数のデコレーターをチェーン可能（積み重ね）</td></tr><tr><td><strong>使用例</strong></td><td>アクセス制御、遅延読み込み、キャッシング</td><td>ロギング、暗号化、圧縮の追加</td></tr></tbody></table></div><h4 id=実例での違い><strong>実例での違い</strong></h4><p><strong>Proxy例</strong>: 画像の遅延読み込み</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>ImageProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span> <span class=o>=</span> <span class=n>RealImage</span><span class=p>()</span>  <span class=c1># 必要になるまで生成しない</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_real_image</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Decorator例</strong>: テキストに装飾を追加</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>BoldDecorator</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_text</span> <span class=o>=</span> <span class=n>text</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>render</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;&lt;b&gt;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_text</span><span class=o>.</span><span class=n>render</span><span class=p>()</span><span class=si>}</span><span class=s2>&lt;/b&gt;&#34;</span>  <span class=c1># 機能を追加</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=2-proxy-vs-adapterアダプターパターン>2. Proxy vs Adapter（アダプターパターン）</h3><h4 id=共通点-1><strong>共通点</strong></h4><ul><li>両方とも元のオブジェクトをラップ</li><li>クライアントと実オブジェクトの間に位置</li></ul><h4 id=相違点-1><strong>相違点</strong></h4><div class=table-wrapper><table><thead><tr><th>観点</th><th>Proxy</th><th>Adapter</th></tr></thead><tbody><tr><td><strong>主な目的</strong></td><td>アクセス制御、管理</td><td><strong>インターフェース変換</strong></td></tr><tr><td><strong>インターフェース</strong></td><td>実オブジェクトと<strong>同じ</strong>インターフェース</td><td>実オブジェクトとは<strong>異なる</strong>インターフェース</td></tr><tr><td><strong>意図</strong></td><td>アクセスの制御・最適化</td><td>互換性のないインターフェースの橋渡し</td></tr><tr><td><strong>既存コード</strong></td><td>既存コードを変更せずに機能追加</td><td>既存の不互換なコードを利用可能に</td></tr><tr><td><strong>使用例</strong></td><td>セキュリティ、キャッシング</td><td>レガシーシステム統合、サードパーティライブラリ適合</td></tr></tbody></table></div><h4 id=実例での違い-1><strong>実例での違い</strong></h4><p><strong>Proxy例</strong>: 同じインターフェース</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>SubjectInterface</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>RealSubject</span><span class=p>(</span><span class=n>SubjectInterface</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Proxy</span><span class=p>(</span><span class=n>SubjectInterface</span><span class=p>):</span>  <span class=c1># 同じインターフェース</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>request</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Adapter例</strong>: 異なるインターフェース</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>OldInterface</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>old_method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NewInterface</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Adapter</span><span class=p>(</span><span class=n>NewInterface</span><span class=p>):</span>  <span class=c1># 新しいインターフェース</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>old_obj</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>old_obj</span> <span class=o>=</span> <span class=n>old_obj</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>new_method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>old_obj</span><span class=o>.</span><span class=n>old_method</span><span class=p>()</span>  <span class=c1># 変換</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=3-proxy-vs-facadeファサードパターン>3. Proxy vs Facade（ファサードパターン）</h3><h4 id=共通点-2><strong>共通点</strong></h4><ul><li>複雑さを隠蔽</li><li>クライアントとサブシステムの間に位置</li></ul><h4 id=相違点-2><strong>相違点</strong></h4><div class=table-wrapper><table><thead><tr><th>観点</th><th>Proxy</th><th>Facade</th></tr></thead><tbody><tr><td><strong>主な目的</strong></td><td>単一オブジェクトへのアクセス制御</td><td><strong>複数の複雑なサブシステム</strong>への統一インターフェース提供</td></tr><tr><td><strong>関係性</strong></td><td>1対1の関係</td><td>1対多の関係</td></tr><tr><td><strong>インターフェース</strong></td><td>実オブジェクトと同じ</td><td>新しい簡略化されたインターフェース</td></tr><tr><td><strong>目的</strong></td><td>制御、管理、最適化</td><td>単純化、使いやすさの向上</td></tr><tr><td><strong>使用例</strong></td><td>個別オブジェクトの保護</td><td>複雑なライブラリ・APIの簡略化</td></tr></tbody></table></div><h4 id=実例での違い-2><strong>実例での違い</strong></h4><p><strong>Proxy例</strong>: 単一オブジェクトのアクセス制御</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>DatabaseProxy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>query</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sql</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 認証チェック</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>check_permission</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_real_db</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=n>sql</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Facade例</strong>: 複数サブシステムの統一インターフェース</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>OrderFacade</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>place_order</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>order</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 複数のサブシステムを調整</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>inventory</span><span class=o>.</span><span class=n>check_stock</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>payment</span><span class=o>.</span><span class=n>process</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shipping</span><span class=o>.</span><span class=n>schedule</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>notification</span><span class=o>.</span><span class=n>send_confirmation</span><span class=p>(</span><span class=n>order</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=まとめ比較表>まとめ比較表</h3><div class=table-wrapper><table><thead><tr><th>パターン</th><th>主目的</th><th>インターフェース</th><th>関係</th><th>主な使用場面</th></tr></thead><tbody><tr><td><strong>Proxy</strong></td><td>アクセス制御</td><td>同じ</td><td>1:1</td><td>セキュリティ、遅延初期化、キャッシュ</td></tr><tr><td><strong>Decorator</strong></td><td>機能拡張</td><td>同じ</td><td>1:1（チェーン可）</td><td>動的な機能追加、責任の追加</td></tr><tr><td><strong>Adapter</strong></td><td>インターフェース変換</td><td>異なる</td><td>1:1</td><td>レガシー統合、互換性</td></tr><tr><td><strong>Facade</strong></td><td>簡略化</td><td>新規</td><td>1:多</td><td>複雑なサブシステムの統一</td></tr></tbody></table></div><h3 id=根拠-6>根拠</h3><p>これらの比較は、GoFの原典、およびRefactoring Guru、GeeksforGeeks等の信頼性の高い情報源で一貫して説明されています。</p><h3 id=出典-6>出典</h3><ol><li><p><strong>GeeksforGeeks - Difference Between Facade, Proxy, Adapter, and Decorator</strong><br>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/difference-between-the-facade-proxy-adapter-and-decorator-design-patterns/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/difference-between-the-facade-proxy-adapter-and-decorator-design-patterns/</a><br>信頼度: ★★★★★</p></li><li><p><strong>Baeldung - Proxy, Decorator, Adapter and Bridge Patterns</strong><br>URL: <a class=link href=https://www.baeldung.com/java-structural-design-patterns target=_blank rel=noopener>https://www.baeldung.com/java-structural-design-patterns</a><br>信頼度: ★★★★★</p></li><li><p><strong>doeken.org - Decorator Pattern vs. Proxy Pattern</strong><br>URL: <a class=link href=https://doeken.org/blog/decorator-vs-proxy-pattern target=_blank rel=noopener>https://doeken.org/blog/decorator-vs-proxy-pattern</a><br>信頼度: ★★★★☆</p></li><li><p><strong>Stack Overflow - Difference between Facade, Proxy, Adapter and Decorator</strong><br>URL: <a class=link href=https://stackoverflow.com/questions/3489131/difference-between-the-facade-proxy-adapter-and-decorator-design-patterns target=_blank rel=noopener>https://stackoverflow.com/questions/3489131/difference-between-the-facade-proxy-adapter-and-decorator-design-patterns</a><br>信頼度: ★★★★★（コミュニティ検証済み）</p></li></ol><hr><h2 id=参考文献出典>参考文献・出典</h2><h3 id=書籍>書籍</h3><ol><li><strong>Design Patterns: Elements of Reusable Object-Oriented Software</strong><ul><li>著者: Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides (Gang of Four)</li><li>出版社: Addison-Wesley Professional</li><li>出版年: 1994</li><li>ISBN-10: 0-201-63361-2</li><li>ISBN-13: 978-0201633610</li><li><strong>日本語版</strong>: オブジェクト指向における再利用のためのデザインパターン<ul><li>出版社: ソフトバンククリエイティブ</li><li>ISBN: 978-4797311266</li><li>ASIN: 4797311126</li></ul></li><li>信頼度: ★★★★★ (デザインパターンの原典)</li><li>備考: Proxyパターンが構造パターンとして定義されている原典</li></ul></li></ol><h3 id=オンライン情報源日本語>オンライン情報源（日本語）</h3><ol><li><p><strong>Refactoring Guru - Proxy（日本語版）</strong></p><ul><li>URL: <a class=link href=https://refactoring.guru/ja/design-patterns/proxy target=_blank rel=noopener>https://refactoring.guru/ja/design-patterns/proxy</a></li><li>信頼度: ★★★★★</li><li>特徴: 図解が豊富、実装例が充実</li></ul></li><li><p><strong>cstechブログ - Proxyパターンとは｜GoFデザインパターンの解説</strong></p><ul><li>URL: <a class=link href=https://cs-techblog.com/technical/proxy-pattern/ target=_blank rel=noopener>https://cs-techblog.com/technical/proxy-pattern/</a></li><li>信頼度: ★★★★☆</li><li>特徴: 日本語での詳細な解説</li></ul></li><li><p><strong>Zenn - デザインパターンを学ぶ #10 プロキシ（Proxy）</strong></p><ul><li>URL: <a class=link href=https://zenn.dev/tajicode/articles/7ce548d94edf01 target=_blank rel=noopener>https://zenn.dev/tajicode/articles/7ce548d94edf01</a></li><li>信頼度: ★★★★☆</li><li>特徴: わかりやすい図解と実例</li></ul></li><li><p><strong>lightgauge.net - Proxyパターンとは | GoFデザインパターン</strong></p><ul><li>URL: <a class=link href=https://lightgauge.net/journal/object-oriented/proxy-pattern target=_blank rel=noopener>https://lightgauge.net/journal/object-oriented/proxy-pattern</a></li><li>信頼度: ★★★★☆</li></ul></li><li><p><strong>tamotech.blog - 「Proxy」パターンとは？サンプルを踏まえてわかりやすく解説！【Java】</strong></p><ul><li>URL: <a class=link href=https://tamotech.blog/2024/08/17/proxy/ target=_blank rel=noopener>https://tamotech.blog/2024/08/17/proxy/</a></li><li>信頼度: ★★★★☆</li><li>特徴: Javaでの実装例が詳細</li></ul></li></ol><h3 id=オンライン情報源英語>オンライン情報源（英語）</h3><ol><li><p><strong>Refactoring Guru - Proxy</strong></p><ul><li>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy</a></li><li>信頼度: ★★★★★</li><li>特徴: 多言語対応の実装例、UML図</li></ul></li><li><p><strong>GeeksforGeeks - Proxy Design Pattern</strong></p><ul><li>URL: <a class=link href=https://www.geeksforgeeks.org/system-design/proxy-design-pattern/ target=_blank rel=noopener>https://www.geeksforgeeks.org/system-design/proxy-design-pattern/</a></li><li>信頼度: ★★★★★</li><li>特徴: 詳細な解説とコード例、インタビュー対策にも有用</li></ul></li><li><p><strong>Wikipedia - Proxy pattern</strong></p><ul><li>URL: <a class=link href=https://en.wikipedia.org/wiki/Proxy_pattern target=_blank rel=noopener>https://en.wikipedia.org/wiki/Proxy_pattern</a></li><li>信頼度: ★★★★☆</li><li>特徴: 歴史的背景と学術的視点</li></ul></li><li><p><strong>SourceMaking - Proxy Design Pattern</strong></p><ul><li>URL: <a class=link href=https://sourcemaking.com/design_patterns/proxy target=_blank rel=noopener>https://sourcemaking.com/design_patterns/proxy</a></li><li>信頼度: ★★★★★</li><li>特徴: UML図と構造の詳細な説明</li></ul></li><li><p><strong>OODesign - Proxy Pattern</strong></p><ul><li>URL: <a class=link href=https://www.oodesign.com/proxy-pattern target=_blank rel=noopener>https://www.oodesign.com/proxy-pattern</a></li><li>信頼度: ★★★★☆</li><li>特徴: オブジェクト指向設計の観点からの解説</li></ul></li></ol><h3 id=言語別実装リファレンス>言語別実装リファレンス</h3><h4 id=python>Python</h4><ol><li><p><strong>Refactoring Guru - Proxy in Python</strong></p><ul><li>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy/python/example target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy/python/example</a></li><li>信頼度: ★★★★★</li></ul></li><li><p><strong>GeeksforGeeks - Proxy Design Pattern for Object Communication in Python</strong></p><ul><li>URL: <a class=link href=https://www.geeksforgeeks.org/python/proxy-design-pattern-for-object-communication-in-python/ target=_blank rel=noopener>https://www.geeksforgeeks.org/python/proxy-design-pattern-for-object-communication-in-python/</a></li><li>信頼度: ★★★★★</li></ul></li><li><p><strong>Software Patterns Lexicon - Proxy Pattern Use Cases in Python</strong></p><ul><li>URL: <a class=link href=https://softwarepatternslexicon.com/python/structural-patterns/proxy-pattern/use-cases-and-examples/ target=_blank rel=noopener>https://softwarepatternslexicon.com/python/structural-patterns/proxy-pattern/use-cases-and-examples/</a></li><li>信頼度: ★★★★☆</li></ul></li></ol><h4 id=java>Java</h4><ol><li><p><strong>Java Design Patterns - Proxy Pattern</strong></p><ul><li>URL: <a class=link href=https://java-design-patterns.com/patterns/proxy/ target=_blank rel=noopener>https://java-design-patterns.com/patterns/proxy/</a></li><li>信頼度: ★★★★★</li></ul></li><li><p><strong>JavaBrahman - Proxy Design Pattern in Java</strong></p><ul><li>URL: <a class=link href=https://www.javabrahman.com/design-patterns/proxy-design-pattern-in-java/ target=_blank rel=noopener>https://www.javabrahman.com/design-patterns/proxy-design-pattern-in-java/</a></li><li>信頼度: ★★★★☆</li></ul></li><li><p><strong>Programming TIPS! - Java Proxy パターン（図解/デザインパターン）</strong></p><ul><li>URL: <a class=link href=https://programming-tips.jp/archives/a1/29/index.html target=_blank rel=noopener>https://programming-tips.jp/archives/a1/29/index.html</a></li><li>信頼度: ★★★★☆</li><li>特徴: 日本語、図解が豊富</li></ul></li></ol><h4 id=typescriptjavascript>TypeScript/JavaScript</h4><ol><li><p><strong>Refactoring Guru - Proxy in TypeScript</strong></p><ul><li>URL: <a class=link href=https://refactoring.guru/design-patterns/proxy/typescript/example target=_blank rel=noopener>https://refactoring.guru/design-patterns/proxy/typescript/example</a></li><li>信頼度: ★★★★★</li></ul></li><li><p><strong>SBCODE - Proxy - Design Patterns in TypeScript</strong></p><ul><li>URL: <a class=link href=https://sbcode.net/typescript/proxy/ target=_blank rel=noopener>https://sbcode.net/typescript/proxy/</a></li><li>信頼度: ★★★★☆</li></ul></li><li><p><strong>Software Patterns Lexicon - Proxy Pattern in TypeScript</strong></p><ul><li>URL: <a class=link href=https://softwarepatternslexicon.com/ts/structural-patterns/proxy-pattern/use-cases-and-examples/ target=_blank rel=noopener>https://softwarepatternslexicon.com/ts/structural-patterns/proxy-pattern/use-cases-and-examples/</a></li><li>信頼度: ★★★★☆</li></ul></li></ol><h3 id=その他の有用なリソース>その他の有用なリソース</h3><ol><li><p><strong>Software System Design - Proxy Pattern</strong></p><ul><li>URL: <a class=link href=https://softwaresystemdesign.com/design-pattern/structural-patterns/proxy/ target=_blank rel=noopener>https://softwaresystemdesign.com/design-pattern/structural-patterns/proxy/</a></li><li>信頼度: ★★★★☆</li></ul></li><li><p><strong>Number Analytics - Mastering Proxy Pattern in Software Design</strong></p><ul><li>URL: <a class=link href=https://www.numberanalytics.com/blog/ultimate-guide-proxy-pattern-software-design target=_blank rel=noopener>https://www.numberanalytics.com/blog/ultimate-guide-proxy-pattern-software-design</a></li><li>信頼度: ★★★★☆</li></ul></li><li><p><strong>BackendInterview - Proxy Pattern</strong></p><ul><li>URL: <a class=link href=https://backendinterview.com/backend/design-patterns/proxy target=_blank rel=noopener>https://backendinterview.com/backend/design-patterns/proxy</a></li><li>信頼度: ★★★★☆</li><li>特徴: 面接対策の観点からの解説</li></ul></li></ol><hr><h2 id=調査まとめ>調査まとめ</h2><h3 id=調査完了項目>調査完了項目</h3><ul><li>✅ Proxyパターンの概要と定義</li><li>✅ GoFデザインパターンにおける位置づけ</li><li>✅ 基本構造（Subject、RealSubject、Proxy）</li><li>✅ UMLクラス図の構造</li><li>✅ 用途と適用場面（仮想、保護、リモート、スマート、キャッシュプロキシ）</li><li>✅ 適用すべき場面と避けるべき場面</li><li>✅ Python実装例（仮想、保護、キャッシュプロキシ）</li><li>✅ Java実装例（仮想、スマートプロキシ）</li><li>✅ TypeScript実装例（保護プロキシ、ネイティブProxy）</li><li>✅ 利点（アクセス制御、パフォーマンス最適化、OCP、疎結合など）</li><li>✅ 欠点（複雑さ、オーバーヘッド、ボトルネックなど）</li><li>✅ 関連パターンとの比較（Decorator、Adapter、Facade）</li><li>✅ 信頼性の高い出典の収集</li></ul><h3 id=追加推奨事項>追加推奨事項</h3><p>記事執筆時に以下の点を考慮することを推奨：</p><ol><li><p><strong>実践的な例の追加</strong></p><ul><li>Webアプリケーションでの具体例（API Gateway、リバースプロキシなど）</li><li>日常的なシナリオ（銀行口座へのアクセス、クレジットカード決済など）</li></ul></li><li><p><strong>パフォーマンスベンチマーク</strong></p><ul><li>プロキシ使用時と非使用時のパフォーマンス比較（可能であれば）</li></ul></li><li><p><strong>内部リンク候補</strong></p><ul><li><code>/content/post/mediator-pattern.md</code> - 振る舞いパターンの例として参照可能</li><li>他の構造パターン記事（Decorator、Adapter、Facadeなど）があれば相互リンク</li></ul></li><li><p><strong>図解の追加</strong></p><ul><li>UMLシーケンス図（クライアント→Proxy→RealSubjectの流れ）</li><li>各プロキシタイプの概念図</li></ul></li><li><p><strong>実務での注意点</strong></p><ul><li>マルチスレッド環境での考慮事項</li><li>パフォーマンステストの重要性</li><li>ドキュメンテーションのベストプラクティス</li></ul></li></ol><hr><h2 id=信頼度評価基準>信頼度評価基準</h2><p>本調査で使用した信頼度評価基準：</p><ul><li>★★★★★: 非常に高い（GoF原典、Refactoring Guru、GeeksforGeeks等）</li><li>★★★★☆: 高い（技術ブログ、専門サイト、検証済みコミュニティ）</li><li>★★★☆☆: 中程度（個人ブログだが技術的に正確）</li><li>★★☆☆☆: やや低い（参考程度）</li><li>★☆☆☆☆: 低い（未検証情報）</li></ul><p><strong>本調査では★★★★☆以上の情報源のみを使用しています。</strong></p><hr><p><strong>調査完了</strong>: 2026-01-01<br><strong>次のステップ</strong>: この調査ドキュメントを基に記事執筆を開始</p></section><footer class=article-footer><section class=article-tags><a href=/tags/design-pattern/>Design-Pattern</a>
<a href=/tags/proxy-pattern/>Proxy-Pattern</a>
<a href=/tags/structural-pattern/>Structural-Pattern</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>関連するコンテンツ</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/2026/01/03/001541/><div class=article-image><img src=/public_images/2026/moo-dispatcher-series-image.jpg loading=lazy data-key data-hash=/public_images/2026/moo-dispatcher-series-image.jpg></div><div class=article-details><h2 class=article-title>第12回-これがデザインパターンだ！ - Mooを使ってディスパッチャーを作ってみよう</h2></div></a></article><article class=has-image><a href=/warehouse/mediator-pattern/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Mediatorパターンの調査</h2></div></a></article><article class=has-image><a href=/warehouse/state-pattern/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Stateパターン（State Design Pattern）調査報告書</h2></div></a></article><article class=has-image><a href=/warehouse/visitor-pattern-investigation/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Visitorパターン（Visitor Design Pattern）調査ドキュメント</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//nqounet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2000 -
2026 nqou.net</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> で構築されています。<br>テーマ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> は <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> によって設計されています。</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>