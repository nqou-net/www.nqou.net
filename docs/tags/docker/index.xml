<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Docker on nqou.net</title><link>https://www.nqou.net/tags/docker/</link><description>Recent content in Docker on nqou.net</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sat, 16 Feb 2019 17:21:05 +0900</lastBuildDate><atom:link href="https://www.nqou.net/tags/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>キッカソン #3 に参加してきました</title><link>https://www.nqou.net/2019/02/16/172105/</link><pubDate>Sat, 16 Feb 2019 17:21:05 +0900</pubDate><guid>https://www.nqou.net/2019/02/16/172105/</guid><description>&lt;p>先週土曜日（もう一週間も経ってしまった。。。）から一泊二日で「Perl入学式の修学旅行」という別名を持つ「キッカソン」へ行ってきました。&lt;/p>
&lt;p>イベント自体は第3回ということですが、私は今回が初参加です。&lt;/p></description></item><item><title>以前は動いていた Dockerfile で permission denied が出るようになった話</title><link>https://www.nqou.net/2018/06/12/110204/</link><pubDate>Tue, 12 Jun 2018 11:02:04 +0900</pubDate><guid>https://www.nqou.net/2018/06/12/110204/</guid><description>&lt;p>Mac に入っている docker を stable から edge に変えたところ、以前は build できていたはずの Dockerfile が build に失敗するようになった。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ docker-compose build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Building webapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Step 1/9 : FROM perl:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; dbada67dc42d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Step 2/9 : RUN useradd -m -s /bin/bash appuser &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> cpanm Carmel --notest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; Using cache
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; 6f9065cda747
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Step 3/9 : USER appuser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; Using cache
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; c68da1175f01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Step 4/9 : RUN mkdir -p ~/webapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---&amp;gt; Running in ec4f449376a8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR: Service &lt;span class="s1">&amp;#39;webapp&amp;#39;&lt;/span> failed to build: OCI runtime create failed: container_linux.go:348: starting container process caused &lt;span class="s2">&amp;#34;chdir to cwd (\&amp;#34;/root\&amp;#34;) set in config.json failed: permission denied&amp;#34;&lt;/span>: unknown
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>たまたまタイミングがそうだっただけで、実際には正しくない書き方だったのかもしれないと思って、より堅実そうな書き方に変更した。&lt;/p></description></item><item><title>DockerでHerokuでMojoliciousが動いたぞ!!!（改定版）</title><link>https://www.nqou.net/2017/12/13/103356/</link><pubDate>Wed, 13 Dec 2017 10:33:56 +0900</pubDate><guid>https://www.nqou.net/2017/12/13/103356/</guid><description>&lt;p>（追記）&lt;/p>
&lt;p>この記事で書いていた Dockerfile が動かなくなっていたので動くように修正した記事を書きました。&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.nqou.net/2018/06/12/110204/" >以前は動いていた Dockerfile で permission denied が出るようになった話 | nqou.net&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>（追記ここまで）&lt;/p></description></item><item><title>ローカルでの開発は docker-compose を使うと楽だった</title><link>https://www.nqou.net/2017/12/03/025713/</link><pubDate>Sun, 03 Dec 2017 02:57:13 +0900</pubDate><guid>https://www.nqou.net/2017/12/03/025713/</guid><description>&lt;p>さっきの記事を書いて面倒だなと思ったので、ローカルの開発時は &lt;code>docker-compose&lt;/code> を使えば楽かなと思ってやってみた。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;3&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">webapp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">carton exec -- morbo myapp.pl&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">3000&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>このファイルからみると、 &lt;code>myapp.pl&lt;/code> の場所が違うので直感的ではないけれど、 &lt;code>COPY&lt;/code> で &lt;code>.git&lt;/code> までコピーされているのを見ると、アプリに必要なファイルだけをコピーするのが良いんじゃないか、と思った次第。&lt;/p></description></item><item><title>DockerでHerokuでMojoliciousが動いたぞ!!!</title><link>https://www.nqou.net/2017/12/03/012037/</link><pubDate>Sun, 03 Dec 2017 01:20:37 +0900</pubDate><guid>https://www.nqou.net/2017/12/03/012037/</guid><description>&lt;p>久しぶりに Heroku を使ってみたら、いつの間にかコンテナも使えるようになっていた。&lt;/p>
&lt;p>というくらいに全然 Heroku を使っていなかった。&lt;/p>
&lt;p>正確に言うと、 Heroku で動かしているアプリはあるけど、ずっと動かしたままだったので、ダッシュボードを見ることがなかった、という感じ。&lt;/p></description></item></channel></rss>