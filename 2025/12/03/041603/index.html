<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="CPANの概要と、実務で本当に役立つCPANモジュール20選をカテゴリ別に紹介します。"><title>CPANとは — 実務で役立つCPANモジュール20選</title><link rel=canonical href=https://www.nqou.net/2025/12/03/041603/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="CPANとは — 実務で役立つCPANモジュール20選"><meta property='og:description' content="CPANの概要と、実務で本当に役立つCPANモジュール20選をカテゴリ別に紹介します。"><meta property='og:url' content='https://www.nqou.net/2025/12/03/041603/'><meta property='og:site_name' content='設計パターンを疑え'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='perl'><meta property='article:tag' content='cpan'><meta property='article:tag' content='modules'><meta property='article:tag' content='advent-calendar-2025'><meta property='article:published_time' content='2025-12-03T04:16:03+09:00'><meta property='article:modified_time' content='2025-12-03T04:16:03+09:00'><meta property='og:image' content='https://www.nqou.net/public_images/cpan-is-20251203041603.jpg'><meta name=twitter:title content="CPANとは — 実務で役立つCPANモジュール20選"><meta name=twitter:description content="CPANの概要と、実務で本当に役立つCPANモジュール20選をカテゴリ別に紹介します。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.nqou.net/public_images/cpan-is-20251203041603.jpg'><link rel="shortcut icon" href=/favicon.png><style>@import 'https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap';:root{--base-font-family:Arial, "Noto Sans JP", sans-serif}</style><link rel=stylesheet href=/css/linkcard.css><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3923446804785015" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js defer></script><script defer>document.addEventListener("DOMContentLoaded",function(){try{typeof mermaid!="undefined"&&document.querySelector(".mermaid")&&mermaid.initialize({startOnLoad:!0,securityLevel:"strict"})}catch(e){console.warn("Mermaid failed to initialize:",e)}})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-E50H9ESN7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-E50H9ESN7E")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=メニューを開く・閉じる>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/public_images/blog-nqounet-square.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>設計パターンを疑え</a></h1><h2 class=site-description>名前の嘘を暴き、意図で設計を語る</h2></div></header><ol class=menu-social><li><a href=https://github.com/nqounet target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/nqounet target=_blank title=X rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/advent-calendar-2025/><svg class="icon icon-tabler icon-tabler-calendar" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><path d="M8 15h.01"/><path d="M12 15h.01"/><path d="M16 15h.01"/><path d="M8 19h.01"/><path d="M12 19h.01"/><path d="M16 19h.01"/></svg>
<span>Perl Advent Calendar 2025 - AI Edition</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/warehouse/><svg class="icon icon-tabler icon-tabler-warehouse" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10l9-6 9 6"/><rect x="5" y="10" width="14" height="10" rx="2"/><rect x="10" y="14" width="4" height="6" rx="1"/><path d="M7 20v-4h2v4"/><path d="M15 20v-4h2v4"/></svg>
<span>Warehouse</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ダークモード</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目次</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#cpanとは>CPANとは</a></li><li><a href=#モジュールのインストール方法>モジュールのインストール方法</a></li><li><a href=#ファイルパス操作>ファイル・パス操作</a><ol><li><a href=#1-pathtiny>1. Path::Tiny</a></li><li><a href=#2-filefindrule>2. File::Find::Rule</a></li></ol></li><li><a href=#web関連>Web関連</a><ol><li><a href=#3-httptiny>3. HTTP::Tiny</a></li><li><a href=#4-mojouseragent>4. Mojo::UserAgent</a></li><li><a href=#5-plack>5. Plack</a></li></ol></li><li><a href=#データ処理>データ処理</a><ol><li><a href=#6-jsonmaybexs>6. JSON::MaybeXS</a></li><li><a href=#7-yamlxs>7. YAML::XS</a></li><li><a href=#8-xmllibxml>8. XML::LibXML</a></li><li><a href=#9-textcsv_xs>9. Text::CSV_XS</a></li></ol></li><li><a href=#日時処理>日時処理</a><ol><li><a href=#10-timemoment>10. Time::Moment</a></li><li><a href=#11-datetime>11. DateTime</a></li></ol></li><li><a href=#データベース>データベース</a><ol><li><a href=#12-dbi>12. DBI</a></li><li><a href=#13-dbixclass>13. DBIx::Class</a></li></ol></li><li><a href=#オブジェクト指向>オブジェクト指向</a><ol><li><a href=#14-moo>14. Moo</a></li><li><a href=#15-moose>15. Moose</a></li></ol></li><li><a href=#テスト>テスト</a><ol><li><a href=#16-test2suite>16. Test2::Suite</a></li><li><a href=#17-testmore>17. Test::More</a></li><li><a href=#18-develcover>18. Devel::Cover</a></li></ol></li><li><a href=#ユーティリティ>ユーティリティ</a><ol><li><a href=#19-listutil--listmoreutils>19. List::Util / List::MoreUtils</a></li><li><a href=#20-trytiny>20. Try::Tiny</a></li></ol></li><li><a href=#まとめ>まとめ</a></li><li><a href=#cpanfileでの管理例>cpanfileでの管理例</a></li><li><a href=#さらに学ぶために>さらに学ぶために</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/2025/12/03/041603/><img src=/public_images/cpan-is-20251203041603.jpg loading=lazy alt="Featured image of post CPANとは — 実務で役立つCPANモジュール20選"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/2025/12/03/041603/>CPANとは — 実務で役立つCPANモジュール20選</a></h2><h3 class=article-subtitle>CPANの概要と、実務で本当に役立つCPANモジュール20選をカテゴリ別に紹介します。</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>12月 03, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>読了時間: 9分</time></div></footer></div></header><section class=article-content><h2 id=cpanとは>CPANとは</h2><p>CPAN（Comprehensive Perl Archive Network）は、Perlの最大の強みの一つです。世界中の開発者が作成した18万以上のモジュールが公開されており、ほとんどの問題に対して「すでに誰かが解決している」状態です。Perlの格言「車輪の再発明をするな」を体現するエコシステムと言えるでしょう。</p><p>本記事では、実務で本当に役立つCPANモジュール20選を、カテゴリ別に紹介します。すべて現場で使われている実績のあるモジュールばかりです。</p><h2 id=モジュールのインストール方法>モジュールのインストール方法</h2><p>CPANモジュールは<code>cpanm</code>（App::cpanminus）を使ってインストールするのが最も簡単です：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># cpanm自体のインストール</span>
</span></span><span class=line><span class=cl><span class=n>curl</span> <span class=o>-</span><span class=n>L</span> <span class=n>https:</span><span class=sr>//c</span><span class=n>panmin</span><span class=o>.</span><span class=n>us</span> <span class=o>|</span> <span class=n>perl</span> <span class=o>-</span> <span class=nn>App::</span><span class=n>cpanminus</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># モジュールのインストール</span>
</span></span><span class=line><span class=cl><span class=n>cpanm</span> <span class=nn>Path::</span><span class=n>Tiny</span>
</span></span><span class=line><span class=cl><span class=n>cpanm</span> <span class=n>Mojolicious</span>
</span></span></code></pre></td></tr></table></div></div><p>実際のプロジェクトでは、依存関係を<code>cpanfile</code>で管理するのがベストプラクティスです：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># cpanfile</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Path::Tiny&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 0.144&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Mojolicious&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 9.0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Time::Moment&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># インストール</span>
</span></span><span class=line><span class=cl><span class=n>cpanm</span> <span class=o>--</span><span class=n>installdeps</span> <span class=o>.</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=ファイルパス操作>ファイル・パス操作</h2><h3 id=1-pathtiny>1. Path::Tiny</h3><p><strong>選定理由</strong>: ファイル操作の定番。File::SpecやFile::Slurpの複雑さを解消し、直感的なAPIを提供します。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Path::Tiny</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ファイルの読み込み</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$content</span> <span class=o>=</span> <span class=n>path</span><span class=p>(</span><span class=s>&#39;config.txt&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>slurp_utf8</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ファイルへの書き込み</span>
</span></span><span class=line><span class=cl><span class=n>path</span><span class=p>(</span><span class=s>&#39;output.txt&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>spew_utf8</span><span class=p>(</span><span class=s>&#34;Hello, World!\n&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ディレクトリの再帰的な走査</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$iter</span> <span class=o>=</span> <span class=n>path</span><span class=p>(</span><span class=s>&#39;lib&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>iterator</span><span class=p>({</span> <span class=n>recurse</span> <span class=o>=&gt;</span> <span class=mi>1</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=k>my</span> <span class=nv>$path</span> <span class=o>=</span> <span class=nv>$iter</span><span class=o>-&gt;</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>next</span> <span class=k>unless</span> <span class=nv>$path</span> <span class=o>=~</span><span class=sr> /\.pm$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=nv>$path</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ファイルの存在確認と作成</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$file</span> <span class=o>=</span> <span class=n>path</span><span class=p>(</span><span class=s>&#39;data/cache.json&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$file</span><span class=o>-&gt;</span><span class=nn>parent</span><span class=o>-&gt;</span><span class=n>mkpath</span><span class=p>;</span>  <span class=c1># 親ディレクトリを作成</span>
</span></span><span class=line><span class=cl><span class=nv>$file</span><span class=o>-&gt;</span><span class=n>touch</span> <span class=k>unless</span> <span class=nv>$file</span><span class=o>-&gt;</span><span class=nb>exists</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>特徴</strong>:</p><ul><li>メソッドチェーンで直感的</li><li>UTF-8対応が簡単</li><li>Windows/Unixのパス差異を自動処理</li></ul><h3 id=2-filefindrule>2. File::Find::Rule</h3><p><strong>選定理由</strong>: ファイル検索を宣言的に書ける。複雑な条件でのファイル検索が劇的に簡単になります。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>File::Find::Rule</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 特定の拡張子のファイルを検索</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@files</span> <span class=o>=</span> <span class=nn>File::Find::Rule</span><span class=o>-&gt;</span><span class=n>file</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=o>-&gt;</span><span class=n>name</span><span class=p>(</span><span class=s>&#39;*.pl&#39;</span><span class=p>,</span> <span class=s>&#39;*.pm&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=o>-&gt;</span><span class=n>in</span><span class=p>(</span><span class=s>&#39;lib&#39;</span><span class=p>,</span> <span class=s>&#39;t&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># サイズと更新日時での検索</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@large_files</span> <span class=o>=</span> <span class=nn>File::Find::Rule</span><span class=o>-&gt;</span><span class=n>file</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                                  <span class=o>-&gt;</span><span class=n>size</span><span class=p>(</span><span class=s>&#39;&gt;1M&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                                  <span class=o>-&gt;</span><span class=n>mtime</span><span class=p>(</span><span class=s>&#39;&gt;7&#39;</span><span class=p>)</span>  <span class=c1># 7日以内に更新</span>
</span></span><span class=line><span class=cl>                                  <span class=o>-&gt;</span><span class=n>in</span><span class=p>(</span><span class=s>&#39;.&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=web関連>Web関連</h2><h3 id=3-httptiny>3. HTTP::Tiny</h3><p><strong>選定理由</strong>: コアモジュール（Perl 5.14+）でありながら実用的。外部依存なしでHTTPリクエストが可能です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>HTTP::Tiny</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$http</span> <span class=o>=</span> <span class=nn>HTTP::Tiny</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>timeout</span> <span class=o>=&gt;</span> <span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># GETリクエスト</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$response</span> <span class=o>=</span> <span class=nv>$http</span><span class=o>-&gt;</span><span class=n>get</span><span class=p>(</span><span class=s>&#39;https://api.example.com/users&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$response</span><span class=o>-&gt;</span><span class=p>{</span><span class=n>success</span><span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=nv>$response</span><span class=o>-&gt;</span><span class=p>{</span><span class=n>content</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># POSTリクエスト（JSON）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$res</span> <span class=o>=</span> <span class=nv>$http</span><span class=o>-&gt;</span><span class=n>post</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;https://api.example.com/posts&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>headers</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=s>&#39;Content-Type&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;application/json&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>content</span> <span class=o>=&gt;</span> <span class=s>&#39;{&#34;title&#34;:&#34;Hello&#34;,&#34;body&#34;:&#34;World&#34;}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=4-mojouseragent>4. Mojo::UserAgent</h3><p><strong>選定理由</strong>: 強力な非同期対応とDOMパーサー内蔵。スクレイピングやAPI連携に最適です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Mojo::UserAgent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$ua</span> <span class=o>=</span> <span class=nn>Mojo::UserAgent</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># シンプルなGET</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$res</span> <span class=o>=</span> <span class=nv>$ua</span><span class=o>-&gt;</span><span class=n>get</span><span class=p>(</span><span class=s>&#39;https://example.com&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$res</span><span class=o>-&gt;</span><span class=n>body</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># DOMセレクタでスクレイピング</span>
</span></span><span class=line><span class=cl><span class=nv>$ua</span><span class=o>-&gt;</span><span class=n>get</span><span class=p>(</span><span class=s>&#39;https://news.ycombinator.com&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=nn>result</span>
</span></span><span class=line><span class=cl>   <span class=o>-&gt;</span><span class=nn>dom</span><span class=o>-&gt;</span><span class=n>find</span><span class=p>(</span><span class=s>&#39;.titleline &gt; a&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=nb>each</span><span class=p>(</span><span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=n>say</span> <span class=nv>$_</span><span class=o>-&gt;</span><span class=n>text</span><span class=p>,</span> <span class=s>&#39; =&gt; &#39;</span><span class=p>,</span> <span class=nv>$_</span><span class=o>-&gt;</span><span class=n>attr</span><span class=p>(</span><span class=s>&#39;href&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># JSON API</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$json</span> <span class=o>=</span> <span class=nv>$ua</span><span class=o>-&gt;</span><span class=n>get</span><span class=p>(</span><span class=s>&#39;https://api.github.com/users/perl&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>              <span class=o>-&gt;</span><span class=nn>result</span><span class=o>-&gt;</span><span class=n>json</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$json</span><span class=o>-&gt;</span><span class=p>{</span><span class=n>name</span><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=5-plack>5. Plack</h3><p><strong>選定理由</strong>: WebアプリケーションのPSGI標準実装。フレームワークに依存しないWebアプリ開発の基盤です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># app.psgi</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Plack::Request</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$app</span> <span class=o>=</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$env</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$req</span> <span class=o>=</span> <span class=nn>Plack::Request</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=nv>$env</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s>&#39;Content-Type&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;text/plain&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s>&#34;Hello, &#34;</span> <span class=o>.</span> <span class=p>(</span><span class=nv>$req</span><span class=o>-&gt;</span><span class=n>param</span><span class=p>(</span><span class=s>&#39;name&#39;</span><span class=p>)</span> <span class=o>||</span> <span class=s>&#39;World&#39;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 起動: plackup app.psgi</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=データ処理>データ処理</h2><h3 id=6-jsonmaybexs>6. JSON::MaybeXS</h3><p><strong>選定理由</strong>: 最速のJSONモジュールを自動選択。JSON::XS（C実装）があれば使い、なければPure Perlにフォールバックします。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>JSON::MaybeXS</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$json</span> <span class=o>=</span> <span class=nn>JSON::MaybeXS</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>utf8</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span> <span class=n>pretty</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># エンコード</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$data</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span> <span class=o>=&gt;</span> <span class=s>&#39;太郎&#39;</span><span class=p>,</span> <span class=n>age</span> <span class=o>=&gt;</span> <span class=mi>30</span><span class=p>,</span> <span class=n>hobbies</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s>&#39;Perl&#39;</span><span class=p>,</span> <span class=s>&#39;CPAN&#39;</span><span class=p>]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$json_text</span> <span class=o>=</span> <span class=nv>$json</span><span class=o>-&gt;</span><span class=n>encode</span><span class=p>(</span><span class=nv>$data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># デコード</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$decoded</span> <span class=o>=</span> <span class=nv>$json</span><span class=o>-&gt;</span><span class=n>decode</span><span class=p>(</span><span class=nv>$json_text</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$decoded</span><span class=o>-&gt;</span><span class=p>{</span><span class=n>name</span><span class=p>};</span>  <span class=c1># 太郎</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=7-yamlxs>7. YAML::XS</h3><p><strong>選定理由</strong>: YAML 1.1対応の高速パーサー。設定ファイルの読み書きに最適です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>YAML::XS</span> <span class=sx>qw(LoadFile DumpFile)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># YAMLファイルの読み込み</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$config</span> <span class=o>=</span> <span class=n>LoadFile</span><span class=p>(</span><span class=s>&#39;config.yml&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># YAMLファイルへの書き込み</span>
</span></span><span class=line><span class=cl><span class=n>DumpFile</span><span class=p>(</span><span class=s>&#39;output.yml&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>database</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>host</span> <span class=o>=&gt;</span> <span class=s>&#39;localhost&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>port</span> <span class=o>=&gt;</span> <span class=mi>5432</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>features</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s>&#39;cache&#39;</span><span class=p>,</span> <span class=s>&#39;logging&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=8-xmllibxml>8. XML::LibXML</h3><p><strong>選定理由</strong>: libxml2ベースの高速XMLパーサー。XPathとXSLT対応で複雑なXML処理も可能です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>XML::LibXML</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$parser</span> <span class=o>=</span> <span class=nn>XML::LibXML</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$doc</span> <span class=o>=</span> <span class=nv>$parser</span><span class=o>-&gt;</span><span class=n>parse_file</span><span class=p>(</span><span class=s>&#39;data.xml&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># XPathで要素を検索</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$node</span> <span class=p>(</span><span class=nv>$doc</span><span class=o>-&gt;</span><span class=n>findnodes</span><span class=p>(</span><span class=s>&#39;//book[@category=&#34;programming&#34;]&#39;</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$title</span> <span class=o>=</span> <span class=nv>$node</span><span class=o>-&gt;</span><span class=n>findvalue</span><span class=p>(</span><span class=s>&#39;./title&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$author</span> <span class=o>=</span> <span class=nv>$node</span><span class=o>-&gt;</span><span class=n>findvalue</span><span class=p>(</span><span class=s>&#39;./author&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$title by $author&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新しい要素を追加</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$new_book</span> <span class=o>=</span> <span class=nv>$doc</span><span class=o>-&gt;</span><span class=n>createElement</span><span class=p>(</span><span class=s>&#39;book&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$new_book</span><span class=o>-&gt;</span><span class=n>setAttribute</span><span class=p>(</span><span class=s>&#39;category&#39;</span><span class=p>,</span> <span class=s>&#39;perl&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$title</span> <span class=o>=</span> <span class=nv>$doc</span><span class=o>-&gt;</span><span class=n>createElement</span><span class=p>(</span><span class=s>&#39;title&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$title</span><span class=o>-&gt;</span><span class=n>appendText</span><span class=p>(</span><span class=s>&#39;Programming Perl&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$new_book</span><span class=o>-&gt;</span><span class=n>appendChild</span><span class=p>(</span><span class=nv>$title</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=9-textcsv_xs>9. Text::CSV_XS</h3><p><strong>選定理由</strong>: CSVパーサーの決定版。RFC 4180準拠で、複雑なCSVも正確に処理します。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Text::CSV_XS</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$csv</span> <span class=o>=</span> <span class=nn>Text::CSV_XS</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>({</span> <span class=n>binary</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span> <span class=n>auto_diag</span> <span class=o>=&gt;</span> <span class=mi>1</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CSV読み込み</span>
</span></span><span class=line><span class=cl><span class=nb>open</span> <span class=k>my</span> <span class=nv>$fh</span><span class=p>,</span> <span class=s>&#39;&lt;:encoding(utf8)&#39;</span><span class=p>,</span> <span class=s>&#39;data.csv&#39;</span> <span class=ow>or</span> <span class=nb>die</span> <span class=vg>$!</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=k>my</span> <span class=nv>$row</span> <span class=o>=</span> <span class=nv>$csv</span><span class=o>-&gt;</span><span class=n>getline</span><span class=p>(</span><span class=nv>$fh</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=nb>join</span> <span class=s>&#39;, &#39;</span><span class=p>,</span> <span class=nv>@$row</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CSV書き込み</span>
</span></span><span class=line><span class=cl><span class=nb>open</span> <span class=k>my</span> <span class=nv>$out</span><span class=p>,</span> <span class=s>&#39;&gt;:encoding(utf8)&#39;</span><span class=p>,</span> <span class=s>&#39;output.csv&#39;</span> <span class=ow>or</span> <span class=nb>die</span> <span class=vg>$!</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$csv</span><span class=o>-&gt;</span><span class=n>say</span><span class=p>(</span><span class=nv>$out</span><span class=p>,</span> <span class=p>[</span><span class=s>&#39;Name&#39;</span><span class=p>,</span> <span class=s>&#39;Age&#39;</span><span class=p>,</span> <span class=s>&#39;Email&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nv>$csv</span><span class=o>-&gt;</span><span class=n>say</span><span class=p>(</span><span class=nv>$out</span><span class=p>,</span> <span class=p>[</span><span class=s>&#39;太郎&#39;</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=s>&#39;taro@example.com&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nb>close</span> <span class=nv>$out</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=日時処理>日時処理</h2><h3 id=10-timemoment>10. Time::Moment</h3><p><strong>選定理由</strong>: 最速の日時処理ライブラリ。不変オブジェクトで安全、かつ高性能です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Time::Moment</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 現在時刻</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$now</span> <span class=o>=</span> <span class=nn>Time::Moment</span><span class=o>-&gt;</span><span class=n>now_utc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$now</span><span class=o>-&gt;</span><span class=n>to_string</span><span class=p>;</span>  <span class=c1># 2025-12-03T12:34:56Z</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 特定の日時を作成</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$tm</span> <span class=o>=</span> <span class=nn>Time::Moment</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>year</span>   <span class=o>=&gt;</span> <span class=mi>2025</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>month</span>  <span class=o>=&gt;</span> <span class=mi>12</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>day</span>    <span class=o>=&gt;</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>hour</span>   <span class=o>=&gt;</span> <span class=mi>15</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>minute</span> <span class=o>=&gt;</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 日時演算</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$tomorrow</span> <span class=o>=</span> <span class=nv>$tm</span><span class=o>-&gt;</span><span class=n>plus_days</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$next_week</span> <span class=o>=</span> <span class=nv>$tm</span><span class=o>-&gt;</span><span class=n>plus_weeks</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$diff_seconds</span> <span class=o>=</span> <span class=nv>$tomorrow</span><span class=o>-&gt;</span><span class=n>delta_seconds</span><span class=p>(</span><span class=nv>$now</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># フォーマット</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$tm</span><span class=o>-&gt;</span><span class=n>strftime</span><span class=p>(</span><span class=s>&#39;%Y年%m月%d日 %H:%M&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=11-datetime>11. DateTime</h3><p><strong>選定理由</strong>: タイムゾーン対応が必要な場合の定番。豊富な機能と拡張モジュール群があります。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>DateTime</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$dt</span> <span class=o>=</span> <span class=nn>DateTime</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>year</span>      <span class=o>=&gt;</span> <span class=mi>2025</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>month</span>     <span class=o>=&gt;</span> <span class=mi>12</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>day</span>       <span class=o>=&gt;</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>hour</span>      <span class=o>=&gt;</span> <span class=mi>15</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>time_zone</span> <span class=o>=&gt;</span> <span class=s>&#39;Asia/Tokyo&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># タイムゾーン変換</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$utc</span> <span class=o>=</span> <span class=nv>$dt</span><span class=o>-&gt;</span><span class=nn>clone</span><span class=o>-&gt;</span><span class=n>set_time_zone</span><span class=p>(</span><span class=s>&#39;UTC&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$utc</span><span class=o>-&gt;</span><span class=n>ymd</span> <span class=o>.</span> <span class=s>&#39; &#39;</span> <span class=o>.</span> <span class=nv>$utc</span><span class=o>-&gt;</span><span class=n>hms</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 相対的な日付</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$last_month</span> <span class=o>=</span> <span class=nv>$dt</span><span class=o>-&gt;</span><span class=nn>clone</span><span class=o>-&gt;</span><span class=n>subtract</span><span class=p>(</span><span class=n>months</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=データベース>データベース</h2><h3 id=12-dbi>12. DBI</h3><p><strong>選定理由</strong>: Perlのデータベース接続の標準。あらゆるデータベースに統一的なインターフェースでアクセスできます。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>DBI</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$dbh</span> <span class=o>=</span> <span class=nn>DBI</span><span class=o>-&gt;</span><span class=nb>connect</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;dbi:SQLite:dbname=test.db&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;&#39;</span><span class=p>,</span> <span class=s>&#39;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>RaiseError</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span> <span class=n>AutoCommit</span> <span class=o>=&gt;</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># プレースホルダを使った安全なクエリ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$sth</span> <span class=o>=</span> <span class=nv>$dbh</span><span class=o>-&gt;</span><span class=n>prepare</span><span class=p>(</span><span class=s>&#39;SELECT * FROM users WHERE age &gt; ?&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$sth</span><span class=o>-&gt;</span><span class=n>execute</span><span class=p>(</span><span class=mi>20</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=k>my</span> <span class=nv>$row</span> <span class=o>=</span> <span class=nv>$sth</span><span class=o>-&gt;</span><span class=n>fetchrow_hashref</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$row-&gt;{name} ($row-&gt;{age})&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 挿入</span>
</span></span><span class=line><span class=cl><span class=nv>$dbh</span><span class=o>-&gt;</span><span class=k>do</span><span class=p>(</span><span class=s>&#39;INSERT INTO users (name, age) VALUES (?, ?)&#39;</span><span class=p>,</span> <span class=nb>undef</span><span class=p>,</span> <span class=s>&#39;太郎&#39;</span><span class=p>,</span> <span class=mi>30</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=13-dbixclass>13. DBIx::Class</h3><p><strong>選定理由</strong>: PerlのO/Rマッパーの最高峰。複雑なクエリをオブジェクト指向で記述できます。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># スキーマ定義（簡略版）</span>
</span></span><span class=line><span class=cl><span class=k>package</span> <span class=nn>MyApp::Schema::Result::User</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>base</span> <span class=s>&#39;DBIx::Class::Core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nn>__PACKAGE__</span><span class=o>-&gt;</span><span class=n>table</span><span class=p>(</span><span class=s>&#39;users&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nn>__PACKAGE__</span><span class=o>-&gt;</span><span class=n>add_columns</span><span class=p>(</span><span class=sx>qw/id name email created_at/</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nn>__PACKAGE__</span><span class=o>-&gt;</span><span class=n>set_primary_key</span><span class=p>(</span><span class=s>&#39;id&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$schema</span> <span class=o>=</span> <span class=nn>MyApp::Schema</span><span class=o>-&gt;</span><span class=nb>connect</span><span class=p>(</span><span class=s>&#39;dbi:SQLite:test.db&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 検索</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$users</span> <span class=o>=</span> <span class=nv>$schema</span><span class=o>-&gt;</span><span class=n>resultset</span><span class=p>(</span><span class=s>&#39;User&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>search</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>created_at</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=s>&#39;&gt;&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;2025-01-01&#39;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>order_by</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=o>-</span><span class=n>desc</span> <span class=o>=&gt;</span> <span class=s>&#39;created_at&#39;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=k>my</span> <span class=nv>$user</span> <span class=o>=</span> <span class=nv>$users</span><span class=o>-&gt;</span><span class=k>next</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=nv>$user</span><span class=o>-&gt;</span><span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 作成</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$new_user</span> <span class=o>=</span> <span class=nv>$schema</span><span class=o>-&gt;</span><span class=n>resultset</span><span class=p>(</span><span class=s>&#39;User&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>create</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span>  <span class=o>=&gt;</span> <span class=s>&#39;花子&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span> <span class=o>=&gt;</span> <span class=s>&#39;hanako@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=オブジェクト指向>オブジェクト指向</h2><h3 id=14-moo>14. Moo</h3><p><strong>選定理由</strong>: 軽量で高速なモダンなオブジェクトシステム。ほとんどのケースでこれで十分です。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>Person</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moo</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=n>name</span> <span class=o>=&gt;</span> <span class=p>(</span><span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;ro&#39;</span><span class=p>,</span> <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=n>age</span>  <span class=o>=&gt;</span> <span class=p>(</span><span class=n>is</span> <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span> <span class=n>default</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=n>email</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span>  <span class=o>=&gt;</span> <span class=s>&#39;ro&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>isa</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span> <span class=nb>die</span> <span class=s>&#34;Invalid email&#34;</span> <span class=k>unless</span> <span class=nv>$_</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=~</span><span class=sr> /@/</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>greet</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$self</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;Hello, I&#39;m &#34;</span> <span class=o>.</span> <span class=nv>$self</span><span class=o>-&gt;</span><span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$person</span> <span class=o>=</span> <span class=nn>Person</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span>  <span class=o>=&gt;</span> <span class=s>&#39;太郎&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span>   <span class=o>=&gt;</span> <span class=mi>30</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>email</span> <span class=o>=&gt;</span> <span class=s>&#39;taro@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$person</span><span class=o>-&gt;</span><span class=n>greet</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$person</span><span class=o>-&gt;</span><span class=n>age</span><span class=p>(</span><span class=mi>31</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=15-moose>15. Moose</h3><p><strong>選定理由</strong>: フル機能のオブジェクトシステム。型制約、ロール、メタプログラミングなど高度な機能が必要な場合に。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>package</span> <span class=nn>BankAccount</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moose</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Moose::Util::TypeConstraints</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>subtype</span> <span class=s>&#39;PositiveNum&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>as</span> <span class=s>&#39;Num&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>where</span> <span class=p>{</span> <span class=nv>$_</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span> <span class=p>{</span> <span class=s>&#34;Balance must be positive&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;balance&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span>      <span class=o>=&gt;</span> <span class=s>&#39;rw&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>isa</span>     <span class=o>=&gt;</span> <span class=s>&#39;PositiveNum&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>has</span> <span class=s>&#39;owner&#39;</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span>       <span class=o>=&gt;</span> <span class=s>&#39;ro&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>isa</span>      <span class=o>=&gt;</span> <span class=s>&#39;Str&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>deposit</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$amount</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=n>balance</span><span class=p>(</span><span class=nv>$self</span><span class=o>-&gt;</span><span class=n>balance</span> <span class=o>+</span> <span class=nv>$amount</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>withdraw</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$self</span><span class=p>,</span> <span class=nv>$amount</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@_</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nb>die</span> <span class=s>&#34;Insufficient funds&#34;</span> <span class=k>if</span> <span class=nv>$self</span><span class=o>-&gt;</span><span class=n>balance</span> <span class=o>&lt;</span> <span class=nv>$amount</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$self</span><span class=o>-&gt;</span><span class=n>balance</span><span class=p>(</span><span class=nv>$self</span><span class=o>-&gt;</span><span class=n>balance</span> <span class=o>-</span> <span class=nv>$amount</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nn>__PACKAGE__</span><span class=o>-&gt;</span><span class=nn>meta</span><span class=o>-&gt;</span><span class=n>make_immutable</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=テスト>テスト</h2><h3 id=16-test2suite>16. Test2::Suite</h3><p><strong>選定理由</strong>: 次世代のテストフレームワーク。Test::Moreの後継で、より強力で拡張性があります。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Test2::V0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 基本的なテスト</span>
</span></span><span class=line><span class=cl><span class=n>ok</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#39;This passes&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>is</span><span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=s>&#39;Math works&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 構造体の比較</span>
</span></span><span class=line><span class=cl><span class=n>is</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>name</span> <span class=o>=&gt;</span> <span class=s>&#39;Taro&#39;</span><span class=p>,</span> <span class=n>age</span> <span class=o>=&gt;</span> <span class=mi>30</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>name</span> <span class=o>=&gt;</span> <span class=s>&#39;Taro&#39;</span><span class=p>,</span> <span class=n>age</span> <span class=o>=&gt;</span> <span class=mi>30</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;Hash matches&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 例外のテスト</span>
</span></span><span class=line><span class=cl><span class=n>like</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>dies</span> <span class=p>{</span> <span class=nb>die</span> <span class=s>&#34;Error!&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=sx>qr/Error/</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;Dies with correct message&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># サブテスト</span>
</span></span><span class=line><span class=cl><span class=n>subtest</span> <span class=s>&#39;User tests&#39;</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$user</span> <span class=o>=</span> <span class=nn>User</span><span class=o>-&gt;</span><span class=k>new</span><span class=p>(</span><span class=n>name</span> <span class=o>=&gt;</span> <span class=s>&#39;Test&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>ok</span><span class=p>(</span><span class=nv>$user</span><span class=p>,</span> <span class=s>&#39;User created&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span><span class=p>(</span><span class=nv>$user</span><span class=o>-&gt;</span><span class=n>name</span><span class=p>,</span> <span class=s>&#39;Test&#39;</span><span class=p>,</span> <span class=s>&#39;Name is correct&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>done_testing</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=17-testmore>17. Test::More</h3><p><strong>選定理由</strong>: コアモジュールのテストフレームワーク。シンプルで学習コストが低く、広く使われています。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Test::More</span> <span class=n>tests</span> <span class=o>=&gt;</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ok</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#39;Always passes&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>is</span><span class=p>(</span><span class=s>&#39;hello&#39;</span><span class=p>,</span> <span class=s>&#39;hello&#39;</span><span class=p>,</span> <span class=s>&#39;String equality&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>isnt</span><span class=p>(</span><span class=s>&#39;foo&#39;</span><span class=p>,</span> <span class=s>&#39;bar&#39;</span><span class=p>,</span> <span class=s>&#39;Not equal&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>like</span><span class=p>(</span><span class=s>&#39;abc123&#39;</span><span class=p>,</span> <span class=sx>qr/\d+/</span><span class=p>,</span> <span class=s>&#39;Contains digits&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>can_ok</span><span class=p>(</span><span class=s>&#39;MyClass&#39;</span><span class=p>,</span> <span class=sx>qw(new fetch update)</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=18-develcover>18. Devel::Cover</h3><p><strong>選定理由</strong>: コードカバレッジ測定の標準ツール。テストの網羅性を可視化できます。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># カバレッジ測定</span>
</span></span><span class=line><span class=cl>cover -test
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HTMLレポート生成</span>
</span></span><span class=line><span class=cl>cover -report html
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># テストファイル内で特定の条件を網羅</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Test::More</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@test_cases</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$case</span> <span class=p>(</span><span class=nv>@test_cases</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>,</span> <span class=nv>$expected</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@$case</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>is</span><span class=p>(</span><span class=n>add</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>),</span> <span class=nv>$expected</span><span class=p>,</span> <span class=s>&#34;add($a, $b) = $expected&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>done_testing</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=ユーティリティ>ユーティリティ</h2><h3 id=19-listutil--listmoreutils>19. List::Util / List::MoreUtils</h3><p><strong>選定理由</strong>: リスト操作の定番。List::Utilはコアモジュール、List::MoreUtilsはさらに便利な関数を提供します。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>List::Util</span> <span class=sx>qw(first max min sum reduce any all)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>List::MoreUtils</span> <span class=sx>qw(uniq zip)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># List::Util</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@numbers</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=n>max</span><span class=p>(</span><span class=nv>@numbers</span><span class=p>);</span>        <span class=c1># 9</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=n>min</span><span class=p>(</span><span class=nv>@numbers</span><span class=p>);</span>        <span class=c1># 1</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=n>sum</span><span class=p>(</span><span class=nv>@numbers</span><span class=p>);</span>        <span class=c1># 20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$first_even</span> <span class=o>=</span> <span class=n>first</span> <span class=p>{</span> <span class=nv>$_</span> <span class=nv>%</span> <span class=nv>2</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>}</span> <span class=nv>@numbers</span><span class=p>;</span>  <span class=c1># 2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$product</span> <span class=o>=</span> <span class=n>reduce</span> <span class=p>{</span> <span class=nv>$a</span> <span class=o>*</span> <span class=nv>$b</span> <span class=p>}</span> <span class=mi>1</span><span class=o>..</span><span class=mi>5</span><span class=p>;</span>  <span class=c1># 120</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;All positive&#34;</span> <span class=k>if</span> <span class=n>all</span> <span class=p>{</span> <span class=nv>$_</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=p>}</span> <span class=nv>@numbers</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Has even&#34;</span> <span class=k>if</span> <span class=n>any</span> <span class=p>{</span> <span class=nv>$_</span> <span class=nv>%</span> <span class=nv>2</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>}</span> <span class=nv>@numbers</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># List::MoreUtils</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@unique</span> <span class=o>=</span> <span class=n>uniq</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>  <span class=c1># (1, 2, 3)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@names</span> <span class=o>=</span> <span class=p>(</span><span class=s>&#39;Alice&#39;</span><span class=p>,</span> <span class=s>&#39;Bob&#39;</span><span class=p>,</span> <span class=s>&#39;Carol&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@ages</span> <span class=o>=</span> <span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mi>35</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@pairs</span> <span class=o>=</span> <span class=n>zip</span> <span class=nv>@names</span><span class=p>,</span> <span class=nv>@ages</span><span class=p>;</span>  <span class=c1># (&#39;Alice&#39;, 30, &#39;Bob&#39;, 25, &#39;Carol&#39;, 35)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=20-trytiny>20. Try::Tiny</h3><p><strong>選定理由</strong>: 安全な例外処理。evalブロックの罠を避け、読みやすいエラーハンドリングを実現します。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>Try::Tiny</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$result</span> <span class=o>=</span> <span class=n>risky_operation</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>process</span><span class=p>(</span><span class=nv>$result</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>catch</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>warn</span> <span class=s>&#34;Caught error: $_&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># $_ には例外が入る</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=sr>/network/i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;Network error, retrying...&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>retry_with_backoff</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>die</span> <span class=nv>$_</span><span class=p>;</span>  <span class=c1># 再スロー</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>cleanup_resources</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># データベース接続の例</span>
</span></span><span class=line><span class=cl><span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$dbh</span> <span class=o>=</span> <span class=nn>DBI</span><span class=o>-&gt;</span><span class=nb>connect</span><span class=p>(</span><span class=nv>$dsn</span><span class=p>,</span> <span class=nv>$user</span><span class=p>,</span> <span class=nv>$pass</span><span class=p>,</span> <span class=p>{</span> <span class=n>RaiseError</span> <span class=o>=&gt;</span> <span class=mi>1</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nv>$dbh</span><span class=o>-&gt;</span><span class=k>do</span><span class=p>(</span><span class=s>&#39;UPDATE users SET active = 1 WHERE id = ?&#39;</span><span class=p>,</span> <span class=nb>undef</span><span class=p>,</span> <span class=nv>$user_id</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>catch</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>log_error</span><span class=p>(</span><span class=s>&#34;Database error: $_&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>send_alert_to_admin</span><span class=p>(</span><span class=nv>$_</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=まとめ>まとめ</h2><p>今回紹介した20のモジュールは、Perl開発において実績のある「定番」です。これらを使いこなすことで、以下のような利点があります：</p><p><strong>生産性の向上</strong></p><ul><li>低レベルな処理を書く必要がなくなる</li><li>バグの少ない安定したコードが書ける</li><li>コミュニティで広く使われているため、情報が豊富</li></ul><p><strong>モダンなPerl開発</strong></p><ul><li>古いPerl（Perl 4時代のイディオム）から脱却</li><li>オブジェクト指向やテスト駆動開発が容易に</li><li>メンテナンスしやすいコードベースを構築</li></ul><p><strong>ベストプラクティス</strong></p><ul><li>UTF-8対応が簡単に（Path::Tiny、Text::CSV_XS）</li><li>例外処理が安全に（Try::Tiny）</li><li>型安全性を確保（Moo/Mooseの型制約）</li></ul><h2 id=cpanfileでの管理例>cpanfileでの管理例</h2><p>最後に、これらのモジュールを使ったプロジェクトの<code>cpanfile</code>例を示します：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=c1># cpanfile</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;perl&#39;</span><span class=p>,</span> <span class=s>&#39;5.024&#39;</span><span class=p>;</span>  <span class=c1># Perl 5.24以上</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ファイル操作</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Path::Tiny&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 0.144&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;File::Find::Rule&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Web</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;HTTP::Tiny&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Mojolicious&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 9.0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Plack&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># データ処理</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;JSON::MaybeXS&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;YAML::XS&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;XML::LibXML&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Text::CSV_XS&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 日時</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Time::Moment&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># データベース</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;DBI&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;DBD::SQLite&#39;</span><span class=p>;</span>  <span class=c1># SQLite用ドライバ</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># OO</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Moo&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 2.0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ユーティリティ</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;List::MoreUtils&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>requires</span> <span class=s>&#39;Try::Tiny&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># テスト（開発時のみ）</span>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=s>&#39;test&#39;</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>requires</span> <span class=s>&#39;Test2::Suite&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>requires</span> <span class=s>&#39;Test::More&#39;</span><span class=p>,</span> <span class=s>&#39;&gt;= 1.302&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>on</span> <span class=s>&#39;develop&#39;</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>requires</span> <span class=s>&#39;Devel::Cover&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=さらに学ぶために>さらに学ぶために</h2><p>CPANの世界は広大です。今回紹介したモジュール以外にも、特定の用途に特化した優れたモジュールが無数に存在します：</p><ul><li><strong>Task::Kensho</strong>: モダンなPerl開発に推奨されるモジュール集</li><li><strong>MetaCPAN</strong>: <a class=link href=https://metacpan.org/ target=_blank rel=noopener>https://metacpan.org/</a> でモジュールを検索</li><li><strong>CPAN Ratings</strong>: コミュニティの評価を参考に</li><li><strong>YAPC</strong>: PerlのカンファレンスでCPAN作者から直接学ぶ</li></ul><p>Perlの格言に「車輪の再発明をするな」という言葉があります。CPANを活用することで、本来解くべき問題に集中できるのです。</p><p>明日のPerl Advent Calendar Day 4もお楽しみに！</p></section><footer class=article-footer><section class=article-tags><a href=/tags/perl/>Perl</a>
<a href=/tags/cpan/>Cpan</a>
<a href=/tags/modules/>Modules</a>
<a href=/tags/advent-calendar-2025/>Advent-Calendar-2025</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>関連するコンテンツ</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/2025/12/24/000000/><div class=article-image><img src=/public_images/2025/20251224000000-image.jpg loading=lazy data-key data-hash=/public_images/2025/20251224000000-image.jpg></div><div class=article-details><h2 class=article-title>Perlの歴史とコミュニティ - YAPC, Kansai.pm, そしてこれから</h2></div></a></article><article class=has-image><a href=/2025/12/25/000000/><div class=article-image><img src=/public_images/2025/1766588400-image.jpg loading=lazy data-key data-hash=/public_images/2025/1766588400-image.jpg></div><div class=article-details><h2 class=article-title>Perl Advent Calendar 2025 完走！- 振り返りとこれから</h2></div></a></article><article class=has-image><a href=/2025/12/18/000000/><div class=article-image><img src=/public_images/2025/20251218000000-image.jpg loading=lazy data-key data-hash=/public_images/2025/20251218000000-image.jpg></div><div class=article-details><h2 class=article-title>Perlでの暗号化 — Crypt::* モジュール群</h2></div></a></article><article class=has-image><a href=/2025/12/10/000000/><div class=article-image><img src=/public_images/20251210-carton.jpg loading=lazy data-key data-hash=/public_images/20251210-carton.jpg></div><div class=article-details><h2 class=article-title>Carton/cpanfile - モダンなPerl依存関係管理</h2></div></a></article><article class=has-image><a href=/2025/12/02/032850/><div class=article-image><img src=/public_images/art-of-perl-one-liners-20251202032850.jpg loading=lazy data-key data-hash=/public_images/art-of-perl-one-liners-20251202032850.jpg></div><div class=article-details><h2 class=article-title>Perlワンライナーの芸術 - コマンドラインでの強力なテキスト処理</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//nqounet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2000 -
2026 設計パターンを疑え</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> で構築されています。<br>テーマ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> は <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> によって設計されています。</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>