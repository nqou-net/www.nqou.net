<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Perlの正規表現を基礎から実践まで体系的に解説します。演算子、メタ文字、キャプチャ、先読み/後読み、パフォーマンス最適化、実用的なパターン集などを網羅しています。"><title>Perlの正規表現 — 基礎から応用まで</title><link rel=canonical href=https://www.nqou.net/2025/12/05/000000/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Perlの正規表現 — 基礎から応用まで"><meta property='og:description' content="Perlの正規表現を基礎から実践まで体系的に解説します。演算子、メタ文字、キャプチャ、先読み/後読み、パフォーマンス最適化、実用的なパターン集などを網羅しています。"><meta property='og:url' content='https://www.nqou.net/2025/12/05/000000/'><meta property='og:site_name' content='設計パターンを疑え'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='perl'><meta property='article:tag' content='regex'><meta property='article:tag' content='regular-expressions'><meta property='article:tag' content='text-processing'><meta property='article:tag' content='programming'><meta property='article:published_time' content='2025-12-05T00:00:00+09:00'><meta property='article:modified_time' content='2025-12-05T00:00:00+09:00'><meta property='og:image' content='https://www.nqou.net/public_images/20251205-regex.jpg'><meta name=twitter:title content="Perlの正規表現 — 基礎から応用まで"><meta name=twitter:description content="Perlの正規表現を基礎から実践まで体系的に解説します。演算子、メタ文字、キャプチャ、先読み/後読み、パフォーマンス最適化、実用的なパターン集などを網羅しています。"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://www.nqou.net/public_images/20251205-regex.jpg'><link rel="shortcut icon" href=/favicon.png><style>@import 'https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap';:root{--base-font-family:Arial, "Noto Sans JP", sans-serif}</style><link rel=stylesheet href=/css/linkcard.css><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3923446804785015" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js defer></script><script defer>document.addEventListener("DOMContentLoaded",function(){try{typeof mermaid!="undefined"&&document.querySelector(".mermaid")&&mermaid.initialize({startOnLoad:!0,securityLevel:"strict"})}catch(e){console.warn("Mermaid failed to initialize:",e)}})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-E50H9ESN7E"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-E50H9ESN7E")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=メニューを開く・閉じる>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/public_images/blog-nqounet-square.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>設計パターンを疑え</a></h1><h2 class=site-description>名前の嘘を暴き、意図で設計を語る</h2></div></header><ol class=menu-social><li><a href=https://github.com/nqounet target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://x.com/nqounet target=_blank title=X rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/advent-calendar-2025/><svg class="icon icon-tabler icon-tabler-calendar" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><path d="M8 15h.01"/><path d="M12 15h.01"/><path d="M16 15h.01"/><path d="M8 19h.01"/><path d="M12 19h.01"/><path d="M16 19h.01"/></svg>
<span>Perl Advent Calendar 2025 - AI Edition</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/warehouse/><svg class="icon icon-tabler icon-tabler-warehouse" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#bababa" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10l9-6 9 6"/><rect x="5" y="10" width="14" height="10" rx="2"/><rect x="10" y="14" width="4" height="6" rx="1"/><path d="M7 20v-4h2v4"/><path d="M15 20v-4h2v4"/></svg>
<span>Warehouse</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ダークモード</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目次</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#はじめに---perlと正規表現の密接な関係>はじめに - Perlと正規表現の密接な関係</a></li><li><a href=#正規表現の基本演算子>正規表現の基本演算子</a><ol><li><a href=#マッチング演算子m>マッチング演算子（m//）</a></li><li><a href=#置換演算子s>置換演算子（s///）</a></li><li><a href=#文字変換演算子trまたはy>文字変換演算子（tr///またはy///）</a></li></ol></li><li><a href=#メタ文字とキャラクタークラス>メタ文字とキャラクタークラス</a><ol><li><a href=#基本的なメタ文字>基本的なメタ文字</a></li><li><a href=#キャラクタークラス>キャラクタークラス</a></li></ol></li><li><a href=#キャプチャと後方参照>キャプチャと後方参照</a><ol><li><a href=#基本的なキャプチャ>基本的なキャプチャ</a></li><li><a href=#後方参照>後方参照</a></li><li><a href=#名前付きキャプチャperl-510>名前付きキャプチャ（Perl 5.10+）</a></li></ol></li><li><a href=#修飾子の活用>修飾子の活用</a><ol><li><a href=#よく使う修飾子>よく使う修飾子</a></li><li><a href=#r修飾子による非破壊的操作>r修飾子による非破壊的操作</a></li></ol></li><li><a href=#先読み後読みlookaround>先読み・後読み（Lookaround）</a><ol><li><a href=#肯定先読みpositive-lookahead>肯定先読み（Positive Lookahead）</a></li><li><a href=#否定先読みnegative-lookahead>否定先読み（Negative Lookahead）</a></li><li><a href=#肯定後読みpositive-lookbehind>肯定後読み（Positive Lookbehind）</a></li><li><a href=#否定後読みnegative-lookbehind>否定後読み（Negative Lookbehind）</a></li></ol></li><li><a href=#x修飾子を使った読みやすい正規表現>/x修飾子を使った読みやすい正規表現</a></li><li><a href=#実用的なパターン集>実用的なパターン集</a><ol><li><a href=#メールアドレスのバリデーション>メールアドレスのバリデーション</a></li><li><a href=#urlの抽出と解析>URLの抽出と解析</a></li><li><a href=#日付のパース>日付のパース</a></li><li><a href=#ログファイルの解析>ログファイルの解析</a></li></ol></li><li><a href=#perl独自の高度な機能>Perl独自の高度な機能</a><ol><li><a href=#コード実行-code->コード実行（(?{ code })）</a></li><li><a href=#条件分岐conditionyes-patternno-pattern>条件分岐（(?(condition)yes-pattern|no-pattern)）</a></li><li><a href=#再帰的パターンr>再帰的パターン（(?R)）</a></li></ol></li><li><a href=#正規表現のデバッグ>正規表現のデバッグ</a><ol><li><a href=#use-re-debugを使ったデバッグ>use re &lsquo;debug&rsquo;を使ったデバッグ</a></li><li><a href=#use-re-debugcolorでカラー出力>use re &lsquo;debugcolor&rsquo;でカラー出力</a></li><li><a href=#regexpdebuggerモジュールの使用>Regexp::Debuggerモジュールの使用</a></li></ol></li><li><a href=#パフォーマンスのtips>パフォーマンスのTips</a><ol><li><a href=#不要なキャプチャを避ける非キャプチャグループ>不要なキャプチャを避ける（非キャプチャグループ）</a></li><li><a href=#アンカーを活用する>アンカーを活用する</a></li><li><a href=#貪欲vs非貪欲マッチの選択>貪欲vs非貪欲マッチの選択</a></li><li><a href=#qrでパターンをプリコンパイル>qr//でパターンをプリコンパイル</a></li></ol></li><li><a href=#よくある間違いと落とし穴>よくある間違いと落とし穴</a><ol><li><a href=#1-貪欲マッチによる予期しない結果>1. 貪欲マッチによる予期しない結果</a></li><li><a href=#2--が改行にマッチしない>2. . が改行にマッチしない</a></li><li><a href=#3-キャプチャ変数のスコープ>3. キャプチャ変数のスコープ</a></li><li><a href=#4-gフラグの状態管理>4. /gフラグの状態管理</a></li><li><a href=#5-メタ文字のエスケープ忘れ>5. メタ文字のエスケープ忘れ</a></li></ol></li><li><a href=#まとめ>まとめ</a></li><li><a href=#参考資料>参考資料</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/2025/12/05/000000/><img src=/public_images/20251205-regex.jpg loading=lazy alt="Featured image of post Perlの正規表現 — 基礎から応用まで"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/2025/12/05/000000/>Perlの正規表現 — 基礎から応用まで</a></h2><h3 class=article-subtitle>Perlの正規表現を基礎から実践まで体系的に解説します。演算子、メタ文字、キャプチャ、先読み/後読み、パフォーマンス最適化、実用的なパターン集などを網羅しています。</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>12月 05, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>読了時間: 12分</time></div></footer></div></header><section class=article-content><h2 id=はじめに---perlと正規表現の密接な関係>はじめに - Perlと正規表現の密接な関係</h2><p>Perlと正規表現は切っても切れない関係にあります。Larry Wallが1987年にPerlを作った理由の一つが、強力なテキスト処理能力でした。正規表現はPerlの「第一級市民」として言語仕様に組み込まれており、他の言語では関数呼び出しが必要な処理も、Perlでは演算子として直接記述できます。</p><p>実際、多くのプログラミング言語の正規表現エンジンは「PCRE（Perl Compatible Regular Expressions）」と呼ばれ、Perl互換を謳っています。つまり、Perlの正規表現がデファクトスタンダードになっているのです。</p><p>この記事では、Perlの正規表現を基礎から応用まで体系的に解説します。</p><h2 id=正規表現の基本演算子>正規表現の基本演算子</h2><p>Perlには正規表現のための専用演算子が用意されています。</p><h3 id=マッチング演算子m>マッチング演算子（m//）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;Hello, Perl World!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 基本的なマッチング</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span> <span class=sr>m/Perl/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found Perl!&#34;</span><span class=p>;</span>  <span class=c1># これが実行される</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># デリミタは変更可能</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span> <span class=sr>m{World}</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found World!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># m を省略できる（デリミタが / の場合のみ）</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /Hello/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found Hello!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 否定マッチング</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>!~</span> <span class=sr>/Python/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Python not found!&#34;</span><span class=p>;</span>  <span class=c1># これが実行される</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=置換演算子s>置換演算子（s///）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;I love Python&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 基本的な置換</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span> <span class=sr>s/Python/Perl/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$text</span><span class=p>;</span>  <span class=c1># &#34;I love Perl&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># グローバル置換（g修飾子）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$message</span> <span class=o>=</span> <span class=s>&#34;foo bar foo baz foo&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$message</span> <span class=o>=~</span> <span class=sr>s/foo/FOO/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$message</span><span class=p>;</span>  <span class=c1># &#34;FOO bar FOO baz FOO&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 非破壊的置換（r修飾子、Perl 5.14+）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$original</span> <span class=o>=</span> <span class=s>&#34;Hello World&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$replaced</span> <span class=o>=</span> <span class=nv>$original</span> <span class=o>=~</span> <span class=sr>s/World/Perl/</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$original</span><span class=p>;</span>  <span class=c1># &#34;Hello World&#34; （元の文字列は変更されない）</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$replaced</span><span class=p>;</span>  <span class=c1># &#34;Hello Perl&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=文字変換演算子trまたはy>文字変換演算子（tr///またはy///）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;Hello World&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 小文字を大文字に変換</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span> <span class=nb>tr</span><span class=sr>/a-z/</span><span class=n>A</span><span class=o>-</span><span class=n>Z</span><span class=o>/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$text</span><span class=p>;</span>  <span class=c1># &#34;HELLO WORLD&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 文字数をカウント</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$count</span> <span class=o>=</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span> <span class=nb>tr</span><span class=sr>/L/</span><span class=o>/</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Number of L: $count&#34;</span><span class=p>;</span>  <span class=c1># &#34;Number of L: 3&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 文字を削除（d修飾子）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$phone</span> <span class=o>=</span> <span class=s>&#34;090-1234-5678&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$phone</span> <span class=o>=~</span> <span class=nb>tr</span><span class=sr>/-/</span><span class=o>/</span><span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$phone</span><span class=p>;</span>  <span class=c1># &#34;09012345678&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=メタ文字とキャラクタークラス>メタ文字とキャラクタークラス</h2><h3 id=基本的なメタ文字>基本的なメタ文字</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@patterns</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/^Hello/</span><span class=p>,</span>    <span class=s>&#34;Hello World&#34;</span><span class=p>,</span>    <span class=s>&#34;行頭マッチ&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/World$/</span><span class=p>,</span>    <span class=s>&#34;Hello World&#34;</span><span class=p>,</span>    <span class=s>&#34;行末マッチ&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/H.llo/</span><span class=p>,</span>     <span class=s>&#34;Hello&#34;</span><span class=p>,</span>          <span class=s>&#34;任意の1文字（.）&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/Hel*o/</span><span class=p>,</span>     <span class=s>&#34;Heo&#34;</span><span class=p>,</span>            <span class=s>&#34;0回以上の繰り返し（*）&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/Hel+o/</span><span class=p>,</span>     <span class=s>&#34;Hello&#34;</span><span class=p>,</span>          <span class=s>&#34;1回以上の繰り返し（+）&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/Hel?o/</span><span class=p>,</span>     <span class=s>&#34;Helo&#34;</span><span class=p>,</span>           <span class=s>&#34;0回または1回（?）&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/Hel{2}o/</span><span class=p>,</span>   <span class=s>&#34;Hello&#34;</span><span class=p>,</span>          <span class=s>&#34;正確にn回（{n}）&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=sx>qr/\d{3}-\d{4}/</span><span class=p>,</span> <span class=s>&#34;090-1234&#34;</span><span class=p>,</span>     <span class=s>&#34;数字の繰り返し&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$p</span> <span class=p>(</span><span class=nv>@patterns</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=p>(</span><span class=nv>$pattern</span><span class=p>,</span> <span class=nv>$text</span><span class=p>,</span> <span class=nv>$desc</span><span class=p>)</span> <span class=o>=</span> <span class=nv>@$p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span> <span class=nv>$pattern</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;✓ $desc: &#39;$text&#39; matches $pattern&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;✗ $desc: &#39;$text&#39; does not match $pattern&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=キャラクタークラス>キャラクタークラス</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 標準的なキャラクタークラス</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>%classes</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\d&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;0123456789&#39;</span><span class=p>,</span>          <span class=c1># 数字</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\D&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;abc&#39;</span><span class=p>,</span>                 <span class=c1># 数字以外</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\w&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;Hello_123&#39;</span><span class=p>,</span>           <span class=c1># 単語文字</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\W&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;!@#$%&#39;</span><span class=p>,</span>               <span class=c1># 単語文字以外</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\s&#39;</span> <span class=o>=&gt;</span> <span class=s>&#34; \t\n&#34;</span><span class=p>,</span>               <span class=c1># 空白文字</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;\S&#39;</span> <span class=o>=&gt;</span> <span class=s>&#39;Hello&#39;</span><span class=p>,</span>               <span class=c1># 空白文字以外</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=k>my</span> <span class=p>(</span><span class=nv>$class</span><span class=p>,</span> <span class=nv>$text</span><span class=p>)</span> <span class=o>=</span> <span class=nb>each</span> <span class=nv>%classes</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /$class/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$class matches in: $text&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># カスタムキャラクタークラス</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$hex</span> <span class=o>=</span> <span class=s>&#34;A1B2C3&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$hex</span> <span class=o>=~</span><span class=sr> /^[0-9A-Fa-f]+$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$hex is a valid hex string&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 否定キャラクタークラス</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$no_vowels</span> <span class=o>=</span> <span class=s>&#34;xyz&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$no_vowels</span> <span class=o>=~</span><span class=sr> /^[^aeiou]+$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$no_vowels contains no vowels&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=キャプチャと後方参照>キャプチャと後方参照</h2><h3 id=基本的なキャプチャ>基本的なキャプチャ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$email</span> <span class=o>=</span> <span class=s>&#39;user@example.com&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$email</span> <span class=o>=~</span><span class=sr> /^([^@]+)@([^@]+)$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Username: $1&#34;</span><span class=p>;</span>     <span class=c1># &#34;user&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Domain: $2&#34;</span><span class=p>;</span>       <span class=c1># &#34;example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># キャプチャ変数は特殊変数に保存される</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Full match: $&amp;&#34;</span><span class=p>;</span>       <span class=c1># &#34;user@example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Before match: $`&#34;</span><span class=p>;</span>     <span class=c1># &#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;After match: $&#39;&#34;</span><span class=p>;</span>      <span class=c1># &#34;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=後方参照>後方参照</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 同じ文字の繰り返しを検出</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text1</span> <span class=o>=</span> <span class=s>&#34;bookkeeper&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text1</span> <span class=o>=~</span><span class=sr> /(.)\1/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found repeated character: $1$1&#34;</span><span class=p>;</span>  <span class=c1># &#34;oo&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HTMLタグのマッチング</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$html</span> <span class=o>=</span> <span class=s>&#39;&lt;div&gt;content&lt;/div&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /&lt;(\w+)&gt;.*?&lt;\/\1&gt;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found tag: $1&#34;</span><span class=p>;</span>  <span class=c1># &#34;div&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># パターン内での後方参照</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text2</span> <span class=o>=</span> <span class=s>&#34;the the cat&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$text2</span> <span class=o>=~</span> <span class=sr>s/\b(\w+)\s+\1\b/$1/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$text2</span><span class=p>;</span>  <span class=c1># &#34;the cat&#34; （重複した単語を削除）</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=名前付きキャプチャperl-510>名前付きキャプチャ（Perl 5.10+）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$date</span> <span class=o>=</span> <span class=s>&#34;2025-12-05&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$date</span> <span class=o>=~</span><span class=sr> /(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Year: $+{year}&#34;</span><span class=p>;</span>      <span class=c1># &#34;2025&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Month: $+{month}&#34;</span><span class=p>;</span>    <span class=c1># &#34;12&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Day: $+{day}&#34;</span><span class=p>;</span>        <span class=c1># &#34;05&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 名前付きキャプチャを使った置換</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$log</span> <span class=o>=</span> <span class=s>&#34;Error at 2025-12-05 10:30:00&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$log</span> <span class=o>=~</span> <span class=sr>s/(?&lt;y&gt;\d{4})-(?&lt;m&gt;\d{2})-(?&lt;d&gt;\d{2})/$+{y}\/$+{m}\/$+{d}/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=nv>$log</span><span class=p>;</span>  <span class=c1># &#34;Error at 2025/12/05 10:30:00&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=修飾子の活用>修飾子の活用</h2><h3 id=よく使う修飾子>よく使う修飾子</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;Hello\nWorld\nPerl&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># i修飾子: 大文字小文字を区別しない</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /hello/i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Case-insensitive match!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># g修飾子: グローバルマッチ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@words</span> <span class=o>=</span> <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /\w+/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Words: @words&#34;</span><span class=p>;</span>  <span class=c1># &#34;Words: Hello World Perl&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># s修飾子: . が改行にもマッチ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /Hello.+Perl/s</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched across lines!&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># m修飾子: ^ と $ が各行の先頭・末尾にマッチ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@lines</span> <span class=o>=</span> <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /^.+$/mg</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Lines found: &#34;</span> <span class=o>.</span> <span class=nb>scalar</span><span class=p>(</span><span class=nv>@lines</span><span class=p>);</span>  <span class=c1># &#34;Lines found: 3&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># x修飾子: 空白とコメントを無視（後述）</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=r修飾子による非破壊的操作>r修飾子による非破壊的操作</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$original</span> <span class=o>=</span> <span class=s>&#34;foo bar baz&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 従来の方法（破壊的）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$copy1</span> <span class=o>=</span> <span class=nv>$original</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$copy1</span> <span class=o>=~</span> <span class=sr>s/foo/FOO/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># r修飾子を使った方法（非破壊的、推奨）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$copy2</span> <span class=o>=</span> <span class=nv>$original</span> <span class=o>=~</span> <span class=sr>s/foo/FOO/</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Original: $original&#34;</span><span class=p>;</span>  <span class=c1># &#34;foo bar baz&#34;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Copy1: $copy1&#34;</span><span class=p>;</span>        <span class=c1># &#34;FOO bar baz&#34;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Copy2: $copy2&#34;</span><span class=p>;</span>        <span class=c1># &#34;FOO bar baz&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># チェーンも可能</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$result</span> <span class=o>=</span> <span class=nv>$original</span>
</span></span><span class=line><span class=cl>    <span class=o>=~</span> <span class=sr>s/foo/FOO/</span><span class=n>r</span>
</span></span><span class=line><span class=cl>    <span class=o>=~</span> <span class=sr>s/bar/BAR/</span><span class=n>r</span>
</span></span><span class=line><span class=cl>    <span class=o>=~</span> <span class=sr>s/baz/BAZ/</span><span class=n>r</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Result: $result&#34;</span><span class=p>;</span>  <span class=c1># &#34;FOO BAR BAZ&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=先読み後読みlookaround>先読み・後読み（Lookaround）</h2><h3 id=肯定先読みpositive-lookahead>肯定先読み（Positive Lookahead）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># パスワード検証: 最低8文字で、数字を含む</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$password1</span> <span class=o>=</span> <span class=s>&#34;pass1234&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$password2</span> <span class=o>=</span> <span class=s>&#34;password&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$pass</span> <span class=p>(</span><span class=nv>$password1</span><span class=p>,</span> <span class=nv>$password2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$pass</span> <span class=o>=~</span><span class=sr> /^(?=.*\d).{8,}$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$pass: Valid password&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$pass: Invalid password&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1># 出力:</span>
</span></span><span class=line><span class=cl><span class=c1># pass1234: Valid password</span>
</span></span><span class=line><span class=cl><span class=c1># password: Invalid password</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 複数条件のチェック</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$strong_pass</span> <span class=o>=</span> <span class=s>&#34;Abc123!@&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$strong_pass</span> <span class=o>=~</span><span class=sr> /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%]).{8,}$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$strong_pass is a strong password&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=否定先読みnegative-lookahead>否定先読み（Negative Lookahead）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 特定の拡張子以外のファイルをマッチ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@files</span> <span class=o>=</span> <span class=sx>qw(
</span></span></span><span class=line><span class=cl><span class=sx>    document.txt
</span></span></span><span class=line><span class=cl><span class=sx>    image.jpg
</span></span></span><span class=line><span class=cl><span class=sx>    script.pl
</span></span></span><span class=line><span class=cl><span class=sx>    data.json
</span></span></span><span class=line><span class=cl><span class=sx>    backup.bak
</span></span></span><span class=line><span class=cl><span class=sx>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@non_backup</span> <span class=o>=</span> <span class=nb>grep</span> <span class=p>{</span> <span class=sr>/\.(?!bak$)\w+$/</span> <span class=p>}</span> <span class=nv>@files</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Non-backup files: @non_backup&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;Non-backup files: document.txt image.jpg script.pl data.json&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=肯定後読みpositive-lookbehind>肯定後読み（Positive Lookbehind）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 金額の数値部分のみを抽出</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$price</span> <span class=o>=</span> <span class=s>&#34;Price: $1,234.56&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$price</span> <span class=o>=~</span><span class=sr> /(?&lt;=\$)[\d,]+\.?\d*/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Amount: $&amp;&#34;</span><span class=p>;</span>  <span class=c1># &#34;Amount: 1,234.56&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># プロトコルを除いたドメインを抽出</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$url</span> <span class=o>=</span> <span class=s>&#34;https://www.example.com/path&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$url</span> <span class=o>=~</span><span class=sr> /(?&lt;=:\/\/)[^\/]+/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Domain: $&amp;&#34;</span><span class=p>;</span>  <span class=c1># &#34;Domain: www.example.com&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=否定後読みnegative-lookbehind>否定後読み（Negative Lookbehind）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># $記号が前にない数値をマッチ</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;The price is $100 but we have 50 items&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@numbers</span> <span class=o>=</span> <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(?&lt;!\$)\b\d+\b/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Non-price numbers: @numbers&#34;</span><span class=p>;</span>  <span class=c1># &#34;Non-price numbers: 50&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=x修飾子を使った読みやすい正規表現>/x修飾子を使った読みやすい正規表現</h2><p>複雑な正規表現は読みにくくなりがちです。<code>/x</code>修飾子を使うと、空白やコメントを含めることができます。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 読みにくい正規表現</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$email_regex_compact</span> <span class=o>=</span> <span class=sx>qr/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># /x修飾子で読みやすく</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$email_regex_readable</span> <span class=o>=</span> <span class=sx>qr/
</span></span></span><span class=line><span class=cl><span class=sx>    ^                       # 行頭
</span></span></span><span class=line><span class=cl><span class=sx>    [a-zA-Z0-9._%+-]+       # ローカルパート（ユーザー名）
</span></span></span><span class=line><span class=cl><span class=sx>    @                       # アットマーク
</span></span></span><span class=line><span class=cl><span class=sx>    [a-zA-Z0-9.-]+          # ドメイン名
</span></span></span><span class=line><span class=cl><span class=sx>    \.                      # ドット
</span></span></span><span class=line><span class=cl><span class=sx>    [a-zA-Z]{2,}            # トップレベルドメイン
</span></span></span><span class=line><span class=cl><span class=sx>    $                       # 行末
</span></span></span><span class=line><span class=cl><span class=sx>/</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$email</span> <span class=o>=</span> <span class=s>&#34;user@example.com&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$email</span> <span class=o>=~</span> <span class=nv>$email_regex_readable</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$email is valid&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># より複雑な例: URLの解析</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$url_regex</span> <span class=o>=</span> <span class=sx>qr{
</span></span></span><span class=line><span class=cl><span class=sx>    ^
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;protocol&gt; https? )       # プロトコル
</span></span></span><span class=line><span class=cl><span class=sx>    ://
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;domain&gt;                  # ドメイン
</span></span></span><span class=line><span class=cl><span class=sx>        (?:
</span></span></span><span class=line><span class=cl><span class=sx>            [a-zA-Z0-9-]+       # サブドメイン
</span></span></span><span class=line><span class=cl><span class=sx>            \.
</span></span></span><span class=line><span class=cl><span class=sx>        )*
</span></span></span><span class=line><span class=cl><span class=sx>        [a-zA-Z0-9-]+           # ドメイン名
</span></span></span><span class=line><span class=cl><span class=sx>        \.
</span></span></span><span class=line><span class=cl><span class=sx>        [a-zA-Z]{2,}            # TLD
</span></span></span><span class=line><span class=cl><span class=sx>    )
</span></span></span><span class=line><span class=cl><span class=sx>    (?:
</span></span></span><span class=line><span class=cl><span class=sx>        :
</span></span></span><span class=line><span class=cl><span class=sx>        (?&lt;port&gt; \d+ )          # ポート番号（オプション）
</span></span></span><span class=line><span class=cl><span class=sx>    )?
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;path&gt; /[^\s]* )?         # パス（オプション）
</span></span></span><span class=line><span class=cl><span class=sx>    $
</span></span></span><span class=line><span class=cl><span class=sx>}</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$url</span> <span class=o>=</span> <span class=s>&#34;https://www.example.com:8080/path/to/page&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$url</span> <span class=o>=~</span> <span class=nv>$url_regex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Protocol: $+{protocol}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Domain: $+{domain}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Port: &#34;</span> <span class=o>.</span> <span class=p>(</span><span class=vg>$+</span><span class=p>{</span><span class=n>port</span><span class=p>}</span> <span class=sr>//</span> <span class=s>&#39;default&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Path: &#34;</span> <span class=o>.</span> <span class=p>(</span><span class=vg>$+</span><span class=p>{</span><span class=n>path</span><span class=p>}</span> <span class=sr>//</span> <span class=s>&#39;/&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=実用的なパターン集>実用的なパターン集</h2><h3 id=メールアドレスのバリデーション>メールアドレスのバリデーション</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>validate_email</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$email</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># RFC 5322準拠の簡易版</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$regex</span> <span class=o>=</span> <span class=sx>qr/
</span></span></span><span class=line><span class=cl><span class=sx>        ^
</span></span></span><span class=line><span class=cl><span class=sx>        [a-zA-Z0-9.!#$%&amp;&#39;*+\/</span><span class=o>=</span><span class=p>?</span><span class=o>^</span><span class=n>_</span><span class=err>`</span><span class=p>{</span><span class=o>|</span><span class=p>}</span><span class=o>~-</span><span class=p>]</span><span class=o>+</span>   <span class=c1># ローカルパート</span>
</span></span><span class=line><span class=cl>        <span class=nv>@</span>
</span></span><span class=line><span class=cl>        <span class=err>[</span><span class=nv>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=p>](?:[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=o>-</span><span class=p>]{</span><span class=mi>0</span><span class=p>,</span><span class=mi>61</span><span class=p>}[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=p>])?</span>
</span></span><span class=line><span class=cl>        <span class=p>(?:</span><span class=o>\.</span><span class=p>[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=p>](?:[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=o>-</span><span class=p>]{</span><span class=mi>0</span><span class=p>,</span><span class=mi>61</span><span class=p>}[</span><span class=n>a</span><span class=o>-</span><span class=n>zA</span><span class=o>-</span><span class=n>Z0</span><span class=o>-</span><span class=mi>9</span><span class=p>])?)</span><span class=o>*</span>
</span></span><span class=line><span class=cl>        <span class=nv>$</span>
</span></span><span class=line><span class=cl>    <span class=err>/</span><span class=nv>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$email</span> <span class=o>=~</span> <span class=nv>$regex</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@emails</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;user@example.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;invalid@&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;no-at-sign.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;user+tag@example.co.jp&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$email</span> <span class=p>(</span><span class=nv>@emails</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$status</span> <span class=o>=</span> <span class=n>validate_email</span><span class=p>(</span><span class=nv>$email</span><span class=p>)</span> <span class=p>?</span> <span class=s>&#34;✓&#34;</span> <span class=p>:</span> <span class=s>&#34;✗&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$status $email&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=urlの抽出と解析>URLの抽出と解析</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&lt;&lt;&#39;</span><span class=dl>TEXT</span><span class=s>&#39;;
</span></span></span><span class=line><span class=cl><span class=s>Visit https://www.example.com and http://blog.example.org:8080/post/123
</span></span></span><span class=line><span class=cl><span class=s>or ftp://files.example.net/download
</span></span></span><span class=line><span class=cl><span class=dl>TEXT</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># URLを抽出</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@urls</span> <span class=o>=</span> <span class=nv>$text</span> <span class=o>=~</span> <span class=sr>m{
</span></span></span><span class=line><span class=cl><span class=sr>    \b
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;protocol&gt; https? | ftp )
</span></span></span><span class=line><span class=cl><span class=sr>    ://
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;domain&gt; [a-zA-Z0-9.-]+ )
</span></span></span><span class=line><span class=cl><span class=sr>    (?::(?&lt;port&gt;\d+))?
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;path&gt; /[^\s]* )?
</span></span></span><span class=line><span class=cl><span class=sr>}gx</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Found URLs:&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span> <span class=sr>m{
</span></span></span><span class=line><span class=cl><span class=sr>    \b
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;protocol&gt; https? | ftp )
</span></span></span><span class=line><span class=cl><span class=sr>    ://
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;domain&gt; [a-zA-Z0-9.-]+ )
</span></span></span><span class=line><span class=cl><span class=sr>    (?::(?&lt;port&gt;\d+))?
</span></span></span><span class=line><span class=cl><span class=sr>    (?&lt;path&gt; /[^\s]* )?
</span></span></span><span class=line><span class=cl><span class=sr>}gx</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  Protocol: $+{protocol}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  Domain: $+{domain}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  Port: &#34;</span> <span class=o>.</span> <span class=p>(</span><span class=vg>$+</span><span class=p>{</span><span class=n>port</span><span class=p>}</span> <span class=sr>//</span> <span class=s>&#39;default&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  Path: &#34;</span> <span class=o>.</span> <span class=p>(</span><span class=vg>$+</span><span class=p>{</span><span class=n>path</span><span class=p>}</span> <span class=sr>//</span> <span class=s>&#39;/&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  ---&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=日付のパース>日付のパース</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>parse_date</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$date_str</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># YYYY-MM-DD形式</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$date_str</span> <span class=o>=~</span> <span class=sr>m{
</span></span></span><span class=line><span class=cl><span class=sr>        ^
</span></span></span><span class=line><span class=cl><span class=sr>        (?&lt;year&gt;  \d{4}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=p>(?</span><span class=sr>&lt;month&gt;</span> <span class=o>\</span><span class=n>d</span><span class=p>{</span><span class=mi>2</span><span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=p>(?</span><span class=sr>&lt;day&gt;</span>   <span class=o>\</span><span class=n>d</span><span class=p>{</span><span class=mi>2</span><span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nv>$</span>
</span></span><span class=line><span class=cl>    <span class=err>}</span><span class=nv>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>year</span>  <span class=o>=&gt;</span> <span class=vg>$+</span><span class=p>{</span><span class=n>year</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>month</span> <span class=o>=&gt;</span> <span class=vg>$+</span><span class=p>{</span><span class=n>month</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>day</span>   <span class=o>=&gt;</span> <span class=vg>$+</span><span class=p>{</span><span class=n>day</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nb>format</span> <span class=o>=&gt;</span> <span class=s>&#39;ISO8601&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># MM/DD/YYYY形式</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$date_str</span> <span class=o>=~</span> <span class=sr>m{
</span></span></span><span class=line><span class=cl><span class=sr>        ^
</span></span></span><span class=line><span class=cl><span class=sr>        (?&lt;month&gt; \d{1,2}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>/</span>
</span></span><span class=line><span class=cl>        <span class=p>(?</span><span class=sr>&lt;day&gt;</span>   <span class=o>\</span><span class=n>d</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=o>/</span>
</span></span><span class=line><span class=cl>        <span class=p>(?</span><span class=sr>&lt;year&gt;</span>  <span class=o>\</span><span class=n>d</span><span class=p>{</span><span class=mi>4</span><span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nv>$</span>
</span></span><span class=line><span class=cl>    <span class=err>}</span><span class=nv>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>year</span>  <span class=o>=&gt;</span> <span class=vg>$+</span><span class=p>{</span><span class=n>year</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=n>month</span> <span class=o>=&gt;</span> <span class=nb>sprintf</span><span class=p>(</span><span class=s>&#34;%02d&#34;</span><span class=p>,</span> <span class=vg>$+</span><span class=p>{</span><span class=n>month</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=n>day</span>   <span class=o>=&gt;</span> <span class=nb>sprintf</span><span class=p>(</span><span class=s>&#34;%02d&#34;</span><span class=p>,</span> <span class=vg>$+</span><span class=p>{</span><span class=n>day</span><span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=nb>format</span> <span class=o>=&gt;</span> <span class=s>&#39;US&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>undef</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@dates</span> <span class=o>=</span> <span class=p>(</span><span class=s>&#39;2025-12-05&#39;</span><span class=p>,</span> <span class=s>&#39;12/05/2025&#39;</span><span class=p>,</span> <span class=s>&#39;invalid&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$date</span> <span class=p>(</span><span class=nv>@dates</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$parsed</span> <span class=o>=</span> <span class=n>parse_date</span><span class=p>(</span><span class=nv>$date</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$parsed</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$date -&gt; $parsed-&gt;{year}-$parsed-&gt;{month}-$parsed-&gt;{day} ($parsed-&gt;{format})&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$date -&gt; Invalid format&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ログファイルの解析>ログファイルの解析</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$log</span> <span class=o>=</span> <span class=s>&lt;&lt;&#39;</span><span class=dl>LOG</span><span class=s>&#39;;
</span></span></span><span class=line><span class=cl><span class=s>2025-12-05 10:30:15 [INFO] Application started
</span></span></span><span class=line><span class=cl><span class=s>2025-12-05 10:30:22 [ERROR] Connection failed: timeout
</span></span></span><span class=line><span class=cl><span class=s>2025-12-05 10:31:05 [WARN] Retrying connection
</span></span></span><span class=line><span class=cl><span class=s>2025-12-05 10:31:10 [INFO] Connected successfully
</span></span></span><span class=line><span class=cl><span class=dl>LOG</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$log_regex</span> <span class=o>=</span> <span class=sx>qr{
</span></span></span><span class=line><span class=cl><span class=sx>    ^
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;date&gt;     \d{4}-\d{2}-\d{2} )
</span></span></span><span class=line><span class=cl><span class=sx>    \s+
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;time&gt;     \d{2}:\d{2}:\d{2} )
</span></span></span><span class=line><span class=cl><span class=sx>    \s+
</span></span></span><span class=line><span class=cl><span class=sx>    \[(?&lt;level&gt;  \w+ )\]
</span></span></span><span class=line><span class=cl><span class=sx>    \s+
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;message&gt;  .+ )
</span></span></span><span class=line><span class=cl><span class=sx>    $
</span></span></span><span class=line><span class=cl><span class=sx>}</span><span class=n>xm</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@errors</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@warnings</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nv>$log</span> <span class=o>=~</span><span class=sr> /$log_regex/g</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>%entry</span> <span class=o>=</span> <span class=nv>%</span><span class=err>+;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nv>if</span> <span class=p>(</span><span class=nv>$entry</span><span class=p>{</span><span class=n>level</span><span class=p>}</span> <span class=ow>eq</span> <span class=s>&#39;ERROR&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>push</span> <span class=nv>@errors</span><span class=p>,</span> <span class=o>\</span><span class=nv>%entry</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>elsif</span> <span class=p>(</span><span class=nv>$entry</span><span class=p>{</span><span class=n>level</span><span class=p>}</span> <span class=ow>eq</span> <span class=s>&#39;WARN&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>push</span> <span class=nv>@warnings</span><span class=p>,</span> <span class=o>\</span><span class=nv>%entry</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Errors found: &#34;</span> <span class=o>.</span> <span class=nb>scalar</span><span class=p>(</span><span class=nv>@errors</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$error</span> <span class=p>(</span><span class=nv>@errors</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  [$error-&gt;{date} $error-&gt;{time}] $error-&gt;{message}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;\nWarnings found: &#34;</span> <span class=o>.</span> <span class=nb>scalar</span><span class=p>(</span><span class=nv>@warnings</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$warn</span> <span class=p>(</span><span class=nv>@warnings</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;  [$warn-&gt;{date} $warn-&gt;{time}] $warn-&gt;{message}&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=perl独自の高度な機能>Perl独自の高度な機能</h2><h3 id=コード実行-code->コード実行（(?{ code })）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># マッチ中にコードを実行</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;123 456 789&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$sum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\d+)(?{ $sum += $1 })/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Sum of numbers: $sum&#34;</span><span class=p>;</span>  <span class=c1># &#34;Sum of numbers: 1368&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># より実用的な例: 動的なバリデーション</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$max_length</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$input</span> <span class=o>=</span> <span class=s>&#34;hello&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$input</span> <span class=o>=~</span><span class=sr> /^(.{1,$max_length})(?{ length($1) &lt;= $max_length })$/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$input is within length limit&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=条件分岐conditionyes-patternno-pattern>条件分岐（(?(condition)yes-pattern|no-pattern)）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># HTMLタグのマッチング（閉じタグの有無を確認）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$html1</span> <span class=o>=</span> <span class=s>&#39;&lt;div&gt;content&lt;/div&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$html2</span> <span class=o>=</span> <span class=s>&#39;&lt;img src=&#34;test.jpg&#34;&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$tag_regex</span> <span class=o>=</span> <span class=sx>qr{
</span></span></span><span class=line><span class=cl><span class=sx>    &lt;
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;tag&gt; \w+ )
</span></span></span><span class=line><span class=cl><span class=sx>    (?&lt;attrs&gt; [^&gt;]* )
</span></span></span><span class=line><span class=cl><span class=sx>    &gt;
</span></span></span><span class=line><span class=cl><span class=sx>    (?(1)                       # もしタグ名がキャプチャされていれば
</span></span></span><span class=line><span class=cl><span class=sx>        (?&lt;content&gt; .*? )
</span></span></span><span class=line><span class=cl><span class=sx>        &lt;/\g{tag}&gt;              # 対応する閉じタグが必要
</span></span></span><span class=line><span class=cl><span class=sx>    )
</span></span></span><span class=line><span class=cl><span class=sx>}</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$html</span> <span class=p>(</span><span class=nv>$html1</span><span class=p>,</span> <span class=nv>$html2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span> <span class=nv>$tag_regex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$html: Valid HTML tag&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>say</span> <span class=s>&#34;$html: Invalid HTML tag&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=再帰的パターンr>再帰的パターン（(?R)）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>feature</span> <span class=s>&#39;say&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 括弧のバランスをチェック</span>
</span></span><span class=line><span class=cl><span class=k>sub</span> <span class=nf>check_balanced</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$str</span> <span class=o>=</span> <span class=nb>shift</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># (?-1)は直前のキャプチャグループを再帰的に呼び出す</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$balanced</span> <span class=o>=</span> <span class=sx>qr{
</span></span></span><span class=line><span class=cl><span class=sx>        \(
</span></span></span><span class=line><span class=cl><span class=sx>        (?:
</span></span></span><span class=line><span class=cl><span class=sx>            [^()]+ |
</span></span></span><span class=line><span class=cl><span class=sx>            (?-1)       # 再帰
</span></span></span><span class=line><span class=cl><span class=sx>        )*
</span></span></span><span class=line><span class=cl><span class=sx>        \)
</span></span></span><span class=line><span class=cl><span class=sx>    }</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$str</span> <span class=o>=~</span><span class=sr> /^$balanced$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>@tests</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;(hello)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;(hello (world))&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;((nested) (groups))&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;(unbalanced&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;(too) many)&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$test</span> <span class=p>(</span><span class=nv>@tests</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$status</span> <span class=o>=</span> <span class=n>check_balanced</span><span class=p>(</span><span class=nv>$test</span><span class=p>)</span> <span class=p>?</span> <span class=s>&#34;✓&#34;</span> <span class=p>:</span> <span class=s>&#34;✗&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;$status $test&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=正規表現のデバッグ>正規表現のデバッグ</h2><h3 id=use-re-debugを使ったデバッグ>use re &lsquo;debug&rsquo;を使ったデバッグ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>re</span> <span class=s>&#39;debug&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># デバッグ情報を表示</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;hello world&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /h(.+)d/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched: $1&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># STDERRに詳細なマッチング情報が出力される</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=use-re-debugcolorでカラー出力>use re &lsquo;debugcolor&rsquo;でカラー出力</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>re</span> <span class=s>&#39;debugcolor&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;test@example.com&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /^([^@]+)@([^@]+)$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1># カラー付きでデバッグ情報が出力される</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=regexpdebuggerモジュールの使用>Regexp::Debuggerモジュールの使用</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Regexp::Debugger</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;The year is 2025&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /The\s+year\s+is\s+(\d+)/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># インタラクティブなデバッガーが起動</span>
</span></span><span class=line><span class=cl><span class=c1># ステップ実行、バックトラックの確認などが可能</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=パフォーマンスのtips>パフォーマンスのTips</h2><h3 id=不要なキャプチャを避ける非キャプチャグループ>不要なキャプチャを避ける（非キャプチャグループ）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>use</span> <span class=nn>Benchmark</span> <span class=sx>qw(cmpthese)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;hello world&#34;</span> <span class=n>x</span> <span class=mi>1000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cmpthese</span><span class=p>(</span><span class=mi>10000</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;with_capture&#39;</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(hello) (world)/g</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s>&#39;without_capture&#39;</span> <span class=o>=&gt;</span> <span class=k>sub</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(?:hello) (?:world)/g</span><span class=p>;</span>  <span class=c1># (?:...) は非キャプチャ</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># without_captureの方が高速</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=アンカーを活用する>アンカーを活用する</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 遅い: テキスト全体を探索</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;x&#34;</span> <span class=n>x</span> <span class=mi>10000</span> <span class=o>.</span> <span class=s>&#34;target&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /target/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 速い: 末尾から探索</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /target$/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># さらに速い: 位置を限定</span>
</span></span><span class=line><span class=cl><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /\Atarget/</span><span class=p>;</span>  <span class=c1># 文字列の先頭のみ</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=貪欲vs非貪欲マッチの選択>貪欲vs非貪欲マッチの選択</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$html</span> <span class=o>=</span> <span class=s>&#39;&lt;div&gt;content1&lt;/div&gt;&lt;div&gt;content2&lt;/div&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 貪欲マッチ: 最初の&lt;div&gt;から最後の&lt;/div&gt;までマッチ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /&lt;div&gt;.*&lt;\/div&gt;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Greedy: $&amp;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># &#34;&lt;div&gt;content1&lt;/div&gt;&lt;div&gt;content2&lt;/div&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 非貪欲マッチ: 最初の&lt;div&gt;&lt;/div&gt;のペアのみ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /&lt;div&gt;.*?&lt;\/div&gt;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Non-greedy: $&amp;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># &#34;&lt;div&gt;content1&lt;/div&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># より効率的: 否定文字クラスを使用</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /&lt;div&gt;[^&lt;]*&lt;\/div&gt;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Optimized: $&amp;&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1># &#34;&lt;div&gt;content1&lt;/div&gt;&#34; （さらに高速）</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=qrでパターンをプリコンパイル>qr//でパターンをプリコンパイル</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 毎回コンパイルされる（遅い）</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$i</span> <span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>1000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;test$i&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$text</span> <span class=o>=~</span><span class=sr> /test\d+/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 一度だけコンパイル（速い）</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$pattern</span> <span class=o>=</span> <span class=sx>qr/test\d+/</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=k>my</span> <span class=nv>$i</span> <span class=p>(</span><span class=mi>1</span><span class=o>..</span><span class=mi>1000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;test$i&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$text</span> <span class=o>=~</span> <span class=nv>$pattern</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=よくある間違いと落とし穴>よくある間違いと落とし穴</h2><h3 id=1-貪欲マッチによる予期しない結果>1. 貪欲マッチによる予期しない結果</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$html</span> <span class=o>=</span> <span class=s>&#39;&lt;a href=&#34;http://example.com&#34;&gt;link&lt;/a&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 間違い: 貪欲マッチで最後の&#34;までマッチ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /href=&#34;(.+)&#34;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Wrong: $1&#34;</span><span class=p>;</span>  <span class=c1># &#39;http://example.com&#34;&gt;link&lt;/a&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正しい: 非貪欲マッチ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /href=&#34;(.+?)&#34;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Correct: $1&#34;</span><span class=p>;</span>  <span class=c1># &#39;http://example.com&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># さらに良い: 否定文字クラス</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$html</span> <span class=o>=~</span><span class=sr> /href=&#34;([^&#34;]+)&#34;/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Better: $1&#34;</span><span class=p>;</span>  <span class=c1># &#39;http://example.com&#39; （より高速）</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2--が改行にマッチしない>2. . が改行にマッチしない</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;line1\nline2&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 間違い: . は改行にマッチしない（デフォルト）</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /line1.line2/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Not matched&#34;</span><span class=p>;</span>  <span class=c1># これが実行される</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正しい: s修飾子を使う</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /line1.line2/s</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched with /s&#34;</span><span class=p>;</span>  <span class=c1># これが実行される</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=3-キャプチャ変数のスコープ>3. キャプチャ変数のスコープ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;hello world&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\w+)/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Inside: $1&#34;</span><span class=p>;</span>  <span class=c1># &#34;hello&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 間違い: if ブロックの外で使う</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Outside: $1&#34;</span><span class=p>;</span>  <span class=c1># 未定義の動作（ここでは &#34;hello&#34; だが保証されない）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正しい: 変数に保存</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$match</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\w+)/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$match</span> <span class=o>=</span> <span class=nv>$1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>say</span> <span class=s>&#34;Saved: $match&#34;</span> <span class=k>if</span> <span class=nb>defined</span> <span class=nv>$match</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=4-gフラグの状態管理>4. /gフラグの状態管理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$text</span> <span class=o>=</span> <span class=s>&#34;foo bar baz&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 間違い: 前回のマッチ位置が残る</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\w+)/g</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=nv>$1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1># &#34;foo&#34;, &#34;bar&#34;, &#34;baz&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 次のマッチは失敗（位置が末尾に残っている）</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\w+)/g</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found: $1&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Not found&#34;</span><span class=p>;</span>  <span class=c1># これが実行される</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正しい: pos()でリセット</span>
</span></span><span class=line><span class=cl><span class=nb>pos</span><span class=p>(</span><span class=nv>$text</span><span class=p>)</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>  <span class=c1># または pos($text) = undef;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$text</span> <span class=o>=~</span><span class=sr> /(\w+)/g</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Found after reset: $1&#34;</span><span class=p>;</span>  <span class=c1># &#34;foo&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=5-メタ文字のエスケープ忘れ>5. メタ文字のエスケープ忘れ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-perl data-lang=perl><span class=line><span class=cl><span class=k>use</span> <span class=nn>v5</span><span class=mf>.38</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$url</span> <span class=o>=</span> <span class=s>&#34;http://example.com/path&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 間違い: . はメタ文字なので任意の文字にマッチ</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$url</span> <span class=o>=~</span><span class=sr> /example.com/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched (but not what we wanted)&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正しい: quotemetaまたは\Qを使う</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$url</span> <span class=o>=~</span><span class=sr> /\Qexample.com\E/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched literally&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># または: quotemeta関数</span>
</span></span><span class=line><span class=cl><span class=k>my</span> <span class=nv>$literal</span> <span class=o>=</span> <span class=nb>quotemeta</span><span class=p>(</span><span class=s>&#34;example.com&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$url</span> <span class=o>=~</span><span class=sr> /$literal/</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>say</span> <span class=s>&#34;Matched with quotemeta&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=まとめ>まとめ</h2><p>Perlの正規表現は非常に強力で、テキスト処理の多くの場面で活躍します。この記事で紹介した内容をマスターすれば、以下のことができるようになります：</p><ul><li>基本的なパターンマッチングと置換</li><li>複雑なパターンの構築と理解</li><li>キャプチャと名前付きキャプチャの活用</li><li>先読み・後読みを使った高度なマッチング</li><li>/x修飾子による保守しやすい正規表現の作成</li><li>実用的なパターン（メール、URL、日付など）の実装</li><li>Perl独自の高度な機能の活用</li><li>パフォーマンスを考慮した最適化</li><li>よくある間違いの回避</li></ul><p>正規表現は最初は難しく感じるかもしれませんが、練習を重ねることで強力な武器になります。小さなパターンから始めて、徐々に複雑なものに挑戦していきましょう。</p><p>Perlの正規表現の世界は深淵です。この記事が、その世界への入り口となれば幸いです。Happy Pattern Matching!</p><h2 id=参考資料>参考資料</h2><ul><li>perlre: Perl正規表現の公式ドキュメント</li><li>perlretut: Perl正規表現チュートリアル</li><li>perlrequick: Perl正規表現クイックスタート</li><li>Regexp::Debugger: 正規表現デバッガー</li><li>YAPE::Regex::Explain: 正規表現を人間が読める形式に変換</li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/perl/>Perl</a>
<a href=/tags/regex/>Regex</a>
<a href=/tags/regular-expressions/>Regular-Expressions</a>
<a href=/tags/text-processing/>Text-Processing</a>
<a href=/tags/programming/>Programming</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>関連するコンテンツ</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/2026/02/08/000550/><div class=article-image><img src=/public_images/2026/interpreter-visitor-composite-series-image.jpg loading=lazy data-key data-hash=/public_images/2026/interpreter-visitor-composite-series-image.jpg></div><div class=article-details><h2 class=article-title>Perlで作る正規表現リファインリー（Interpreter × Visitor × Composite）</h2></div></a></article><article class=has-image><a href=/warehouse/interpreter-visitor-composite-series/><div class=article-image><img src=/favicon.png loading=lazy data-key data-hash=/favicon.png></div><div class=article-details><h2 class=article-title>Interpreter × Visitor × Composite 組み合わせシリーズ調査</h2></div></a></article><article class=has-image><a href=/2026/01/30/002151/><div class=article-image><img src=/public_images/2026/text-pipeline-header.png loading=lazy data-key data-hash=/public_images/2026/text-pipeline-header.png></div><div class=article-details><h2 class=article-title>【入門】パイプラインの基礎とフィルター実装 - Perl/Mooでテキスト処理パイプライン</h2></div></a></article><article class=has-image><a href=/2026/01/20/003215/><div class=article-image><img src=/public_images/2026/composite-markdown-toc-series-image.jpg loading=lazy data-key data-hash=/public_images/2026/composite-markdown-toc-series-image.jpg></div><div class=article-details><h2 class=article-title>第2回-正規表現で見出しを抽出しよう - PerlとMooで学ぶComposite</h2></div></a></article><article class=has-image><a href=/2026/01/19/211538/><div class=article-image><img src=/public_images/2026/decorator-pattern-series-image.jpg loading=lazy data-key data-hash=/public_images/2026/decorator-pattern-series-image.jpg></div><div class=article-details><h2 class=article-title>第2回-正規表現でログをパースしよう - PerlとMooで学ぶDecorator</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//nqounet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2000 -
2026 設計パターンを疑え</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> で構築されています。<br>テーマ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> は <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> によって設計されています。</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>