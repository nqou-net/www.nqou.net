---
title: "アウトライン案 - PerlでTODOリスト【第2回】ユーザーからの入力を受け取る"
description: "連載「PerlでTODOリスト（CLI）を作成する」第2回記事のアウトライン案3つ（案A/B/C）"
date: 2025-12-30
draft: true
tags:
  - perl
  - cli
  - todo-list
  - user-input
  - outline
---

# 第2回記事アウトライン案：ユーザーからの入力を受け取る

> 連載「PerlでTODOリスト（CLI）を作成する」第2回記事のアウトライン案  
> 参照資料：`perl-cli-todo-list-research.md`、`perl-cli-todo-list-structure.md`  
> 第1回記事：`/home/runner/work/www.nqou.net/www.nqou.net/content/post/2025/perl-cli-todo-episode01.md`

---

## 前提情報と制約条件

### 連載構造案からの情報（案A「教科書的アプローチ」）

| 項目 | 内容 |
|------|------|
| **タイトル** | ユーザーからの入力を受け取る |
| **新しい概念** | `<STDIN>` |
| **ストーリー** | ユーザーにメニューを表示し、選択を受け取る対話型インターフェースを作る |
| **コード例1** | メニュー表示と入力ループ |
| **コード例2** | chomp と入力バリデーション |
| **推奨タグ** | perl, cli, user-input |

### 想定読者
- Perl入学式卒業程度
- 変数、配列、ハッシュ、サブルーチン、正規表現の基本は既知

### 制約
- **コード例は2つまで**
- **新しい概念は1つまで**（`<STDIN>`）
- 第1回記事からの継続性を保つ
- 第3回（ファイル保存）への導線を明確にする

### 第1回記事のおさらい

第1回では以下を実装しました：
- 対話的メニューの基本構造（`while(1)` ループ）
- メニュー選択の受付（`<STDIN>` と `chomp`）
- 選択に応じた分岐処理（`if-elsif-else`）
- UTF-8対応の基本設定

第1回のコードでは、まだ「タスク追加」機能は未実装で、「第2回で実装します」とメッセージを表示するだけでした。

### 第2回で実装すべき内容

連載構造表によると、第2回では：
- **新しい概念**: `<STDIN>`（ただし第1回で既に基本は導入済み）
- **実装内容**: タスクタイトルなどの**自由テキスト入力**を受け取る
- **データ保存**: 配列に一時的に保存（ファイル保存は第3回）

---

## 案A：段階的実装アプローチ（基礎→応用）

### 要約（1行）
`<STDIN>`を使ったタスクタイトルの入力処理と、配列への一時保存を実装し、入力バリデーションで堅牢性を高める。

### タイトル案（SEO最適化）
**PerlでTODOリストCLIアプリを作ろう【第2回】STDINでユーザー入力を受け取る - タスク追加と配列保存**

#### タイトルの狙い
- **主要キーワード**: Perl, TODO, CLI, STDIN, ユーザー入力
- **具体的な成果**: タスク追加、配列保存
- **検索意図**: 「Perl 標準入力」「Perl STDIN 使い方」「Perl ユーザー入力」

### meta description（160文字以内）
PerlのSTDINを使ってタスクタイトルをユーザーから受け取り、配列に保存する方法を解説。chompによる改行除去、入力バリデーション、配列操作の基本を学びます。第2回では動くTODO追加機能が完成！

#### meta descriptionの狙い
- **CTR向上**: 「動くTODO追加機能が完成！」で成果を明示
- **具体的な学習内容**: chomp, 入力バリデーション, 配列操作
- **読者の痛み**: 「どうやってユーザー入力を受け取るの？」に応える

### 推奨タグ（3つ、英語小文字・ハイフン形式）
- `perl`
- `stdin-input`
- `cli-development`

### H2/H3 見出しの階層構造

```markdown
## はじめに
- 第1回のおさらい：メニュー選択の基本
- 第2回のゴール：タスク追加機能を実装する

## `<STDIN>` とは何か
### 標準入力の基本概念
### なぜファイルハンドルなのか

## 実装1：タスクタイトルを入力する
【コード例1：タスクタイトルの入力処理】
### `print` でプロンプトを表示する
### `<STDIN>` で入力を受け取る
### `chomp` で改行を除去する

## 実装2：入力バリデーションで堅牢性を高める
【コード例2：入力バリデーションと配列への保存】
### 空文字チェック：空のタスクを防ぐ
### 文字数制限：長すぎるタスクを防ぐ
### ホワイトスペースのトリム

## タスクを配列に保存する
### 配列とハッシュの選択：どちらが適切か
### `push` でタスクを追加する
### タスクIDの自動採番（配列のインデックス）

## タスク一覧を表示する（おまけ機能）
### `foreach` でループ処理
### タスクの表示フォーマット

## 動作確認：実際に使ってみよう
### タスク追加→一覧表示の流れ
### エラーケースの確認

## 次回予告：ファイルに保存する
### 配列の限界：プログラム終了でデータが消える
### ファイル保存の必要性

## まとめ
### 今回学んだこと
### 次回の内容
```

### アウトライン案Aの特徴

#### **メリット**
- **段階的な理解**: `<STDIN>` の概念から始め、バリデーション、配列保存へと順を追う
- **実用的**: 第2回終了時点で「タスク追加→一覧表示」が動作する
- **第1回との連続性**: 第1回のメニュー選択から自然に拡張

#### **デメリット**
- やや教科書的で、驚きが少ない
- タスク一覧表示まで含めるとコード例が増えがち（制約違反のリスク）

#### **差別化ポイント**
- **chomp の重要性を強調**: 初学者が見落としがちなポイント
- **入力バリデーションのベストプラクティス**: 空文字、長さチェック、トリム
- **配列 vs ハッシュの選択基準**: データ構造選定の思考プロセスを解説

---

## 案B：実践的トラブルシューティングアプローチ（失敗→成功）

### 要約（1行）
STDINの「よくある失敗」から始め、chomp忘れや入力ミスの影響を体験し、堅牢なタスク入力システムを構築する。

### タイトル案（SEO最適化）
**PerlでTODOリストCLIアプリを作ろう【第2回】STDIN入力の落とし穴 - chompとバリデーションで堅牢なタスク追加**

#### タイトルの狙い
- **問題解決型**: 「STDIN入力の落とし穴」で検索意図に対応
- **具体的な解決策**: chomp, バリデーション
- **ネガティブキーワード**: 「落とし穴」で興味喚起

### meta description（160文字以内）
PerlのSTDIN入力でよくある失敗を体験し、解決策を学ぶ。chomp忘れで比較が動かない理由、空文字入力の対処法、長すぎるタスクの制限方法を解説。失敗から学ぶ実践的チュートリアル。

#### meta descriptionの狙い
- **共感**: 「よくある失敗」で読者の悩みに寄り添う
- **学習スタイル**: 「失敗から学ぶ」実践的アプローチ
- **具体的な問題**: chomp忘れ、空文字、長すぎる入力

### 推奨タグ（3つ、英語小文字・ハイフン形式）
- `perl`
- `input-validation`
- `debugging-tips`

### H2/H3 見出しの階層構造

```markdown
## はじめに
- 第1回のおさらい：メニュー選択で学んだこと
- 第2回のチャレンジ：タスクタイトルを受け取る

## まずは動かしてみよう：素朴な実装
【コード例1：chomp忘れの失敗例】
### タスクタイトルを入力する最小限のコード
### 実行してみる…あれ？動かない？

## トラブルシューティング1：chomp忘れの影響
### 改行文字が残っている証拠
### デバッグテクニック：`Data::Dumper` で変数を見る
### `chomp` の正体：何をしているのか

## トラブルシューティング2：空文字やスペースだけの入力
### ユーザーは何も入力せずEnterを押す
### 空文字チェックの実装
### ホワイトスペーストリム：`s/^\s+|\s+$//g`

## トラブルシューティング3：長すぎるタスク
### 文字数制限の必要性
### `length` 関数で長さチェック
### エラーメッセージの表示と再入力

## 完成版：堅牢なタスク入力関数
【コード例2：入力バリデーション完全版と配列保存】
### `get_task_title()` サブルーチン
### バリデーションロジックの統合
### 配列への保存と確認メッセージ

## タスク一覧表示で動作確認
### 保存したタスクを表示する
### 配列の要素数でタスク数を表示

## 次回予告：ファイルに保存する
### 配列のデータは揮発性
### `open` でファイルに書き込む予告

## まとめ
### 失敗から学んだこと
### 入力バリデーションのチェックリスト
```

### アウトライン案Bの特徴

#### **メリット**
- **実践的**: 初学者が実際にハマる問題を先回りして解説
- **デバッグスキル**: `Data::Dumper` など実用的なテクニック紹介
- **記憶に残る**: 失敗体験を通じた学習は定着しやすい

#### **デメリット**
- 失敗例を見せることで混乱する読者もいる可能性
- トラブルシューティング形式が連載全体のトーンと異なる可能性

#### **差別化ポイント**
- **失敗駆動型学習**: 競合記事にない独自アプローチ
- **デバッグテクニック**: `Data::Dumper` の実践的使用
- **正規表現によるトリム**: `s/^\s+|\s+$//g` の解説

---

## 案C：ユーザー体験重視アプローチ（UX改善の旅）

### 要約（1行）
基本的なSTDIN入力から始め、ユーザーフレンドリーなプロンプト、エラーメッセージ、再入力フローを実装し、心地よいCLIアプリを作る。

### タイトル案（SEO最適化）
**PerlでTODOリストCLIアプリを作ろう【第2回】ユーザーフレンドリーな入力処理 - STDINとバリデーションで快適なタスク追加**

#### タイトルの狙い
- **UX重視**: 「ユーザーフレンドリー」「快適な」でUX志向の読者に訴求
- **技術キーワード**: STDIN, バリデーション
- **差別化**: CLI UXという珍しい切り口

### meta description（160文字以内）
PerlのSTDINで心地よいタスク入力を実現。わかりやすいプロンプト、親切なエラーメッセージ、スムーズな再入力フローを実装。技術だけでなくCLI UXも学べる実践的チュートリアル。

#### meta descriptionの狙い
- **UX視点**: 技術記事だが「心地よい」「親切な」などUX用語を使用
- **読者メリット**: 技術+UXの両方を学べる
- **独自性**: 「CLI UX」というニッチなトピック

### 推奨タグ（3つ、英語小文字・ハイフン形式）
- `perl`
- `user-experience`
- `cli-design`

### H2/H3 見出しの階層構造

```markdown
## はじめに
- 第1回のおさらい：メニューUI完成
- 第2回のゴール：快適なタスク追加体験を作る

## 良いCLI UXとは何か
### わかりやすいプロンプト
### 親切なエラーメッセージ
### スムーズな再入力フロー

## 実装1：基本的なタスク入力
【コード例1：シンプルなSTDIN入力とchomp】
### プロンプト表示の工夫
### `<STDIN>` で入力を受け取る
### `chomp` で改行を除去

## 実装2：ユーザーフレンドリーなバリデーション
【コード例2：親切なエラーメッセージと再入力ループ】
### 空文字チェック：「タスクを入力してください」
### 文字数制限：「50文字以内で入力してください」
### 再入力ループ：`while` で正しい入力まで繰り返す

## エラーメッセージの書き方
### ✗ 悪い例：「Error: Invalid input」
### ✓ 良い例：「タスクが空です。もう一度入力してください」
### エラーメッセージの原則：具体的・建設的・丁寧

## タスクを配列に保存する
### データ構造の選択：配列を選んだ理由
### `push` で追加
### 追加成功メッセージ：「タスクを追加しました！」

## 完成形デモ：快適なタスク追加フロー
### 正常系：タスク入力→追加成功
### 異常系：空文字→エラー→再入力→成功
### タスク一覧表示で確認

## 次回予告：ファイルに保存する
### 配列だけでは不十分な理由
### 永続化の必要性

## まとめ
### UXの観点で学んだこと
### バリデーションのベストプラクティス
### 次回の内容
```

### アウトライン案Cの特徴

#### **メリット**
- **独自の視点**: CLI UXという珍しい切り口で差別化
- **実用的**: エラーメッセージの書き方など、現場で使えるスキル
- **読者体験重視**: 「快適な」アプリ作りを学べる

#### **デメリット**
- UXに重点を置きすぎて技術解説が薄くなる可能性
- Perl入学式卒業レベルにはやや高度（UXの概念が馴染みがない）

#### **差別化ポイント**
- **CLI UXという独自視点**: 競合記事にないアプローチ
- **エラーメッセージの原則**: 具体的なライティングガイド
- **再入力ループ**: `while` を使った堅牢な入力処理

---

## 3案の比較表

| 項目 | 案A：段階的実装 | 案B：トラブルシューティング | 案C：UX重視 |
|------|---------------|-------------------------|-------------|
| **アプローチ** | 基礎→応用 | 失敗→成功 | 基本→快適 |
| **主要テーマ** | STDIN入力と配列保存 | chomp忘れと入力エラー | CLI UX設計 |
| **対象読者** | 初学者全般 | デバッグに苦手意識がある人 | UXを意識したい人 |
| **学習スタイル** | 段階的理解 | 問題解決型 | 体験設計型 |
| **技術深度** | 中 | 中〜高（デバッグ技術含む） | 中（UX理論含む） |
| **独自性** | ★★☆ | ★★★ | ★★★★ |
| **実用性** | ★★★ | ★★★★ | ★★★ |
| **初学者親和性** | ★★★★ | ★★★ | ★★☆ |
| **SEO競合性** | 高（一般的な切り口） | 中（問題解決型は中間） | 低（CLI UXはニッチ） |

---

## 推薦案：案A「段階的実装アプローチ」

### 推薦理由

#### 1. 連載構造案との完全一致

連載構造案（案A「教科書的アプローチ」）では：
- 第2回：ユーザー入力を受け取る
- 新しい概念：`<STDIN>`
- ストーリー：対話型インターフェースを作る

案Aは連載構造表と完全に一致し、第1回からの自然な流れを保ちます。

#### 2. 想定読者との適合性

Perl入学式卒業程度の読者にとって：
- **既知事項を活用**: 配列、`foreach`、`push` は既習範囲
- **新しい概念は1つ**: `<STDIN>` の深掘り（第1回で基本は導入済み）
- **段階的な難易度**: バリデーション→配列保存→一覧表示と無理なく進む

#### 3. 検索意図への対応

想定される検索クエリ：
| 検索キーワード | 検索意図 | 対応箇所 |
|--------------|---------|---------|
| 「Perl STDIN 使い方」 | 標準入力の基本を学びたい | H2「STDINとは何か」 |
| 「Perl chomp 必要性」 | chompの役割を理解したい | コード例1 |
| 「Perl 入力 バリデーション」 | 入力チェックの方法を知りたい | コード例2 |
| 「Perl 配列 追加」 | 配列操作を学びたい | H2「タスクを配列に保存」 |

案Aは主要な検索意図を網羅的にカバーします。

#### 4. 第3回への自然な導線

第3回（ファイル保存）への橋渡し：
- **配列の限界を実感**: プログラム終了でデータが消える
- **永続化の必要性**: 「次回はファイルに保存します」が自然

#### 5. コード例2つの制約を守りやすい

- **コード例1**: タスクタイトルの入力処理（STDIN + chomp）
- **コード例2**: 入力バリデーション + 配列への保存

明確に分離でき、制約を守りやすい構成です。

### 代替案の選択指針

- **案B**: 読者が「chompを忘れてハマった経験がある」「デバッグスキルを高めたい」場合に推奨
- **案C**: 読者が「CLIツールのUXに興味がある」「エンドユーザー視点を学びたい」場合に推奨

ただし、連載全体のトーン（教科書的アプローチ）との一貫性を考えると、**案A**が最適です。

---

## 全案共通の設計原則

### 必須要素

1. **コード例は2つまで**
   - コード例1：基本的なSTDIN入力
   - コード例2：バリデーションと配列保存
2. **新しい概念は1つ**（`<STDIN>`）
   - ただし第1回で基本導入済みのため、深掘りと実践的応用
3. **推奨タグ3つ程度**
   - `perl` は必須
   - `cli`, `stdin-input`, `user-input`, `input-validation` などから2つ
4. **UTF-8対応**
   - 第1回で設定済み、継承するだけ

### コード品質ガイドライン

```perl
# 良い例
print "タスクを入力してください: ";
my $title = <STDIN>;
chomp $title;

# 悪い例（chompなし）
my $title = <STDIN>;  # 改行が残る！
```

### 入力バリデーションのチェックリスト

- [ ] 空文字チェック（`$title eq ''` または `!$title`）
- [ ] ホワイトスペーストリム（`$title =~ s/^\s+|\s+$//g`）
- [ ] 文字数制限（`length($title) > 50`）
- [ ] 再チェック：トリム後に空になっていないか

### 内部リンク候補

| タイミング | リンク先 | 文脈 |
|----------|---------|------|
| 配列操作の解説時 | なし | Perl入学式で既習のため不要 |
| 将来の拡張紹介時 | [DBI/DBIx::Class入門](/2025/12/13/000000/) | 「第5回でデータベースを導入します」 |

---

## SEO・メタ情報の最適化ポイント

### タイトルタグ最適化

**案Aのタイトル**:
```
PerlでTODOリストCLIアプリを作ろう【第2回】STDINでユーザー入力を受け取る - タスク追加と配列保存
```

- **文字数**: 56文字（Google推奨の60文字以内）
- **キーワード**: Perl, TODO, CLI, STDIN, ユーザー入力, タスク追加, 配列
- **ブランディング**: 【第2回】で連載を強調

### meta description最適化

**案Aのdescription**:
```
PerlのSTDINを使ってタスクタイトルをユーザーから受け取り、配列に保存する方法を解説。chompによる改行除去、入力バリデーション、配列操作の基本を学びます。第2回では動くTODO追加機能が完成！
```

- **文字数**: 116文字（Google推奨の160文字以内）
- **行動喚起**: 「動くTODO追加機能が完成！」
- **具体的な学習内容**: chomp, 入力バリデーション, 配列操作
- **検索意図対応**: 「PerlでSTDIN使いたい」「タスク追加したい」

### 構造化データ（JSON-LD）候補

```json
{
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "headline": "PerlでTODOリストCLIアプリを作ろう【第2回】STDINでユーザー入力を受け取る",
  "description": "PerlのSTDINを使ってタスクタイトルをユーザーから受け取り、配列に保存する方法を解説",
  "keywords": ["Perl", "STDIN", "CLI", "ユーザー入力", "TODO", "配列"],
  "articleSection": "Programming Tutorial",
  "dependencies": "Perl 5.38以降",
  "proficiencyLevel": "Beginner",
  "isPartOf": {
    "@type": "Series",
    "name": "PerlでTODOリスト（CLI）を作成する",
    "position": 2
  }
}
```

---

## 付記：第2回記事の成功指標

### 学習目標の達成度チェック

読者が第2回終了時点で以下を達成できているか：

- [ ] `<STDIN>` を使ってユーザー入力を受け取れる
- [ ] `chomp` の必要性を理解し、正しく使える
- [ ] 空文字チェックと文字数制限を実装できる
- [ ] `push` で配列にタスクを追加できる
- [ ] `foreach` でタスク一覧を表示できる

### 実装完成度チェック

第2回終了時点で以下が動作するか：

- [ ] メニューで「1. タスクを追加」を選択できる
- [ ] タスクタイトルを入力できる
- [ ] 空文字や長すぎる入力を拒否できる
- [ ] タスクが配列に保存される
- [ ] 「2. タスク一覧を表示」で保存したタスクを見られる
- [ ] プログラムを終了すると配列が消える（→第3回への動機付け）

### 第3回への接続チェック

以下の要素が第3回への橋渡しとなっているか：

- [ ] 「配列はプログラム終了で消える」という制限を明示
- [ ] 「次回はファイルに保存します」と予告
- [ ] ファイル保存の必要性に読者が納得している

---

**作成日**: 2025年12月30日  
**参照資料**: 
- `perl-cli-todo-list-research.md`
- `perl-cli-todo-list-structure.md`
- 第1回記事: `/content/post/2025/perl-cli-todo-episode01.md`

**担当**: メタ情報・公開準備・SEO専門エージェント
