---
date: 2026-02-01T11:30:00+09:00
description: 'ウイスキー香味プロファイル生成器の調査ドキュメント - Factory Method + Strategy パターン'
draft: true
epoch: 1769913000
image: /favicon.png
iso8601: 2026-02-01T11:30:00+09:00
title: '調査ドキュメント - ウイスキー香味プロファイル生成器'
---

# 調査ドキュメント: ウイスキー香味プロファイル生成器

## 概要

Factory Method + Strategy パターンを組み合わせた実践的なシリーズ記事の調査結果。

## 調査背景

「Perlで学ぶ手で覚えるデザインパターンシリーズ」として、単なる文法解説ではなく、作って動かす楽しさと実用性を両立したテーマを調査。

## 技術要件

| 項目 | 要件 |
|------|------|
| Perl バージョン | v5.36以降 |
| 必須機能 | signatures, postfix dereference |
| オブジェクト指向 | Moo（軽量、高速起動） |
| 外部依存 | 最小限（cpanfile記載モジュールのみ） |

## テーマ調査結果

### 選定テーマ: ウイスキー香味プロファイル生成器

#### コンセプト

ウイスキーの基本情報（産地、樽、度数など）から、複数のスタイルでテイスティングノートを自動生成するシステム。

#### USP（独自の価値提案）

1. **Whisky愛好家への訴求力**: 作っていて楽しく、完成後も実際に使える
2. **自然なパターン必要性**: スコッチとバーボンの違い → Factory、記述スタイルの違い → Strategy
3. **自慢ポイント**: 「これ俺が作ったシステムで分析してみようか」と言える

#### 遊び心/生意気ポイント

- 「AIじゃなくてPerlでやる」反骨精神
- 「俺のコードは山崎を理解してる」という謎の説得力
- コーディングしながらWhiskyを飲む言い訳が成立

### パターンの使いどころ

#### Factory Method パターン

**目的**: ウイスキーの種類（Scotch、Bourbon、Irish、Japanese）ごとに特徴的な香味プロファイルオブジェクトを生成

**クラス構成**:
- WhiskyFactory（ファクトリクラス）
- WhiskyProfile（基底Role）
- ScotchProfile, BourbonProfile, IrishProfile, JapaneseProfile（具象クラス）

**解決する問題**:
- タイプ追加時のif/else爆発
- 生成ロジックの集中化
- タイプ固有の初期化処理のカプセル化

#### Strategy パターン

**目的**: テイスティングノートの記述スタイルを切り替え

**戦略クラス**:
- DescriptionStrategy（基底Role）
- PoeticStrategy: 詩的な表現（「秋の森を思わせる」「シルクのような」）
- TechnicalStrategy: 技術的な表現（「フェノール値高」「エステル含有量」）
- BeginnerStrategy: 初心者向け表現（「甘くて飲みやすい」「少しスモーキー」）

**解決する問題**:
- 記述スタイル追加時の条件分岐爆発
- 実行時のアルゴリズム切り替え
- if/elseの多態性による置き換え

## ドメイン知識

### ウイスキーの主要産地と特徴

| 産地 | 特徴 | 代表的な香味 |
|------|------|-------------|
| スコットランド（Scotch） | ピート使用、多様な産地 | スモーキー、海藻、ヨード |
| アメリカ（Bourbon） | 新樽使用、トウモロコシ51%以上 | バニラ、カラメル、オーク |
| アイルランド（Irish） | 三回蒸留、滑らか | ハチミツ、グリーンアップル |
| 日本（Japanese） | 繊細なバランス、ミズナラ樽 | 桜、梅、緑茶 |

### テイスティング表現の階層

1. **詩的表現**: 文学的、感情的な描写（一般読者向け）
2. **技術的表現**: 成分、製法に基づく客観的記述（愛好家向け）
3. **初心者向け表現**: シンプル、飲みやすさ重視（入門者向け）

## 既存シリーズとの差別化

| 既存シリーズ | パターン | 題材 |
|--------------|----------|------|
| データエクスポーター | Strategy | CSV/JSON/YAML変換 |
| APIレスポンスシミュレーター | Factory Method | API生成 |
| ダンジョンマスター | Factory Method + Template Method + Strategy | ゲーム |

**本シリーズの差別化ポイント**:
- Whiskyという趣味ドメインでの実装
- 2パターンの相乗効果を深堀り
- 「俺のコード」で語れる具体的成果物

## 実装設計

### クラス図

```
┌─────────────────┐
│ WhiskyFactory   │
│─────────────────│
│ +create_profile │
│ +create_with_   │
│  strategy       │
└────────┬────────┘
         │ creates
         ▼
┌─────────────────────────────────────┐
│       «interface»                   │
│       WhiskyProfile                 │
│─────────────────────────────────────│
│ +name: String                       │
│ +age: Integer                       │
│ +type: String                       │
│ +strategy: DescriptionStrategy      │
│─────────────────────────────────────│
│ +get_flavors()                      │
│ +describe()                         │
└──────────────┬──────────────────────┘
               │ implements
    ┌──────────┼──────────┬──────────────┐
    ▼          ▼          ▼              ▼
┌───────┐ ┌─────────┐ ┌───────┐ ┌──────────┐
│Scotch │ │Bourbon  │ │Irish  │ │Japanese  │
│Profile│ │Profile  │ │Profile│ │Profile   │
└───────┘ └─────────┘ └───────┘ └──────────┘

┌─────────────────────────────────────┐
│       «interface»                   │
│       DescriptionStrategy           │
│─────────────────────────────────────│
│ +format_description(profile)        │
└──────────────┬──────────────────────┘
               │ implements
    ┌──────────┼──────────┬──────────┐
    ▼          ▼          ▼          
┌─────────┐ ┌───────────┐ ┌──────────┐
│Poetic   │ │Technical  │ │Beginner  │
│Strategy │ │Strategy   │ │Strategy  │
└─────────┘ └───────────┘ └──────────┘
```

### 段階的実装計画

| 段階 | 内容 | 破綻ポイント | 解決方法 |
|------|------|-------------|---------|
| 第1段階 | 素朴なif/else実装 | - | 動作確認 |
| 第2段階 | タイプ・スタイル追加 | 組み合わせ爆発 | - |
| 第3段階 | Factory導入 | - | タイプごとにクラス分離 |
| 第4段階 | Strategy導入 | - | 記述スタイルを戦略として抽出 |
| 第5段階 | 統合完成 | - | 両パターンの相乗効果 |

## 参考情報

### ウイスキー関連

- Whisky Magazine: https://whiskymag.com/
- フレーバーホイール: https://whiskyflavours.co.uk/

### デザインパターン

- Gang of Four: Design Patterns
- Factory Method: 生成のパターン
- Strategy: 振る舞いのパターン

## 結論

ウイスキー香味プロファイル生成器は、Factory Method と Strategy の組み合わせを学ぶのに最適なテーマ。実用性と遊び心を両立し、完成後は自慢できる成果物となる。

---

**作成日**: 2026年2月1日
**担当エージェント**: copilot
