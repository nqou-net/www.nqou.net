---
title: 連載構造案 - Mooで覚えるオブジェクト指向プログラミング（全12回）
date: 2025-12-30
description: シリーズ記事「Mooで覚えるオブジェクト指向プログラミング」第2回〜第12回の連載構造案3つ（案A/B/C）
---

# 連載構造案：Mooで覚えるオブジェクト指向プログラミング

## 前提情報

- **技術スタック**: Perl / Moo
- **想定読者**: スパゲティコードしか書いたことがない初心者
- **目標**: オブジェクト指向プログラミングを感覚的に理解できる
- **ストーリー**: 掲示板（BBS）を題材にオブジェクト指向を学ぶ
- **制約**: 1記事1概念、コード例2つまで
- **既存の第1回**: `/2021/10/31/191008/`（blessを忘れる、Moo入門、用語説明）

---

## 案A: 「属性から始める」アプローチ

### 特徴・アプローチ

Mooの`has`キーワードを深掘りし、属性（プロパティ）の様々なオプションを先に習得してから、クラス間の関係（継承・ロール・委譲）に進む構成です。「データを正しく定義する」ことを最優先に考え、堅牢なオブジェクト設計の基礎を固めます。

**メリット**:
- 属性の理解が深まり、後の概念理解がスムーズ
- 各回で実際に動くMessageクラスを育てていく達成感

**デメリット**:
- 序盤がやや地味な印象になる可能性

### 連載構造

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 2 | 第2回-コードを読み解く - hasとsubの役割 | `has`と`sub`の基本 | 第1回のMyAppコードを詳しく解説し、掲示板のメッセージを表すMessageクラスを作る | hasでcontentプロパティを定義 | subでshow_messageメソッドを定義 | perl, moo, object-oriented |
| 3 | 第3回-オブジェクトを生み出す - newの魔法 | コンストラクタ（`new`） | 投稿者がメッセージを書き込むたびに新しいMessageオブジェクトが生まれる | Messageオブジェクトを1つ生成 | 複数のMessageオブジェクトを生成して配列に格納 | perl, moo, constructor |
| 4 | 第4回-変えられる属性と変えられない属性 | `is => 'ro'` vs `is => 'rw'` | メッセージ内容は投稿後に変更不可、いいね数は後から変更可能という設計 | is => 'ro'でcontentを定義 | is => 'rw'でlike_countを定義 | perl, moo, accessor |
| 5 | 第5回-必ず必要なものと省略できるもの | `required`と`default` | 投稿者名は必須入力、投稿日時は省略すると現在時刻が入る | required => 1でauthorを定義 | default => sub { time }でcreated_atを定義 | perl, moo, attribute |
| 6 | 第6回-情報を隠して守る - カプセル化 | カプセル化 | 削除フラグは外から直接触れない、delete()メソッド経由でのみ操作 | _is_deletedを内部属性として定義 | delete()とis_deleted()メソッドで安全に操作 | perl, moo, encapsulation |
| 7 | 第7回-仲間を増やす - Userクラスの登場 | 複数クラスの連携 | 掲示板にユーザー管理機能を追加、MessageにUserを関連付け | Userクラスを新規作成 | MessageクラスでUserオブジェクトを保持 | perl, moo, class-design |
| 8 | 第8回-親から子へ受け継ぐ - 継承入門 | `extends`による継承 | 管理者だけが投稿できる「お知らせ」クラスをMessageから派生 | Messageクラス（親） | AnnouncementMessage extends Message（子） | perl, moo, inheritance |
| 9 | 第9回-自分流にアレンジ - メソッドの上書き | オーバーライド | お知らせメッセージは表示時に「【重要】」マークが付く | 親クラスのshow_messageメソッド | 子クラスで上書きしたshow_messageメソッド | perl, moo, override |
| 10 | 第10回-共通の振る舞いを共有する - ロール | `Moo::Role`と`with` | MessageもUserも「作成日時を持つ」という共通の振る舞いを持つ | Timestampableロールを定義 | MessageとUserの両方にロールを適用 | perl, moo, role |
| 11 | 第11回-仕事を任せる - 委譲 | `handles`による委譲 | BBSクラスがMessageListに投稿の管理を任せる | MessageListクラスを作成 | BBSクラスでhandlesを使って委譲 | perl, moo, delegation |
| 12 | 第12回-旅の終わりと新たな始まり | 型制約の紹介 | 完成した掲示板の設計を振り返り、次のステップ（型制約、Moose）を紹介 | Types::Standardで型制約を追加 | 完成した掲示板のクラス図（mermaid） | perl, moo, types |

---

## 案B: 「オブジェクトファースト」アプローチ

### 特徴・アプローチ

「オブジェクトを作って使う」体験を最優先し、第2回でいきなりコンストラクタ（new）を扱います。「まず動かす、後から理解する」スタイルで、実践的な感覚を早期に掴むことを目指します。属性の詳細オプションは後回しにし、クラスを増やして連携させる楽しさを早めに体験します。

**メリット**:
- 早い段階で「オブジェクトを使っている」実感が得られる
- 複数クラスの連携を早期に体験できる

**デメリット**:
- 属性のオプションを後から学ぶため、やや飛び飛びになる

### 連載構造

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 2 | 第2回-オブジェクトを作ってみよう | コンストラクタ（`new`） | 掲示板に投稿するためにMessageオブジェクトを作る | Messageクラスとnewで生成 | 生成したオブジェクトのメソッドを呼ぶ | perl, moo, constructor |
| 3 | 第3回-もう一人の登場人物 - Userクラス | 複数クラスの連携 | 掲示板にはメッセージだけでなく投稿者（ユーザー）も必要 | Userクラスを新規作成 | MessageとUserを組み合わせて使う | perl, moo, class-design |
| 4 | 第4回-データの守り方 - 読み取り専用 | `is => 'ro'` vs `is => 'rw'` | 一度投稿したメッセージ内容は変更禁止、名前は後から編集可能 | is => 'ro'の動作確認 | is => 'rw'の動作確認 | perl, moo, accessor |
| 5 | 第5回-省略できるもの、できないもの | `required`と`default` | ユーザー名は必須、自己紹介文は省略可能でデフォルト値 | required => 1の例 | default => '未設定'の例 | perl, moo, attribute |
| 6 | 第6回-見せたくない情報を隠す | カプセル化 | パスワードは外から見えないように設計 | _password属性を内部で管理 | check_password()メソッドで認証 | perl, moo, encapsulation |
| 7 | 第7回-親子関係で機能を受け継ぐ | `extends`による継承 | 一般ユーザーと管理者ユーザーの関係を継承で表現 | Userクラス（親） | AdminUser extends User（子） | perl, moo, inheritance |
| 8 | 第8回-子どもは親を超える - メソッドの上書き | オーバーライド | 管理者は特別な権限チェックメソッドを持つ | 親のcan_delete()はfalse | 子のcan_delete()はtrue | perl, moo, override |
| 9 | 第9回-共通の振る舞いを切り出す - ロール | `Moo::Role`と`with` | 「表示可能」という振る舞いをMessage、Userで共有 | Displayableロールを定義 | 複数クラスにロールを適用 | perl, moo, role |
| 10 | 第10回-お任せします - 委譲のテクニック | `handles`による委譲 | UserがProfile情報の表示をProfileクラスに委譲 | Profileクラスを作成 | Userでhandlesを使って委譲 | perl, moo, delegation |
| 11 | 第11回-間違いを防ぐ - 型で守る | 型制約（Types::Standard） | メールアドレスには正しい形式のみ受け付ける | isa => Strで文字列型を指定 | isa => InstanceOfでオブジェクト型を指定 | perl, moo, types |
| 12 | 第12回-掲示板完成！ - まとめと次への一歩 | 設計の振り返り | 全クラスを統合した掲示板の完成形と今後の学習 | 完成した掲示板の使用例 | クラス図で設計を可視化（mermaid） | perl, moo, object-oriented |

---

## 案C: 「問題解決駆動」アプローチ

### 特徴・アプローチ

各回で「スパゲティコードの問題点」を提示し、それをオブジェクト指向で解決する形式です。「なぜオブジェクト指向が必要なのか」という動機付けを毎回行い、読者が「確かにこれは便利だ！」と納得しながら学べる構成です。

**メリット**:
- オブジェクト指向の必要性が明確に伝わる
- 問題→解決の流れで記憶に残りやすい

**デメリット**:
- 毎回「悪い例」を示す必要があり、コード例が冗長になる可能性

### 連載構造

| 回 | タイトル | 新しい概念 | ストーリー | コード例1 | コード例2 | 推奨タグ |
|---|---------|-----------|-----------|----------|----------|---------|
| 2 | 第2回-データとロジックをまとめよう | `has`と`sub`の基本 | グローバル変数で管理していた投稿データをMessageクラスにまとめる | hasでcontent属性を定義 | subでshow()メソッドを定義 | perl, moo, object-oriented |
| 3 | 第3回-同じものを何度も作れるように | コンストラクタ（`new`） | コピペで増えていた変数群をnewで生成するオブジェクトに | newで複数オブジェクトを生成 | 配列に格納してループ処理 | perl, moo, constructor |
| 4 | 第4回-勝手に書き換えられないようにする | `is => 'ro'` vs `is => 'rw'` | バグの原因だった「どこからでも変更可能」を防ぐ | is => 'ro'で変更不可に | is => 'rw'で必要なものだけ変更可能に | perl, moo, accessor |
| 5 | 第5回-初期化忘れを防ぐ | `required`と`default` | 未初期化変数によるバグをrequiredとdefaultで解消 | requiredで必須パラメータを強制 | defaultで安全なデフォルト値 | perl, moo, attribute |
| 6 | 第6回-内部実装を外から触らせない | カプセル化 | 直接いじられて壊れていた内部状態を隠蔽 | _で始まる内部属性 | 公開メソッド経由の安全な操作 | perl, moo, encapsulation |
| 7 | 第7回-関連するデータを別のクラスに | 複数クラスの連携 | 巨大になったMessageクラスからUserを分離 | Userクラスを抽出 | Messageがuser属性でUserを保持 | perl, moo, class-design |
| 8 | 第8回-似ているクラスの重複をなくす | `extends`による継承 | 通常投稿と管理者投稿で重複していたコードを継承で解消 | Messageを親クラスに | AdminMessageが継承してextends | perl, moo, inheritance |
| 9 | 第9回-同じ名前で違う動作を | オーバーライド | if文で分岐していた処理をオーバーライドでスッキリ | 親のformat()メソッド | 子で上書きしたformat()メソッド | perl, moo, override |
| 10 | 第10回-継承しないで振る舞いを共有 | `Moo::Role`と`with` | 継承関係にない複数クラスで同じ機能を実装していた問題をロールで解決 | Loggableロールを定義 | 異なるクラス階層に同じロールを適用 | perl, moo, role |
| 11 | 第11回-「持っている」ものに仕事を任せる | `handles`による委譲 | 肥大化したクラスのメソッドを別クラスに移譲 | MessageListクラスを作成 | handlesで委譲してスッキリ | perl, moo, delegation |
| 12 | 第12回-型チェックでバグを未然に防ぐ | 型制約の紹介 | 文字列と数値の混同バグを型制約で防止、シリーズ全体のまとめ | isa => Intで数値を強制 | 完成した掲示板とクラス図 | perl, moo, types |

---

## 推薦案：案C「問題解決駆動」アプローチ

### 推薦理由

1. **ペルソナとの適合性**
   - 想定ペルソナは「オブジェクト指向プログラミングの必要性がわからない」初心者
   - 案Cは毎回「問題→解決」の流れで「なぜ必要か」を明確に伝える

2. **既存記事との連続性**
   - 第1回で「blessは忘れよう」「もっと良い方法がある」と述べている
   - 案Cは「古い方法の問題点」を示してから「新しい解決策」を提示する流れで、既存のトーンと一致

3. **学習効果**
   - 問題を先に体験することで、解決策の価値が実感できる
   - 「あるある」と共感できるスパゲティコードの問題を見せることで記憶に残りやすい

4. **ストーリーの自然さ**
   - 掲示板を「リファクタリングしていく」という物語として自然
   - 各回で具体的な改善ポイントが明確

### 代替案の選択指針

- **案A**: 属性オプションを確実に理解させたい場合、リファレンス的な連載を目指す場合
- **案B**: 早期に複数クラスの連携を体験させたい場合、動的な学習スタイルを好む読者向け

---

## 付記

- 各タイトルは「第N回-」で始める形式（第1回に合わせる）
- 推奨タグは3つ程度、英語小文字・ハイフン形式
- 全12回を通じて、掲示板が徐々に成長していくストーリー

**作成日**: 2025年12月30日
**担当**: perl-monger エージェント
