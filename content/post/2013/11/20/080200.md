---
date: 2013-11-20T08:02:00+09:00
draft: false
iso8601: 2013-11-20T08:02:00+09:00
tags:
  - git
  - perl
title: Windowsの開発環境って難しい

---

[@nqounet](https://twitter.com/nqounet)です．

最近，Windowsで開発する（Perlじゃないけど）事になって，環境構築を色々と調べてみたので備忘録的に．

## ターミナルが大問題

結局最後までどうしようもなかったのがターミナル（コンソール）だった．

Gitの状態がわかって，フォントをRictyにする，というのが，こんなに大変だと思ってなかった．

もっと言うと，最初はVagrantを使って，仮想マシンからWindowsのファイルを編集しようと思っていたのだけど，とんでもない話だった．

Cygwinを入れたら負けかな，と思ってMinGWからMinTTYを使おうと思ったのだけど，Git Bashと相性がよろしく無いようで，併用するとlsで固まってしまった．

リソースモニタで確認すると，ls.exeがいっぱい…．

過程で色々インストールしたせいか，bash.exeとか幾つもあってなんとも言えない気分になった．

素直にCygwinを入れればよかったのか？

Consoleというソフトがオススメという話だったのだが，マルチバイトを表示するためにはコツが要るようだった．

フォントをRictyにするにしても，cmdやWindows Power Shellは，使えるフォントが限られているのがひどい．自由にさせてくれればいいのに．

結局リポジトリをイジって使えるフォントを増やす方法があったので，それでRictyを選べるようにした．

- [cmd.exe（コマンド プロンプト）のフォントを変更する - poohSec](http://pooh.gr.jp/?p=229)

そして，Windows Power ShellとPosh Gitの組み合わせが良いという話だったので，折角なのでChocolateyを使ってインストールして環境を整えた．

- [PowerShell で Git : Developer @ ADJUST](http://devadjust.exblog.jp/17296786/)
- [Chocolatey Gallery](http://chocolatey.org/)

かなり妥協した結果だけど，数日使ってみて，そこそこ良かった気がしている．

## もう一歩進んでWPSで楽をする

WPS（Windows Power Shell）のプロンプトで`$profile`と入力すると，設定ファイルがわかるので，そのファイルを編集して関数を直接書き込む．

エイリアスを作成するのに`set-alias`というコマンドがあるのだけど，引数は設定できないので，よく使う`gst`（`git status -sb`の短縮型）は関数にしてやらなければならない．

```powershell
function gst { git status -sb }
```

そんなに難しくなかった．

Macでは，ターミナルから`open .`とする事も多かったので，`explorer.exe`も関数にしてやる．

```powershell
function open($file_or_dir = ".") { explorer.exe $file_or_dir }
```

関数は引数も使える，かつ，初期値を入れておくこともできるので，openだけでもカレントディレクトリを開くように出来た．

## ホームディレクトリも変えてやる

WindowsではCドライブにデータを入れるなんて怖いです．

ソフトによっても，`%system_drive%`を指定してくる奴もいてヤダ．

なのに，ホームディレクトリを別のドライブにするのは結構大変．

ユーザーを作る時には出来たのかもしれないけど，作りなおして…とはさすがに言えないので．

「コンピューターの管理」だったかで，ユーザーのプロファイルの場所を変更することは出来たけど，それを実行してもマイドキュメントなどの場所が変わらない．

マイドキュメントやダウンロードの「場所」は，それぞれのフォルダのプロパティで場所が変えられるので，それで対応した．

全部一括で変えたいが，それも出来ない．

フォルダを右クリックして，プロパティを選んで，場所タブを選んで，CをDに変更するだけの簡単なお仕事だけど，何回もやるのは飽きる．

## 日本語入力

日本語入力は，Google日本語入力で．

最近覚えた，無変換キーでIMEをオフにする技があるので，うっかりカタカナで入力してしまうことが減りました．

- [Google日本語入力でIME ON/OFFを変換・無変換キーに割り当てる【ver 2.0】 | TeraDas－テラダス](http://www.teradas.net/archives/2927/)

一日ずっと触っててもミスが絶えないので，自力で考えて解決に至ったんだけど，調べてみたら結構前から知られていた技だった…．

## 環境構築は楽しい！

…確かに楽しいんだけど，作業が進まなくて大変．
