---
comments: true
date: 2025-12-02T03:28:56+09:00
description: Perlã®æœ€ã‚‚é‡è¦ãªæ¦‚å¿µã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€ã‚’å®Œå…¨ç†è§£ã€‚ã‚¹ã‚«ãƒ©ãƒ¼ãƒ»ãƒªã‚¹ãƒˆãƒ»voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®é•ã„ã¨ã€wantarray()ã‚’ä½¿ã£ãŸæŸ”è»Ÿãªé–¢æ•°å®Ÿè£…ã‚’å­¦ã³ã¾ã™
draft: true
hidden: false
image: /favicon.png
iso8601: 2025-12-02T03:28:56+09:00
license: ~
math: ~
tags:
  - perl
  - advent-calendar
  - context
  - wantarray
  - scalar
  - list
title: 'Perlã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®é­”æ³• - ã‚¹ã‚«ãƒ©ãƒ¼ãƒ»ãƒªã‚¹ãƒˆãƒ»voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã™ã‚‹'

---

## Perlã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã¯ä½•ã‹

Perlã‚’å­¦ã¶ä¸Šã§é¿ã‘ã¦é€šã‚Œãªã„ã€ã—ã‹ã—ç†è§£ã™ã‚‹ã¨ä¸–ç•ŒãŒåºƒãŒã‚‹æ¦‚å¿µãŒã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆcontextï¼‰ã€ã§ã™ã€‚

ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã¯ã€**å¼ã‚„å¤‰æ•°ãŒã©ã®ã‚ˆã†ãªçŠ¶æ³ã§è©•ä¾¡ã•ã‚Œã‚‹ã‹**ã‚’ç¤ºã™ã‚‚ã®ã§ã™ã€‚åŒã˜å¼ã§ã‚‚ã€è©•ä¾¡ã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ˆã£ã¦è¿”ã•ã‚Œã‚‹å€¤ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯Perlã®ã€ŒTMTOWTDIï¼ˆThere's More Than One Way To Do Itï¼‰ã€ã®ç²¾ç¥ã‚’æ”¯ãˆã‚‹é‡è¦ãªä»•çµ„ã¿ã§ã™ã€‚

Perlã«ã¯ä¸»ã«3ã¤ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚Šã¾ã™ï¼š

- **ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆScalar Contextï¼‰**: å˜ä¸€ã®å€¤ã‚’æœŸå¾…ã™ã‚‹çŠ¶æ³
- **ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆList Contextï¼‰**: è¤‡æ•°ã®å€¤ã‚’æœŸå¾…ã™ã‚‹çŠ¶æ³
- **voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆVoid Contextï¼‰**: æˆ»ã‚Šå€¤ã‚’ä½¿ã‚ãªã„çŠ¶æ³

ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å®Œå…¨ã«ç†è§£ã—ã€å®Ÿè·µçš„ã«æ´»ç”¨ã™ã‚‹æ–¹æ³•ã‚’å­¦ã‚“ã§ã„ãã¾ã™ã€‚

## ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€å˜ä¸€ã®å€¤ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼å€¤ï¼‰ã‚’æœŸå¾…ã™ã‚‹çŠ¶æ³ã§ã™ã€‚

### ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹å ´é¢

```perl
# ä»£å…¥ã®å³è¾ºã§ã‚¹ã‚«ãƒ©ãƒ¼å¤‰æ•°ã«ä»£å…¥
my $count = @array;  # é…åˆ—ã®è¦ç´ æ•°ãŒå…¥ã‚‹

# ifæ–‡ã®æ¡ä»¶å¼
if (@array) {  # è¦ç´ æ•°ãŒçœŸå½å€¤ã¨ã—ã¦è©•ä¾¡ã•ã‚Œã‚‹
    print "é…åˆ—ã«è¦ç´ ãŒã‚ã‚Šã¾ã™\n";
}

# æ–‡å­—åˆ—é€£çµ
my $str = "è¦ç´ æ•°ã¯ " . @array;  # é…åˆ—ãŒè¦ç´ æ•°ã«å¤‰æ›ã•ã‚Œã‚‹

# æ•°å€¤æ¼”ç®—
my $result = @array + 10;  # é…åˆ—ã®è¦ç´ æ•° + 10
```

### é…åˆ—ã®ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

é…åˆ—ã‚’ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã™ã‚‹ã¨ã€**è¦ç´ æ•°**ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my @fruits = ('apple', 'banana', 'cherry');

my $count = @fruits;  # $count = 3
print "æœç‰©ã®ç¨®é¡: $count\n";  # æœç‰©ã®ç¨®é¡: 3

# çœŸå½å€¤ã¨ã—ã¦ã®è©•ä¾¡ï¼ˆè¦ç´ æ•°ãŒ0ãªã‚‰å½ã€ãã‚Œä»¥å¤–ã¯çœŸï¼‰
if (@fruits) {
    print "æœç‰©ãŒã‚ã‚Šã¾ã™\n";
}

my @empty = ();
if (!@empty) {
    print "ç©ºã®é…åˆ—ã§ã™\n";
}
```

ã“ã‚Œã¯éå¸¸ã«ä¾¿åˆ©ã§ã€é…åˆ—ãŒç©ºã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹æ™‚ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ï¼š

```perl
# è‰¯ã„æ›¸ãæ–¹
if (@array) {
    # é…åˆ—ã«è¦ç´ ãŒã‚ã‚‹
}

# å†—é•·ãªæ›¸ãæ–¹ï¼ˆé¿ã‘ã‚‹ã¹ãï¼‰
if (scalar(@array) > 0) {
    # é…åˆ—ã«è¦ç´ ãŒã‚ã‚‹
}
```

### ãƒãƒƒã‚·ãƒ¥ã®ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ãƒãƒƒã‚·ãƒ¥ã‚’ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã™ã‚‹ã¨ã€å°‘ã—ç‰¹æ®Šãªå€¤ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my %hash = (a => 1, b => 2, c => 3);

my $scalar = %hash;
print $scalar, "\n";  # ä¾‹: "3/8" ï¼ˆä½¿ç”¨ãƒã‚±ãƒƒãƒˆæ•°/ç·ãƒã‚±ãƒƒãƒˆæ•°ï¼‰

# çœŸå½å€¤ã¨ã—ã¦ã®è©•ä¾¡ï¼ˆè¦ç´ ãŒã‚ã‚Œã°çœŸã€ç©ºãªã‚‰å½ï¼‰
if (%hash) {
    print "ãƒãƒƒã‚·ãƒ¥ã«è¦ç´ ãŒã‚ã‚Šã¾ã™\n";
}

my %empty = ();
if (!%empty) {
    print "ç©ºã®ãƒãƒƒã‚·ãƒ¥ã§ã™\n";
}
```

ãƒãƒƒã‚·ãƒ¥ã®ã‚¹ã‚«ãƒ©ãƒ¼è©•ä¾¡ã¯ã€ä¸»ã«**ç©ºã‹ã©ã†ã‹ã®åˆ¤å®š**ã«ä½¿ã‚ã‚Œã¾ã™ã€‚ãƒã‚±ãƒƒãƒˆæƒ…å ±ã¯é€šå¸¸ã¯æ°—ã«ã—ã¾ã›ã‚“ã€‚

### æ­£è¦è¡¨ç¾ã®ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

æ­£è¦è¡¨ç¾ãƒãƒƒãƒãƒ³ã‚°ã®ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€**ãƒãƒƒãƒã—ãŸã‹ã©ã†ã‹ï¼ˆçœŸå½å€¤ï¼‰**ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my $text = "Hello, World!";

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒãƒã®æˆå¦
if ($text =~ /World/) {
    print "ãƒãƒƒãƒã—ã¾ã—ãŸ\n";
}

# ãƒãƒƒãƒã—ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã—ãŸã„å ´åˆ
if ($text =~ /(W\w+)/) {
    my $matched = $1;  # "World"
    print "ãƒãƒƒãƒã—ãŸå˜èª: $matched\n";
}
```

## ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€è¤‡æ•°ã®å€¤ã‚’æœŸå¾…ã™ã‚‹çŠ¶æ³ã§ã™ã€‚ã“ã‚ŒãŒPerlã®å¼·åŠ›ã•ã®æºæ³‰ã®ä¸€ã¤ã§ã™ã€‚

### ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒç™ºç”Ÿã™ã‚‹å ´é¢

```perl
# é…åˆ—ã¸ã®ä»£å…¥
my @array = function();  # function()ã¯ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã•ã‚Œã‚‹

# ãƒªã‚¹ãƒˆã¸ã®ä»£å…¥
my ($x, $y, $z) = function();  # è¤‡æ•°ã®å€¤ã‚’å—ã‘å–ã‚‹

# foreach ãƒ«ãƒ¼ãƒ—
foreach my $item (function()) {  # ãƒªã‚¹ãƒˆã‚’åå¾©å‡¦ç†
    print "$item\n";
}

# é–¢æ•°ã®å¼•æ•°ï¼ˆæ‹¬å¼§å†…ï¼‰
print function();  # function()ã®çµæœã‚’ã™ã¹ã¦è¡¨ç¤º

# é…åˆ—ã®åˆæœŸåŒ–
my @result = (1, 2, function(), 3);  # function()ã®çµæœãŒå±•é–‹ã•ã‚Œã‚‹
```

### é…åˆ—ã®ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

é…åˆ—ã‚’ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã™ã‚‹ã¨ã€**å…¨è¦ç´ ã®ãƒªã‚¹ãƒˆ**ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my @fruits = ('apple', 'banana', 'cherry');

# åˆ¥ã®é…åˆ—ã«ã‚³ãƒ”ãƒ¼
my @copy = @fruits;  # ('apple', 'banana', 'cherry')

# é…åˆ—ã®è¦ç´ ã‚’å±•é–‹
my @combined = ('orange', @fruits, 'grape');
# ('orange', 'apple', 'banana', 'cherry', 'grape')

# foreach ã§åå¾©å‡¦ç†
foreach my $fruit (@fruits) {
    print "$fruit\n";
}
```

### ãƒãƒƒã‚·ãƒ¥ã®ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ãƒãƒƒã‚·ãƒ¥ã‚’ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã™ã‚‹ã¨ã€**ã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ã®ãƒªã‚¹ãƒˆ**ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my %person = (
    name => 'Alice',
    age  => 30,
    city => 'Tokyo',
);

# ãƒªã‚¹ãƒˆã¨ã—ã¦å±•é–‹
my @list = %person;
# ('name', 'Alice', 'age', 30, 'city', 'Tokyo')
# é †åºã¯ä¿è¨¼ã•ã‚Œãªã„ï¼

# åˆ¥ã®ãƒãƒƒã‚·ãƒ¥ã«ã‚³ãƒ”ãƒ¼
my %copy = %person;

# ãƒãƒƒã‚·ãƒ¥ã®ãƒãƒ¼ã‚¸
my %merged = (%person, job => 'Engineer');
```

**é‡è¦**: ãƒãƒƒã‚·ãƒ¥ã‚’ãƒªã‚¹ãƒˆã«å±•é–‹ã—ãŸæ™‚ã®é †åºã¯ä¿è¨¼ã•ã‚Œã¾ã›ã‚“ã€‚å†…éƒ¨ã®ãƒãƒƒã‚·ãƒ¥é–¢æ•°ã®å®Ÿè£…ã«ä¾å­˜ã—ã¾ã™ã€‚

### æ­£è¦è¡¨ç¾ã®ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

æ­£è¦è¡¨ç¾ãƒãƒƒãƒãƒ³ã‚°ã®ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€**ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸå€¤ã®ãƒªã‚¹ãƒˆ**ã‚’è¿”ã—ã¾ã™ï¼š

```perl
my $text = "2025-12-08";

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸå€¤ã®ãƒªã‚¹ãƒˆ
my ($year, $month, $day) = $text =~ /(\d{4})-(\d{2})-(\d{2})/;
print "å¹´: $year, æœˆ: $month, æ—¥: $day\n";
# å¹´: 2025, æœˆ: 12, æ—¥: 08

# ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ
my @words = "apple banana cherry" =~ /(\w+)/g;
# @words = ('apple', 'banana', 'cherry')

# ãƒãƒƒãƒã—ãªã‹ã£ãŸå ´åˆã¯ç©ºãƒªã‚¹ãƒˆ
my @no_match = "abc" =~ /(\d+)/;
# @no_match = ()
```

ã“ã‚Œã¯éå¸¸ã«å¼·åŠ›ã§ã€ãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚¤ãƒ‡ã‚£ã‚ªãƒ ã§ã™ï¼š

```perl
# CSVã®ã‚ˆã†ãªå½¢å¼ã‚’ãƒ‘ãƒ¼ã‚¹
my $line = "Alice,30,Tokyo";
my ($name, $age, $city) = split /,/, $line;

# URLã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŠ½å‡º
my $url = "http://example.com/user/123";
if ($url =~ m{/user/(\d+)}) {
    my $user_id = $1;
    print "User ID: $user_id\n";
}
```

## voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€å¼ã®æˆ»ã‚Šå€¤ãŒä½¿ã‚ã‚Œãªã„çŠ¶æ³ã§ã™ã€‚

```perl
# é–¢æ•°å‘¼ã³å‡ºã—ã®çµæœã‚’ä½¿ã‚ãªã„
function();  # voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

# ä»£å…¥æ–‡å…¨ä½“ï¼ˆä»£å…¥ã®çµæœã¯ä½¿ã‚ã‚Œãªã„ï¼‰
$x = 10;  # voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

# å¼ã®çµæœã‚’æ¨ã¦ã‚‹
@array;  # voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ„å‘³ã¯ãªã„ï¼‰
```

voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ã€ä¸€éƒ¨ã®æ¼”ç®—å­ã¯è­¦å‘Šã‚’å‡ºã™ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼š

```perl
use warnings;

# è­¦å‘Š: Useless use of hash in void context
%hash;

# è­¦å‘ŠãŒå‡ºãªã„ï¼ˆå‰¯ä½œç”¨ãŒã‚ã‚‹ï¼‰
print "Hello\n";  # å‡ºåŠ›ã¨ã„ã†å‰¯ä½œç”¨ãŒã‚ã‚‹
push @array, 1;   # é…åˆ—ã‚’å¤‰æ›´ã™ã‚‹å‰¯ä½œç”¨ãŒã‚ã‚‹
```

## ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹

Perlã«ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚

### scalar() é–¢æ•°

`scalar()` ã¯ã€å¼•æ•°ã‚’å¼·åˆ¶çš„ã«ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ã—ã¾ã™ï¼š

```perl
my @array = (1, 2, 3, 4, 5);

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ï¼ˆé…åˆ—ã®è¦ç´ ã‚’ã‚³ãƒ”ãƒ¼ï¼‰
my @copy = @array;  # (1, 2, 3, 4, 5)

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§è©•ä¾¡ï¼ˆè¦ç´ æ•°ã‚’å–å¾—ï¼‰
my $count = scalar @array;  # 5

# ä¾‹: ãƒãƒƒã‚·ãƒ¥ã®ã‚­ãƒ¼ã®æ•°ã‚’å–å¾—
my %hash = (a => 1, b => 2, c => 3);
my $key_count = scalar keys %hash;  # 3
```

### ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¼·åˆ¶

ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å¼·åˆ¶ã™ã‚‹çµ„ã¿è¾¼ã¿é–¢æ•°ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€é…åˆ—ã«ä»£å…¥ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã§ãã¾ã™ï¼š

```perl
# ã‚¹ã‚«ãƒ©ãƒ¼å¤‰æ•°ã«é…åˆ—ã‚’ä»£å…¥ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰
my $x = @array;  # è¦ç´ æ•°

# é…åˆ—å¤‰æ•°ã«é…åˆ—ã‚’ä»£å…¥ï¼ˆãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰
my @y = @array;  # å…¨è¦ç´ ã®ã‚³ãƒ”ãƒ¼

# ãƒªã‚¹ãƒˆã‚’æ‹¬å¼§ã§å›²ã‚“ã§ã‚‚ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ãªã‚‹
my ($z) = @array;  # æœ€åˆã®è¦ç´ ã ã‘ã‚’å–å¾—
```

æœ€å¾Œã®ä¾‹ã¯é‡è¦ã§ã™ï¼š

```perl
my @values = (10, 20, 30);

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
my $first = @values;  # 3ï¼ˆè¦ç´ æ•°ï¼‰

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæœ€åˆã®è¦ç´ ã ã‘ã‚’å–å¾—ï¼‰
my ($first) = @values;  # 10
```

## wantarray() ã«ã‚ˆã‚‹æŸ”è»Ÿãªé–¢æ•°å®Ÿè£…

`wantarray()` ã¯ã€é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ¤å®šã™ã‚‹ç‰¹æ®Šãªé–¢æ•°ã§ã™ã€‚

### wantarray() ã®æˆ»ã‚Šå€¤

```perl
sub context_aware {
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å‘¼ã°ã‚ŒãŸ
        return ('list', 'context');
    } elsif (defined wantarray) {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å‘¼ã°ã‚ŒãŸ
        return 'scalar context';
    } else {
        # voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å‘¼ã°ã‚ŒãŸ
        print "void context\n";
        return;
    }
}

# ãƒ†ã‚¹ãƒˆ
my @list = context_aware();     # @list = ('list', 'context')
my $scalar = context_aware();   # $scalar = 'scalar context'
context_aware();                # å‡ºåŠ›: void context
```

### å®Ÿç”¨çš„ãªä¾‹1: ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿

çµ„ã¿è¾¼ã¿ã® `<>` æ¼”ç®—å­ã‚‚ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ã¦å‹•ä½œãŒå¤‰ã‚ã‚Šã¾ã™ï¼š

```perl
# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: 1è¡Œã ã‘èª­ã‚€
my $line = <STDIN>;

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å…¨è¡Œã‚’èª­ã‚€
my @lines = <STDIN>;

# ã“ã‚Œã‚’è‡ªåˆ†ã§å®Ÿè£…ã™ã‚‹ã¨ï¼š
sub read_file {
    my ($filename) = @_;
    open my $fh, '<', $filename or die "Cannot open $filename: $!";
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å…¨è¡Œã‚’è¿”ã™
        my @lines = <$fh>;
        close $fh;
        return @lines;
    } else {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æœ€åˆã®è¡Œã ã‘è¿”ã™
        my $line = <$fh>;
        close $fh;
        return $line;
    }
}

# ä½¿ç”¨ä¾‹
my $first_line = read_file('data.txt');  # æœ€åˆã®è¡Œã ã‘
my @all_lines = read_file('data.txt');   # å…¨è¡Œ
```

### å®Ÿç”¨çš„ãªä¾‹2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª

```perl
sub fetch_users {
    my ($dbh, $condition) = @_;
    
    my $sth = $dbh->prepare("SELECT * FROM users WHERE $condition");
    $sth->execute();
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å…¨ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿”ã™
        my @users;
        while (my $row = $sth->fetchrow_hashref) {
            push @users, $row;
        }
        return @users;
    } else {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æœ€åˆã®1ä»¶ã ã‘è¿”ã™
        return $sth->fetchrow_hashref;
    }
}

# ä½¿ç”¨ä¾‹
my $user = fetch_users($dbh, "id = 1");     # 1ä»¶ã ã‘å–å¾—
my @users = fetch_users($dbh, "age > 20"); # å…¨ä»¶å–å¾—
```

### å®Ÿç”¨çš„ãªä¾‹3: æ¤œç´¢é–¢æ•°

```perl
sub find_items {
    my ($pattern, @items) = @_;
    
    my @matches = grep { /$pattern/ } @items;
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒãƒã—ãŸå…¨è¦ç´ ã‚’è¿”ã™
        return @matches;
    } elsif (defined wantarray) {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒãƒã—ãŸå€‹æ•°ã‚’è¿”ã™
        return scalar @matches;
    } else {
        # voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ä½•ã‚‚ã—ãªã„ï¼ˆè­¦å‘Šã‚’å‡ºã™ã“ã¨ã‚‚ã§ãã‚‹ï¼‰
        warn "find_items called in void context";
        return;
    }
}

# ä½¿ç”¨ä¾‹
my @found = find_items('perl', @files);   # ãƒãƒƒãƒã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã®ãƒªã‚¹ãƒˆ
my $count = find_items('perl', @files);   # ãƒãƒƒãƒã—ãŸå€‹æ•°
find_items('perl', @files);               # è­¦å‘ŠãŒå‡ºã‚‹
```

### å®Ÿç”¨çš„ãªä¾‹4: çµ±è¨ˆé–¢æ•°

```perl
sub analyze_numbers {
    my (@numbers) = @_;
    
    return unless @numbers;
    
    my $sum = 0;
    $sum += $_ for @numbers;
    my $avg = $sum / @numbers;
    
    my @sorted = sort { $a <=> $b } @numbers;
    my $min = $sorted[0];
    my $max = $sorted[-1];
    my $median = @sorted % 2 
        ? $sorted[@sorted/2]
        : ($sorted[@sorted/2-1] + $sorted[@sorted/2]) / 2;
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: è©³ç´°ãªçµ±è¨ˆæƒ…å ±ã‚’è¿”ã™
        return (
            sum    => $sum,
            avg    => $avg,
            min    => $min,
            max    => $max,
            median => $median,
            count  => scalar @numbers,
        );
    } else {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å¹³å‡å€¤ã®ã¿ã‚’è¿”ã™
        return $avg;
    }
}

# ä½¿ç”¨ä¾‹
my @data = (10, 20, 30, 40, 50);

my $average = analyze_numbers(@data);  # 30
my %stats = analyze_numbers(@data);    # è©³ç´°ãªçµ±è¨ˆæƒ…å ±
print "å¹³å‡: $stats{avg}, ä¸­å¤®å€¤: $stats{median}\n";
```

## ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨æ¼”ç®—å­

å¤šãã®Perlã®æ¼”ç®—å­ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ˆã£ã¦å‹•ä½œãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

### ä»£å…¥æ¼”ç®—å­

```perl
my @array = (1, 2, 3);

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
my $x = @array;  # $x = 3ï¼ˆè¦ç´ æ•°ï¼‰

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
my @y = @array;  # @y = (1, 2, 3)

# ãƒªã‚¹ãƒˆã®æœ€åˆã®è¦ç´ ã ã‘ã‚’å–å¾—
my ($first) = @array;  # $first = 1
```

### rangeæ¼”ç®—å­ (..)

```perl
# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ç¯„å›²ã®ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
my @numbers = (1..10);  # (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒ•ãƒªãƒƒãƒ—ãƒ•ãƒ­ãƒƒãƒ—æ¼”ç®—å­ã¨ã—ã¦å‹•ä½œ
# ï¼ˆè¡Œç¯„å›²æ¼”ç®—å­ã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ï¼‰
while (<DATA>) {
    print if /START/ .. /END/;  # STARTã‹ã‚‰ENDã¾ã§ã®è¡Œã‚’å‡ºåŠ›
}

__DATA__
header
START
line1
line2
END
footer
```

### reverseé–¢æ•°

```perl
my @array = (1, 2, 3, 4, 5);

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: é…åˆ—ã®é †åºã‚’é€†ã«ã™ã‚‹
my @reversed = reverse @array;  # (5, 4, 3, 2, 1)

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æ–‡å­—åˆ—ã‚’é€†ã«ã™ã‚‹
my $str = "Hello";
my $reversed_str = reverse $str;  # "olleH"
```

ã“ã‚Œã¯æ³¨æ„ãŒå¿…è¦ã§ã™ï¼š

```perl
my @array = (1, 2, 3);

# ã“ã‚Œã¯æœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªã„ï¼
my $result = reverse @array;  # $result = "321"ï¼ˆæ–‡å­—åˆ—ã¨ã—ã¦é€£çµã•ã‚Œã‚‹ï¼‰

# é…åˆ—ã‚’é€†é †ã«ã—ãŸã„å ´åˆã¯ã€æ˜ç¤ºçš„ã«ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§
my @reversed = reverse @array;  # (3, 2, 1)
```

### sorté–¢æ•°

```perl
my @numbers = (5, 2, 8, 1, 9);

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸé…åˆ—ã‚’è¿”ã™
my @sorted = sort { $a <=> $b } @numbers;  # (1, 2, 5, 8, 9)

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æœ€åˆã®è¦ç´ ã‚’è¿”ã™
my $first = sort { $a <=> $b } @numbers;  # 1

# ãŸã ã—ã€ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§sortã‚’ä½¿ã†ã®ã¯éåŠ¹ç‡
# ãªãœãªã‚‰ã€å†…éƒ¨ã§ã¯å…¨è¦ç´ ã‚’ã‚½ãƒ¼ãƒˆã—ã¦ã‹ã‚‰æœ€åˆã®è¦ç´ ã ã‘ã‚’è¿”ã™ãŸã‚
```

### map ã¨ grep

```perl
my @numbers = (1, 2, 3, 4, 5);

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å¤‰æ›/ãƒ•ã‚£ãƒ«ã‚¿ã•ã‚ŒãŸé…åˆ—ã‚’è¿”ã™
my @doubled = map { $_ * 2 } @numbers;     # (2, 4, 6, 8, 10)
my @evens = grep { $_ % 2 == 0 } @numbers; # (2, 4)

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: è¦ç´ æ•°ã‚’è¿”ã™
my $count = grep { $_ % 2 == 0 } @numbers; # 2ï¼ˆå¶æ•°ã®å€‹æ•°ï¼‰

# mapã®ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯æ³¨æ„ãŒå¿…è¦
my $last = map { $_ * 2 } @numbers;  # 10ï¼ˆæœ€å¾Œã®è¦ç´ ï¼‰
# ã“ã‚Œã¯åˆ†ã‹ã‚Šã«ãã„ã®ã§é¿ã‘ã‚‹ã¹ã
```

## ã‚ˆãã‚ã‚‹èª¤è§£ã¨è½ã¨ã—ç©´

### èª¤è§£1: é…åˆ—ä»£å…¥ã¯å¸¸ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹

```perl
my @original = (1, 2, 3);

# ã“ã‚Œã¯ã‚³ãƒ”ãƒ¼
my @copy = @original;
$copy[0] = 999;
print $original[0];  # 1ï¼ˆå¤‰æ›´ã•ã‚Œãªã„ï¼‰

# ã“ã‚Œã‚‚å®Ÿã¯ã‚³ãƒ”ãƒ¼ï¼ˆãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ã¯ãªã„ï¼‰
my $ref = \@original;  # ã“ã‚ŒãŒãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
```

### èª¤è§£2: ã‚¹ã‚«ãƒ©ãƒ¼å¤‰æ•°ã«é…åˆ—ã‚’ä»£å…¥ã™ã‚‹ã¨æœ€åˆã®è¦ç´ ãŒå…¥ã‚‹

```perl
my @array = (1, 2, 3);

# èª¤è§£: æœ€åˆã®è¦ç´ ãŒå…¥ã‚‹ã¨æ€ã†
my $x = @array;  # $x = 3ï¼ˆè¦ç´ æ•°ï¼‰

# æœ€åˆã®è¦ç´ ã‚’å–ã‚ŠãŸã„å ´åˆ
my ($first) = @array;     # $first = 1
# ã¾ãŸã¯
my $first = $array[0];    # $first = 1
```

### èª¤è§£3: ãƒãƒƒã‚·ãƒ¥ã®ã‚¹ã‚«ãƒ©ãƒ¼è©•ä¾¡ã§è¦ç´ æ•°ãŒå–ã‚Œã‚‹

```perl
my %hash = (a => 1, b => 2, c => 3);

# ãƒãƒƒã‚·ãƒ¥ã®ã‚¹ã‚«ãƒ©ãƒ¼è©•ä¾¡ã¯è¦ç´ æ•°ã§ã¯ãªã„ï¼
my $x = %hash;  # "3/8" ã®ã‚ˆã†ãªãƒã‚±ãƒƒãƒˆæƒ…å ±

# è¦ç´ æ•°ãŒæ¬²ã—ã„å ´åˆã¯keys()ã‚’ä½¿ã†
my $count = scalar keys %hash;  # 3
```

### è½ã¨ã—ç©´1: ãƒªã‚¹ãƒˆã®ãƒ•ãƒ©ãƒƒãƒˆåŒ–

Perlã®ãƒªã‚¹ãƒˆã¯å¸¸ã«ãƒ•ãƒ©ãƒƒãƒˆåŒ–ã•ã‚Œã¾ã™ï¼š

```perl
my @a = (1, 2);
my @b = (3, 4);
my @c = (@a, @b);  # (1, 2, 3, 4) - ãƒ•ãƒ©ãƒƒãƒˆåŒ–ã•ã‚Œã‚‹

# å¤šæ¬¡å…ƒé…åˆ—ã‚’ä½œã‚ŠãŸã„å ´åˆã¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ä½¿ã†
my @matrix = (
    [1, 2],
    [3, 4],
);
```

### è½ã¨ã—ç©´2: é–¢æ•°ã®å¼•æ•°ã¯å¸¸ã«ãƒ•ãƒ©ãƒƒãƒˆåŒ–ã•ã‚Œã‚‹

```perl
sub print_arrays {
    my (@arr1, @arr2) = @_;  # ã“ã‚Œã¯æœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªã„ï¼
    # @arr1 ãŒã™ã¹ã¦ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€@arr2 ã¯ç©ºã«ãªã‚‹
}

my @a = (1, 2);
my @b = (3, 4);
print_arrays(@a, @b);  # @arr1 = (1, 2, 3, 4), @arr2 = ()

# è¤‡æ•°ã®é…åˆ—ã‚’æ¸¡ã—ãŸã„å ´åˆã¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ä½¿ã†
sub print_arrays_correct {
    my ($arr1_ref, $arr2_ref) = @_;
    my @arr1 = @$arr1_ref;
    my @arr2 = @$arr2_ref;
    # ...
}
print_arrays_correct(\@a, \@b);
```

### è½ã¨ã—ç©´3: æ­£è¦è¡¨ç¾ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ

```perl
my $text = "apple banana cherry";

# ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒã¯åå¾©çš„ã«å‹•ä½œã™ã‚‹
while ($text =~ /(\w+)/g) {
    print "Found: $1\n";
}
# Found: apple
# Found: banana
# Found: cherry

# ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ä¸€åº¦ã«å…¨éƒ¨ãƒãƒƒãƒã™ã‚‹
my @words = $text =~ /(\w+)/g;
# @words = ('apple', 'banana', 'cherry')
```

### è½ã¨ã—ç©´4: voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã®è­¦å‘Š

```perl
use warnings;

my @array = (1, 2, 3);

# è­¦å‘Š: Useless use of array in void context
@array;

# ã“ã‚Œã‚‚åŒæ§˜
my %hash = (a => 1);
%hash;  # è­¦å‘Š

# å‰¯ä½œç”¨ãŒã‚ã‚‹å¼ãªã‚‰è­¦å‘Šã¯å‡ºãªã„
print @array;  # OKï¼ˆå‡ºåŠ›ã¨ã„ã†å‰¯ä½œç”¨ãŒã‚ã‚‹ï¼‰
```

## å®Ÿè·µçš„ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: æŸ”è»Ÿãªã‚²ãƒƒã‚¿ãƒ¼

```perl
package User;
use strict;
use warnings;

sub new {
    my ($class, %args) = @_;
    return bless \%args, $class;
}

sub roles {
    my $self = shift;
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒ­ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆã‚’è¿”ã™
        return @{$self->{roles} || []};
    } else {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒ­ãƒ¼ãƒ«ã®æ•°ã‚’è¿”ã™
        return scalar @{$self->{roles} || []};
    }
}

# ä½¿ç”¨ä¾‹
my $user = User->new(roles => ['admin', 'editor', 'user']);

my @roles = $user->roles;  # ('admin', 'editor', 'user')
my $count = $user->roles;  # 3

if ($user->roles > 1) {
    print "è¤‡æ•°ã®ãƒ­ãƒ¼ãƒ«ã‚’æŒã£ã¦ã„ã¾ã™\n";
}
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ã‚¹ãƒãƒ¼ãƒˆãªæ¤œç´¢

```perl
sub search {
    my ($pattern, $data_ref) = @_;
    
    my @results;
    for my $item (@$data_ref) {
        if ($item =~ /$pattern/) {
            if (wantarray) {
                # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒãƒã—ãŸé …ç›®ã‚’åé›†
                push @results, $item;
            } else {
                # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æœ€åˆã®ãƒãƒƒãƒã‚’å³åº§ã«è¿”ã™
                return $item;
            }
        }
    }
    
    return wantarray ? @results : undef;
}

# å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
my @data = (1..1_000_000);

# æœ€åˆã®1ä»¶ã ã‘æ¬²ã—ã„ï¼ˆåŠ¹ç‡çš„ï¼‰
my $first = search(qr/^999/, \@data);

# å…¨ä»¶æ¬²ã—ã„
my @all = search(qr/^999/, \@data);
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: è¨­å®šã®å–å¾—

```perl
package Config;
use strict;
use warnings;

my %config = (
    database => {
        host => 'localhost',
        port => 5432,
        name => 'mydb',
    },
    cache => {
        enabled => 1,
        ttl => 3600,
    },
);

sub get {
    my ($class, $key) = @_;
    
    my $value = $config{$key};
    
    if (ref $value eq 'HASH') {
        if (wantarray) {
            # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒã‚·ãƒ¥ã‚’ã‚­ãƒ¼ãƒ»å€¤ã®ãƒªã‚¹ãƒˆã¨ã—ã¦è¿”ã™
            return %$value;
        } else {
            # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: ãƒãƒƒã‚·ãƒ¥ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¿”ã™
            return $value;
        }
    }
    
    return $value;
}

# ä½¿ç”¨ä¾‹
my %db_config = Config->get('database');  # ãƒãƒƒã‚·ãƒ¥ã¨ã—ã¦ã‚³ãƒ”ãƒ¼
my $db_ref = Config->get('database');     # ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã¨ã—ã¦å–å¾—

my $host = $db_ref->{host};
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³4: æ—¥æ™‚ã®è§£æ

```perl
use Time::Piece;

sub parse_datetime {
    my ($str) = @_;
    
    my $t = Time::Piece->strptime($str, '%Y-%m-%d %H:%M:%S');
    
    if (wantarray) {
        # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å¹´æœˆæ—¥æ™‚åˆ†ç§’ã‚’å€‹åˆ¥ã«è¿”ã™
        return ($t->year, $t->mon, $t->mday, 
                $t->hour, $t->min, $t->sec);
    } else {
        # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: Time::Pieceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™
        return $t;
    }
}

# ä½¿ç”¨ä¾‹
my $dt = parse_datetime('2025-12-08 15:30:45');
print $dt->strftime('%Yå¹´%mæœˆ%dæ—¥');

my ($year, $month, $day, $hour, $min, $sec) 
    = parse_datetime('2025-12-08 15:30:45');
print "å¹´: $year, æœˆ: $month, æ—¥: $day\n";
```

## ã¾ã¨ã‚

Perlã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ¦‚å¿µã¯ã€æœ€åˆã¯æˆ¸æƒ‘ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç†è§£ã™ã‚‹ã¨éå¸¸ã«å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã¾ã™ã€‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **3ã¤ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**
   - ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å˜ä¸€ã®å€¤ã‚’æœŸå¾…
   - ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: è¤‡æ•°ã®å€¤ã‚’æœŸå¾…
   - voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æˆ»ã‚Šå€¤ã‚’ä½¿ã‚ãªã„

2. **é…åˆ—ã¨ãƒãƒƒã‚·ãƒ¥**
   - é…åˆ—ã®ã‚¹ã‚«ãƒ©ãƒ¼è©•ä¾¡ = è¦ç´ æ•°
   - ãƒãƒƒã‚·ãƒ¥ã®ã‚¹ã‚«ãƒ©ãƒ¼è©•ä¾¡ = ãƒã‚±ãƒƒãƒˆæƒ…å ±ï¼ˆé€šå¸¸ã¯æ°—ã«ã—ãªã„ï¼‰
   - ç©ºãƒã‚§ãƒƒã‚¯ã«ã¯ `if (@array)` ã‚„ `if (%hash)` ãŒä¾¿åˆ©

3. **æ­£è¦è¡¨ç¾**
   - ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ = ãƒãƒƒãƒã®æˆå¦ï¼ˆçœŸå½å€¤ï¼‰
   - ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ = ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸå€¤ã®ãƒªã‚¹ãƒˆ

4. **wantarray()**
   - ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: çœŸã‚’è¿”ã™
   - ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: å®šç¾©ã•ã‚ŒãŸå½ã‚’è¿”ã™
   - voidã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: æœªå®šç¾©å€¤ã‚’è¿”ã™

5. **å®Ÿç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³**
   - `wantarray()` ã‚’ä½¿ã£ã¦æŸ”è»Ÿãªé–¢æ•°ã‚’å®Ÿè£…
   - ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ç°¡æ½”ãªå€¤ã‚’è¿”ã™
   - ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯è©³ç´°ãªæƒ…å ±ã‚’è¿”ã™

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ„è­˜ã—ãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

Perlã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šè¡¨ç¾åŠ›è±Šã‹ãªã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```perl
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ´»ã‹ã—ãŸç¾ã—ã„ã‚³ãƒ¼ãƒ‰
my @sorted = sort { $a <=> $b } @numbers;  # ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
my $count = grep { $_ > 10 } @numbers;     # ã‚¹ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

# é…åˆ—ã®ç©ºãƒã‚§ãƒƒã‚¯
if (@array) { ... }

# æœ€åˆã®è¦ç´ ã‚’å–å¾—
my ($first) = @array;

# wantarray()ã§æŸ”è»Ÿãªé–¢æ•°
sub flexible_function {
    return wantarray ? (1, 2, 3) : 3;
}
```

ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯Perlã®é­”æ³•ã®ä¸€ã¤ã§ã™ã€‚ã“ã®æ¦‚å¿µã‚’ä½¿ã„ã“ãªã›ã°ã€ã‚ãªãŸã®Perlã‚³ãƒ¼ãƒ‰ã¯ã‚ˆã‚Šæ´—ç·´ã•ã‚Œã€è¡¨ç¾åŠ›è±Šã‹ãªã‚‚ã®ã«ãªã‚‹ã§ã—ã‚‡ã†ï¼

Happy Coding! ğŸ„
