---
comments: true
description: GitHub Copilot Coding Agent に「技術解説記事を書いて」と依頼した結果を分析。Issue から PR 作成までの実際のフローと、エージェントの動作を深掘りします
draft: true
hidden: false
tags:
  - ai
  - copilot
  - programming
title: Copilot Coding Agent に記事作成を依頼してみた ― Issue #58 の事例分析

---

[@nqounet](https://x.com/nqounet) です。

この記事では、GitHub Copilot Coding Agent に「技術解説記事を作成してほしい」と Issue で依頼した際の実際の動作を分析します。何がうまくいき、何が期待と違ったのかを深掘りし、今後の活用に向けた知見を共有します。

## TL;DR

- Issue #58 で「PR の技術解説記事を書いて」と依頼したところ、Copilot は汎用的な解説記事を作成した
- エージェントはリポジトリの AGENTS.md と instructions ファイルを参照し、フォーマットは正確に守った
- 一方で、「この PR 自体を分析して」という意図は正確に汲み取れなかった
- プロンプトの書き方次第で、より具体的な成果物を得られる可能性がある

## 今回の事例：Issue #58 の内容

### 依頼した Issue の内容

[Issue #58](https://github.com/nqou-net/www.nqou.net/issues/58) で以下のような依頼をしました。

```markdown
# 技術解説記事作成依頼

対象PR: copilot/tasks#PR_kwDOJQnkT862IhrM

## 目的
- 上記PRの技術的変更点を中級〜上級エンジニア向けに深掘り、
  設計意図・実装詳細・導入/移行手順・注意点・実践サンプル等を
  網羅的に解説した技術記事を作成してください
```

### 期待していた成果物

- この PR（Issue #58 から作成された PR #59）自体の分析
- Copilot がどのようにタスクを処理したかの詳細
- 具体的なファイル変更の解説
- 実際の動作ログや処理時間

### 実際に得られた成果物

Copilot は `content/post/1764558700.md` という記事ファイルを作成しました。内容は：

- GitHub Copilot Coding Agent の一般的な仕組み解説
- アーキテクチャ図（ASCII）
- 導入手順
- FAQ

## Copilot の動作分析

### 1. リポジトリ構造の理解

Copilot はまず以下のファイルを参照しました。

**AGENTS.md（リポジトリルート）**

```markdown
# AGENTS.md

本リポジトリ（https://www.nqou.net/）のAIコーディングエージェント向けガイドです。

## プロジェクト概要

Hugoで構築された個人ブログサイト。

## Dos（やるべきこと）

- ブログ記事作成時は `.github/instructions/post.instructions.md` を参照する
- 新規記事のファイル名は `<epoch秒>.md` 形式で作成する
- front matterには必須項目（title, description, tags, draft）をすべて含める
- 新規記事の `draft` は必ず `true` に設定する
```

**結果**: Copilot は `1764558700.md` というエポック秒形式のファイル名で、`draft: true` を設定した記事を作成。AGENTS.md の指示に正確に従いました。

### 2. instructions ファイルの参照

**`.github/instructions/post.instructions.md`** も参照されました。

```markdown
## トーン＆スタイル

- **丁寧かつフレンドリー**な文体で執筆する
- 専門用語は**必要最小限**に抑え、初出時に簡潔な補足説明をつける

## YAML front matter

### 必須項目

- comments: true
- description: "短い説明（100文字以内）"
- draft: true
- hidden: false
- tags: [tag1, tag2]
- title: "記事タイトル"
```

**結果**: 記事のフォーマット、front matter、文体は instructions に従っていました。

### 3. 変更ファイル一覧

| ファイル | 変更内容 |
|---------|---------|
| `content/post/1764558700.md` | 新規作成（287行） |

### 4. 処理フロー

```
Issue #58 作成
    ↓
Copilot をアサイン
    ↓
リポジトリ分析（AGENTS.md, instructions 読み込み）
    ↓
ブランチ作成: copilot/create-technical-article-copilot-pr
    ↓
記事ファイル作成
    ↓
PR #59 作成
    ↓
レビュー待ち
```

## なぜ期待と違う結果になったのか

### Issue の解釈の違い

**依頼者の意図**:
> 「この PR 自体（Copilot が作成中の PR）を分析して、その過程を記事にしてほしい」

**Copilot の解釈**:
> 「GitHub Copilot Coding Agent について解説する記事を書いてほしい」

### 原因の分析

1. **自己参照の難しさ**: Copilot は「自分が今やっていることを分析する」というメタ的な指示を理解しにくい
2. **PR リンクの解釈**: `PR_kwDOJQnkT862IhrM` という node ID 形式のリンクは、Copilot がアクセスできない可能性がある
3. **一般化バイアス**: 技術記事の依頼に対して、汎用的で再利用可能な記事を書く傾向がある

## 改善のためのプロンプト例

より具体的な成果物を得るには、以下のような依頼が効果的と考えられます。

### 改善案 1: 明示的な自己分析依頼

```markdown
# 記事作成依頼

この Issue を処理する過程そのものを記事にしてください。

## 含めてほしい内容
- あなた（Copilot）がこの Issue を受け取ってから PR を作成するまでの手順
- 参照した AGENTS.md や instructions ファイルの内容
- 作成したファイルと変更内容
- 処理にかかった時間（わかる範囲で）
```

### 改善案 2: 具体的なファイル指定

```markdown
# 記事作成依頼

以下のファイルの変更内容を解説する記事を書いてください。

## 対象ファイル
- content/post/XXXXXXXX.md（今回作成するファイル）
- 変更前後の diff を含める
```

## この事例から学んだこと

### うまくいった点

1. **フォーマット遵守**: AGENTS.md と instructions の指示に正確に従った
2. **品質**: 生成された記事自体の品質は高く、構造化されていた
3. **ファイル命名**: エポック秒形式のファイル名を正確に使用

### 改善が必要な点

1. **意図の汲み取り**: 抽象的な依頼から具体的な意図を読み取る能力
2. **自己参照**: 自分の処理過程を分析・記述する能力
3. **外部リンク解釈**: GitHub node ID 形式のリンクの解釈

## FAQ

### Q1: Copilot は自分の処理を分析できないのか？

A: 完全にはできません。ただし、明示的に「あなたが行った処理を説明してください」と依頼すれば、ある程度の自己説明は可能です。

### Q2: より具体的な記事を得るには？

A: Issue の依頼内容をより具体的に書くことが効果的です。「〇〇について書いて」ではなく「△△ファイルの□□の変更について、××の観点から解説して」のように指定します。

### Q3: AGENTS.md はどの程度効果があるのか？

A: フォーマットや命名規則などの「形式的なルール」は非常によく守られます。一方、「意図の解釈」に関するガイダンスは効果が限定的です。

## 参考資料

- [Issue #58: 技術解説記事作成依頼](https://github.com/nqou-net/www.nqou.net/issues/58)
- [PR #59: Add technical article](https://github.com/nqou-net/www.nqou.net/pull/59)
- [AGENTS.md](https://github.com/nqou-net/www.nqou.net/blob/main/AGENTS.md)
- [post.instructions.md](https://github.com/nqou-net/www.nqou.net/blob/main/.github/instructions/post.instructions.md)
- [GitHub Copilot Documentation](https://docs.github.com/en/copilot)

## まとめ

今回の事例では、Copilot は依頼の「形式」は正確に守りましたが、「意図」の解釈には課題がありました。これは Copilot の限界というよりも、プロンプト設計の重要性を示しています。

具体的で明示的な指示を与えることで、より期待に近い成果物を得られる可能性があります。AI エージェントとの協働においては、「何を期待しているか」を明確に言語化することが重要です。
