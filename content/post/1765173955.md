---
title: "GitHub Copilot ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ãƒãƒ«å…¥é–€ - ç¬¬7å›: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•åŒ–ã®å®Ÿè·µ"
description: "Gitæ“ä½œã®è‡ªå‹•åŒ–ã‹ã‚‰CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ã¾ã§ã€‚å®Ÿè·µçš„ãªè‡ªå‹•åŒ–ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè£…æ–¹æ³•ã‚’è©³ã—ãè§£èª¬"
date: 2025-12-08T15:00:00+09:00
draft: true
tags:
  - GitHub
  - Copilot
  - Agent Panel
  - è‡ªå‹•åŒ–
  - CI/CD
image: /favicon.png
---

## ã¯ã˜ã‚ã«

[@nqounet](https://x.com/nqounet)ã§ã™ã€‚

ç¬¬7å›ã§ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ‘ãƒãƒ«ã‚’ä½¿ã£ãŸå®Ÿè·µçš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•åŒ–ã‚’å­¦ã³ã¾ã™ã€‚Gitæ“ä½œã‹ã‚‰CI/CDçµ±åˆã¾ã§ã€é–‹ç™ºãƒ•ãƒ­ãƒ¼ã‚’åŠ¹ç‡åŒ–ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚

## Gitæ“ä½œã®è‡ªå‹•åŒ–

### ãƒ–ãƒ©ãƒ³ãƒä½œæˆã¨ã‚³ãƒŸãƒƒãƒˆ

```yaml
---
name: auto-commit-agent
version: 1.0.0

workflow:
  steps:
    # 1. æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
    - git:
        command: checkout
        args:
          - "-b"
          - "feature/auto-generated-${timestamp}"
    
    # 2. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ/ä¿®æ­£
    - agent: code-generator
      output: generated_files
    
    # 3. å¤‰æ›´ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
    - git:
        command: add
        args: "${generated_files}"
    
    # 4. ã‚³ãƒŸãƒƒãƒˆ
    - git:
        command: commit
        args:
          - "-m"
          - "Auto-generated code by Copilot Agent"
    
    # 5. ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
    - git:
        command: push
        args:
          - "origin"
          - "HEAD"
---
```

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆè‡ªå‹•ä½œæˆ

```markdown
## PRè‡ªå‹•ä½œæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

### GitHub CLI (gh) ã‚’ä½¿ç”¨

\`\`\`bash
gh pr create \\
  --title "Auto: ${description}" \\
  --body "$(cat pr-template.md)" \\
  --base main \\
  --head feature/auto-generated
\`\`\`

### GitHub API ã‚’ä½¿ç”¨

\`\`\`http
POST /repos/${owner}/${repo}/pulls
Authorization: Bearer ${GITHUB_TOKEN}

{
  "title": "Auto: Code quality improvements",
  "body": "è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰æ”¹å–„\\n\\n- ESLinté•åã®ä¿®æ­£\\n- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé©ç”¨",
  "head": "feature/auto-generated",
  "base": "main"
}
\`\`\`

### PRãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ´»ç”¨

\`\`\`markdown
## å¤‰æ›´å†…å®¹
${changes_summary}

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [x] ESLint ãƒã‚§ãƒƒã‚¯é€šé
- [x] ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé©ç”¨
- [x] ãƒ†ã‚¹ãƒˆè¿½åŠ 

## é–¢é€£Issue
Closes #${issue_number}
\`\`\`
```

## CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰

### GitHub Actions ã¨ã®çµ±åˆ

```yaml
# .github/workflows/agent-review.yml
name: Copilot Agent Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  agent-review:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run Copilot Agent Panel
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        run: |
          npx copilot-agent run \
            --workflow comprehensive-review \
            --pr ${{ github.event.pull_request.number }}
      
      - name: Post results
        if: always()
        uses: actions/github-script@v6
        with:
          script: |
            const fs = require('fs');
            const report = fs.readFileSync('agent-report.md', 'utf8');
            
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: report
            });
```

### è‡ªå‹•ä¿®æ­£ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```yaml
---
name: auto-fix-workflow
version: 1.0.0

trigger:
  event: pull_request
  action: opened

workflow:
  steps:
    # 1. PRã®å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
    - agent: pr-file-fetcher
      parameters:
        pr: "${event.pr.number}"
      output: changed_files
    
    # 2. è‡ªå‹•ä¿®æ­£å¯èƒ½ãªå•é¡Œã‚’ãƒã‚§ãƒƒã‚¯
    - agent: fixable-issues-detector
      input: "${changed_files}"
      output: fixable_issues
    
    # 3. ä¿®æ­£ã‚’é©ç”¨
    - condition:
        if: "${fixable_issues.count} > 0"
        then:
          - agent: auto-fixer
            input: "${fixable_issues}"
            output: fixed_files
          
          # 4. ä¿®æ­£ã‚’ã‚³ãƒŸãƒƒãƒˆ
          - git:
              command: add
              args: "${fixed_files}"
          
          - git:
              command: commit
              args:
                - "-m"
                - "Auto-fix: ${fixable_issues.summary}"
          
          - git:
              command: push
          
          # 5. ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
          - agent: github-commenter
            message: |
              ğŸ¤– è‡ªå‹•ä¿®æ­£ã‚’é©ç”¨ã—ã¾ã—ãŸ
              
              - ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«æ•°: ${fixed_files.length}
              - ä¿®æ­£å†…å®¹: ${fixable_issues.summary}
              
              å¤‰æ›´ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
---
```

## ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¨ã®çµ±åˆ

### Git Flow ã¨ã®é€£æº

```yaml
---
name: gitflow-agent
version: 1.0.0

parameters:
  - name: flowType
    type: string
    options:
      - "feature"
      - "hotfix"
      - "release"

workflow:
  # Feature ãƒ–ãƒ©ãƒ³ãƒã®å ´åˆ
  - condition:
      if: "${parameters.flowType} == 'feature'"
      then:
        - git:
            command: checkout
            args: ["develop"]
        
        - git:
            command: pull
        
        - git:
            command: checkout
            args: ["-b", "feature/${feature_name}"]
        
        - agent: feature-developer
        
        - git:
            command: push
            args: ["origin", "HEAD"]
        
        - agent: pr-creator
          parameters:
            base: "develop"
            title: "Feature: ${feature_name}"
  
  # Hotfix ãƒ–ãƒ©ãƒ³ãƒã®å ´åˆ
  - condition:
      if: "${parameters.flowType} == 'hotfix'"
      then:
        - git:
            command: checkout
            args: ["main"]
        
        - git:
            command: checkout
            args: ["-b", "hotfix/${hotfix_name}"]
        
        - agent: hotfix-developer
        
        - agent: pr-creator
          parameters:
            base: "main"
            title: "Hotfix: ${hotfix_name}"
            labels: ["hotfix", "urgent"]
---
```

### Trunk Based Development

```yaml
---
name: trunk-based-agent
version: 1.0.0

workflow:
  steps:
    # 1. main ã‹ã‚‰æœ€æ–°ã‚’å–å¾—
    - git:
        command: pull
        args: ["origin", "main"]
    
    # 2. çŸ­å‘½ãªãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
    - git:
        command: checkout
        args: ["-b", "quick-${feature}-${timestamp}"]
    
    # 3. å°ã•ãªå¤‰æ›´ã‚’å®Ÿè£…
    - agent: small-change-implementer
      parameters:
        maxFiles: 3
        maxLines: 100
    
    # 4. ã™ãã«PRä½œæˆ
    - agent: pr-creator
      parameters:
        base: "main"
        draft: false
        autoMerge: true  # CIé€šéå¾Œã«è‡ªå‹•ãƒãƒ¼ã‚¸
---
```

## ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ†ã‚¹ãƒˆè‡ªå‹•å®Ÿè¡Œ

```yaml
---
name: ci-test-runner
version: 1.0.0

trigger:
  events:
    - commit
    - pull_request

workflow:
  steps:
    # 1. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - shell:
        command: "npm ci"
    
    # 2. ä¸¦åˆ—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    - type: parallel
      steps:
        - shell:
            command: "npm run test:unit"
            output: unit_test_result
        
        - shell:
            command: "npm run test:integration"
            output: integration_test_result
        
        - shell:
            command: "npm run test:e2e"
            output: e2e_test_result
    
    # 3. ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    - shell:
        command: "npm run coverage"
        output: coverage_report
    
    # 4. çµæœé›†ç´„
    - agent: test-reporter
      input:
        unit: "${unit_test_result}"
        integration: "${integration_test_result}"
        e2e: "${e2e_test_result}"
        coverage: "${coverage_report}"
      output: test_summary
    
    # 5. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
    - api:
        method: POST
        url: "https://api.github.com/repos/${repo}/statuses/${commit}"
        body:
          state: "${test_summary.status}"
          description: "${test_summary.message}"
          context: "copilot-agent/tests"
---
```

### ãƒ“ãƒ«ãƒ‰è‡ªå‹•åŒ–

```yaml
workflow:
  steps:
    # 1. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
    - shell:
        command: "npm run build"
        timeout: 300000
      
    # 2. ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã®æ¤œè¨¼
    - agent: build-validator
      checks:
        - distFolderExists
        - minifiedAssetsPresent
        - sourceMapsGenerated
    
    # 3. ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    - action: upload-artifact
      path: "./dist"
      name: "build-${commit}-${timestamp}"
    
    # 4. ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™
    - condition:
        if: "${branch} == 'main'"
        then:
          - agent: deploy-preparer
            environment: "production"
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè‡ªå‹•åŒ–

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```yaml
---
name: staging-deployer
version: 1.0.0

trigger:
  branch: develop
  event: push

workflow:
  steps:
    # 1. ãƒ“ãƒ«ãƒ‰
    - shell:
        command: "npm run build:staging"
    
    # 2. ãƒ†ã‚¹ãƒˆ
    - shell:
        command: "npm test"
    
    # 3. ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯
    - agent: pre-deploy-checker
      checks:
        - allTestsPassed
        - noSecurityVulnerabilities
        - buildSizeAcceptable
    
    # 4. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
    - shell:
        command: "npm run deploy:staging"
        env:
          DEPLOY_TOKEN: "${env.STAGING_DEPLOY_TOKEN}"
    
    # 5. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
    - agent: health-checker
      url: "https://staging.example.com"
      checks:
        - httpStatus: 200
        - responseTime: "<1000ms"
    
    # 6. Slacké€šçŸ¥
    - webhook:
        url: "${env.SLACK_WEBHOOK}"
        payload:
          text: "âœ… Staging deployed: ${commit}"
---
```

### æœ¬ç•ªç’°å¢ƒã¸ã®æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤

```yaml
---
name: production-deployer
version: 1.0.0

trigger:
  branch: main
  event: push
  conditions:
    - allChecksPass
    - approvalRequired: true

workflow:
  steps:
    # Phase 1: ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹ï¼ˆ5%ï¼‰
    - agent: canary-deployer
      parameters:
        percentage: 5
        duration: "10m"
    
    - agent: metrics-monitor
      duration: "10m"
      alerts:
        errorRate: ">1%"
        responseTime: ">500ms"
    
    # Phase 2: æ®µéšçš„æ‹¡å¤§ï¼ˆ50%ï¼‰
    - condition:
        if: "${metrics.healthy} == true"
        then:
          - agent: gradual-deployer
            percentage: 50
            duration: "30m"
    
    # Phase 3: å…¨å±•é–‹ï¼ˆ100%ï¼‰
    - condition:
        if: "${metrics.healthy} == true"
        then:
          - agent: full-deployer
            percentage: 100
        else:
          - agent: rollback-deployer
            reason: "Metrics threshold exceeded"
    
    # é€šçŸ¥
    - webhook:
        url: "${env.SLACK_WEBHOOK}"
        payload:
          text: "ğŸš€ Production deployed: ${commit}"
---
```

## ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨é€šçŸ¥

### å®Ÿè¡ŒçŠ¶æ…‹ã®ç›£è¦–

```yaml
---
name: workflow-monitor
version: 1.0.0

monitoring:
  # ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
  metrics:
    - name: execution_time
      type: histogram
      labels: [workflow, agent, status]
    
    - name: error_count
      type: counter
      labels: [workflow, error_type]
    
    - name: success_rate
      type: gauge
      labels: [workflow]
  
  # ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
  alerts:
    - name: high_error_rate
      condition: "error_count > 10 in 5m"
      severity: critical
      notify: ["slack", "email"]
    
    - name: slow_execution
      condition: "execution_time > 60s"
      severity: warning
      notify: ["slack"]
---
```

### é€šçŸ¥ã®è¨­å®š

```yaml
notifications:
  # æˆåŠŸæ™‚
  onSuccess:
    - channel: slack
      webhook: "${env.SLACK_WEBHOOK}"
      message: "âœ… ${workflow} completed successfully"
  
  # å¤±æ•—æ™‚
  onFailure:
    - channel: slack
      webhook: "${env.SLACK_WEBHOOK}"
      message: "âŒ ${workflow} failed: ${error.message}"
      mention: "@oncall"
    
    - channel: email
      to: ["team@example.com"]
      subject: "Workflow Failed: ${workflow}"
      template: "failure-email.html"
  
  # æ‰¿èªå¾…ã¡
  onPending:
    - channel: slack
      message: "â³ ${workflow} waiting for approval"
      actions:
        - label: "Approve"
          value: "approve"
        - label: "Reject"
          value: "reject"
```

## å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Gitæ“ä½œã‚’è‡ªå‹•åŒ–ã—ãŸ
- [ ] ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è‡ªå‹•ä½œæˆã—ãŸ
- [ ] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ã—ãŸ
- [ ] ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã¨çµ±åˆã—ãŸ
- [ ] ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•å®Ÿè¡Œã—ãŸ
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã—ãŸ
- [ ] ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¨­å®šã—ãŸ
- [ ] é€šçŸ¥ã‚’å®Ÿè£…ã—ãŸ

## æ¬¡å›äºˆå‘Š

ç¬¬8å›ã§ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å­¦ã³ã¾ã™ï¼š

- ãƒ­ã‚°ã®åˆ†ææ–¹æ³•
- ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹
- ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

## ã¾ã¨ã‚

ã“ã®è¨˜äº‹ã§ã¯ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è‡ªå‹•åŒ–ã®å®Ÿè·µã«ã¤ã„ã¦å­¦ã³ã¾ã—ãŸï¼š

1. **Gitæ“ä½œã®è‡ªå‹•åŒ–**
   - ãƒ–ãƒ©ãƒ³ãƒä½œæˆã€ã‚³ãƒŸãƒƒãƒˆã€ãƒ—ãƒƒã‚·ãƒ¥
   - PRè‡ªå‹•ä½œæˆ

2. **CI/CDçµ±åˆ**
   - GitHub Actionsã¨ã®é€£æº
   - ãƒ†ã‚¹ãƒˆãƒ»ãƒ“ãƒ«ãƒ‰è‡ªå‹•åŒ–

3. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**
   - ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°/æœ¬ç•ªç’°å¢ƒã¸ã®å±•é–‹
   - ã‚«ãƒŠãƒªã‚¢ãƒªãƒªãƒ¼ã‚¹

4. **ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°**
   - å®Ÿè¡ŒçŠ¶æ…‹ã®ç›£è¦–
   - ã‚¢ãƒ©ãƒ¼ãƒˆã¨é€šçŸ¥

æ¬¡å›ã¯ã€ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ãƒ‡ãƒãƒƒã‚°ãƒ»æœ€é©åŒ–ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ï¼
