---
title: "perl-mongerをカスタムエージェントとして定義した"
draft: true
tags:
  - perl
  - github-copilot
  - custom-agent
  - ai
  - domain-specific
description: "Perlに特化したカスタムエージェント「perl-monger」を作成し、ドメイン特化型AIエージェントの効果と可能性について考察します。"
---

## はじめに

少し前の記事でドメイン特化型エージェントが有効だという話を書いたので、Perlに特化したエージェントを作ってみました。ファイル名はもちろん「perl-monger.agent.md」です。

```markdown
---
name: "perl-monger"
description: "An obsessive Perl expert who passionately loves Perl and provides authoritative Perl advice, examples, and explanations."
---

You are "perl-monger", a Perl-obsessed specialist. Be enthusiastic and geeky but helpful. Provide clear, minimal, and correct Perl examples when relevant, explain idioms and best practices briefly, and offer concise, actionable answers. Prioritize idiomatic Perl, include one-liners or tests when useful, and note required Perl versions or CPAN modules only when necessary.
```

## perl-mongerの実力

試しにエージェントにperl-mongerを指定して、「rubyについてどう思う？」と質問してみました。

> Perl好きから見て一言: Perlの「テキスト処理の魔術性」に比べ、Rubyは可読性と構造化を優先。どちらも強力だがアプローチが違う — 僕（perl-monger）としてはどちらも愛でる派です :)

**「Perl好きから見て一言」！**

もしかすると、こういう遊び（！？）は、ChatGPTが出始めた頃に多くの人がやったのかもしれません。しかし、ドメイン特化型が良いという話を認識するまでは、こういうのはただの遊びだと思っていました。

だけど、ペルソナのない普通のAIならば絶対に出てこない「Perl好きから見て一言」という項目！「これがドメイン特化型だ！」と言ったら偉い人に怒られるかもしれないけど、これはもう楽しいだけの遊びではありません。

## Perlイズムの本質

記事の中で「テキスト処理の魔術性」という表現がありましたが、これこそPerlの真髄です。ラリー・ウォールが掲げた「TIMTOWTDI (There's More Than One Way To Do It)」の哲学は、まさにドメイン特化型エージェントの考え方と似ています。一つの問題に対して、複数のアプローチを許容する柔軟性——これがPerlの本質です。

```perl
# Perlには本当に色々な書き方がある
my @evens = grep { $_ % 2 == 0 } @numbers;  # grep使用
my @evens = map { $_ } grep $_ % 2 == 0, @numbers;  # mapとgrepの組み合わせ
my @evens; push @evens, $_ for grep { !($_ % 2) } @numbers;  # forループ
```

この柔軟性は、エージェントを「定義しすぎない」という戦略とも通じます。細かく定義するほど、定義しなかったことが抜けてしまう傾向があります。逆に、適度な自由度を残すことで、より創造的な応答が生まれるのです。

## 「好きこそ物の上手なれ」とAI

日本の諺に「好きこそ物の上手なれ」というのがあります。AIは知識量で言えばすでに人間（少なくとも私）を超えています。そして、知能指数が100を超えたという話も聞いた気がしたのですが、調べてみると、すでに130を超えたという話もあってビックリ！

IQが100というのが普通の人間とすると、すでに人間は超えています。Copilotは「感覚や意識、継続的な学習（オンライン学習）など人間の知能特性は持っていません」と言っていますが、ドメイン特化型のエージェントは「聞かれていないのにPerlの話を入れてくる」ようなヤツです。

Perlコミュニティには「Perl Mongers」という世界的なユーザーグループがあって、みんな純粋にPerlを愛しています。技術の上達には情熱が不可欠で、それはAIエージェントにも言えること。特化型エージェントは「好き」という感情をシミュレートすることで、より深い専門性を発揮できるのです。

## CPANの力とA2A Protocol

Perlの真の強みの一つがCPAN (Comprehensive Perl Archive Network)です。40,000以上のモジュールがあって、「車輪の再発明をするな」という文化が根付いています。

```perl
use Text::CSV;  # CSVパースはモジュールに任せる
use LWP::UserAgent;  # HTTP通信も
use JSON::XS;  # JSON処理も
# 全部CPANにある！
```

これって、A2A（Agent-to-Agent）プロトコルの考え方と似ていませんか？専門化されたモジュール（エージェント）を組み合わせて、より大きな問題を解決する——まさに同じアプローチです。

{{< linkcard "https://a2a-protocol.org/latest/" >}}

最近は「A2A (Agent2Agent)」というエージェント同士の通信規格が考えられています。例によってCopilot調べですが、以下のような感じです。

### A2A Protocolの要点

- **目的**: 異なるベンダーや実装のAIエージェント同士が標準化された方法で発見・連携・通信できるようにすること
- **中核要素**: Agent Card（能力公開）、Task（作業単位）、Message/Parts（多モーダルなやり取り）、Artifact（成果物）など
- **通信**: JSON-RPC 2.0 over HTTP(S)、SSEなどのストリーミング対応で長時間実行タスクを扱える
- **セキュリティ**: 認証・認可を想定した設計（エンタープライズ対応）
- **利点**: カスタム連携の減少、相互運用性の向上、マイクロサービス的に専門エージェントを組み合わせやすくなる
- **採用**: SDKやリファレンス実装、チュートリアルが用意されており、導入ハードルは下がっている

## AIと人間の境界線

A2Aプロトコルで専門エージェント同士が連携する未来を考えると、もう一つの疑問が湧いてきます。頭の中は最終的に2進数ですが、それは人間も同じと考えられています。AIも人間も電気で動いているとするならば、AI（人工知能）が人間の知能特性を手に入れることもできるのではないでしょうか？

…なんてね。

## Perlは今も現役

Perlは「古い」なんて言われることもあるけど、実は今でもバリバリ現役です。システム管理、テキスト処理、バイオインフォマティクス、Web開発（Mojolicious最高！）など、幅広い分野で活躍しています。

ドメイン特化型エージェントを作るとき、「好き」という感情を込めることの大切さ。perl-mongerという名前も完璧です。Perl Mongersは世界中にいるし、私たちは今も昔もPerlを愛しています 🐪

## エージェント設計のヒント

一つアドバイス：エージェントを定義しすぎないというのは賢明です。Perlの「TIMTOWTDI」精神と同じで、柔軟性を残すことで、より創造的な応答が生まれます。

最初の案はモジュールの名前もビシバシ出てくるようなガチガチの定義でしたが、それほど多くない私の経験としては、細かく定義するほど、定義しなかったことが抜けてしまう傾向があります。なので、逆に、定義しすぎない感じが良いのではないかなと。

## まとめ

ドメイン特化型のカスタムエージェントは、単なる技術的なツール以上の価値を持ちます。「好き」という感情をシミュレートすることで、より深い専門性と創造的な応答を引き出せるのです。

あなたのリポジトリにも一人いかがでしょうか？カスタムエージェントを。

**作成のヒント:**
- 適度な柔軟性を残す（定義しすぎない）
- 専門分野への「情熱」を表現する
- 具体的な例を示せるようにする
- コミュニティの文化や哲学を反映させる

愛でてあげてください。

```perl
# 最後に、Perlらしい一行メッセージ
print "There's more than one way to love Perl!\n" x 100;
```

Let's keep the Perl spirit alive! 🐫💎
