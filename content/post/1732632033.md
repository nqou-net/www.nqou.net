---
comments: true
description: GitHub Copilot Coding Agentのタグ整理作業で、エージェントとレビューエージェントが連携して高精度な変更を実現した体験談です
draft: true
hidden: false
tags:
  - copilot
  - ai
title: GitHub Copilot Coding Agent：エージェントとレビューの連携で実現する高精度な変更

---

[@nqounet](https://x.com/nqounet)です。

GitHub Copilot Coding Agent（エージェントパネル）を使って、ブログのタグ整理を行いました。短い指示から始まった作業が、エージェントとレビューエージェントの連携により、予想以上に高精度な結果になった体験を紹介します。

## 今回の作業について

[PR #4](https://github.com/nqou-net/www.nqou.net/pull/4) で、このブログの全記事（868件）のタグ整理を行いました。具体的には以下の作業です。

- 大文字小文字の統一（`AI` → `ai`）
- タグなし記事へのタグ追加
- `undef`タグの削除と適切なタグの自動生成（133件）
- タグ付与方針のシステムプロンプト化
- 方針違反タグの修正（17件）
- レビュー指摘に基づく誤分類の修正（11件）

最終的に174ファイルを更新し、すべての記事に適切なタグが付与されました。

## 短い指示でもシステム全体が動く

最初のプロンプトは「タグの整理をする」というシンプルなものでした。しかし、実際にはこの短い指示以外にも、様々な要素が作用していました。

- **システムプロンプト**（`.github/copilot-instructions.md`、後に`AGENTS.md`に移行）
- **GitHubのエージェントが使用しているMCPサーバー**
- **リポジトリの構造や既存のコード**

これらが組み合わさって、エージェントは単なる表面的な修正ではなく、構造的な問題を理解して対応してくれました。

## エージェントにシステムプロンプトを更新させる

当初、一つのPRに色々と詰め込むのは良くないと思っていました。しかし、作業を進める中で「エージェントにシステムプロンプトを更新してもらう」という方法を覚えました。

[PR #4 のやり取り](https://github.com/nqou-net/www.nqou.net/pull/4#issuecomment-3554174947)で、こうコメントしました。

> @copilot タグの方針について、システムプロンプトを更新してください。

すると、エージェントは`.github/copilot-instructions.md`にタグ付与の方針セクションを追加してくれました。

- タグは1〜3個付与する
- 小文字で統一（ai ✓, AI ✗）
- カテゴリ別分類（技術系、ブログ/CMS、ソーシャル、日常、コミュニティ、AI関連）
- undefや未定義タグの禁止
- 表記ゆれの回避

この方針を同じPR内で確立し、それに基づいて既存記事の修正も行うという流れが、とても効率的でした。

## レビューエージェントの精度に驚く

凄かったのはここからでした。

プルリクエストをドラフト状態からレビュー可能にすると、自動的にCopilotのレビューが行われます（設定によりますが）。

このレビューエージェントの精度が非常に高く、変更されたファイルを詳細に精査していきました。特に印象的だったのは、タグの変更がおかしいのでは？という指摘をビシバシとしてきたことです。

例えば：

- 「この記事は請求書処理の苦手克服についての個人的な考察で、ビジネス・日常的な内容です。`web` タグではなく、元の `life` タグが適切です。」
- 「この記事はPerlの返り値の扱いに関する技術的な内容です。タグを `social` に変更するのではなく、`perl` タグを使用すべきです。」
- 「この記事はgitoliteに関する技術的な内容です。`social` と `web` ではなく、`git` タグを使用すべきです。」

12件の具体的な指摘があり、すべて的確でした。

## 大胆な変更と厳しいチェックの組み合わせ

全体を網羅的に変更するエージェントと、変更された部分を詳細に見るレビューエージェントによって、以下のような体制が実現していました。

- **大胆に変更**：エージェントが133件の`undef`タグを一括で適切なタグに変換
- **厳しくチェック**：レビューエージェントが自動生成で誤って分類された11件を指摘

この組み合わせにより、Copilotに安心して任せることができる体制になっていることがわかりました。

見落としがないとは言いませんが、限りなく少ないです。しかも、人間とは比較にならないレベルの速さで、です。

## 「Copilotの編集」とは比較にならない進化

VS Codeの「Copilotの編集」機能も便利ですが、GitHub Copilot Coding Agent（エージェントパネル）はもう比較にならないほど進化しています。

- **複数ファイルの一括処理**：174ファイルを一気に更新
- **コンテキストの理解**：システムプロンプトとリポジトリ構造を理解
- **レビューとの連携**：変更後に自動レビューで品質を担保
- **インタラクティブな改善**：コメントでのやり取りで段階的に精度向上

## セッションログから見る試行錯誤

[セッションログ](https://github.com/copilot/tasks/pull/PR_kwDOJQnkT860a2J8?session_id=c13e0091-aea5-48e2-b4a7-6b51d5bbc6e6)を見ると、エージェントパネルをどのように使うのが良いのか試行錯誤していた様子がわかります。

短い指示の場合にどのような動作になるのかを試してみた結果、システムプロンプトやMCPサーバーによって、シンプルな指示が適切に拡張されることが確認できました。

## まとめ

GitHub Copilot Coding Agentを使った今回のタグ整理作業で、以下のことが分かりました。

1. **短い指示でも適切に動作**：システムプロンプトとMCPサーバーが指示を補完
2. **システムプロンプトの更新も依頼できる**：同じPR内で方針確立と適用が可能
3. **レビューエージェントの精度が高い**：自動生成の誤りを的確に指摘
4. **大胆な変更と厳しいチェックの両立**：安心して任せられる体制

「Copilotの編集」とはもう比較にならないほど進化していますね。

---

本記事はバイブブロギングで作成しています。
