---
date: 2012-07-12T13:35:00+09:00
draft: false
iso8601: 2012-07-12T13:35:00+09:00
tags:
  - undef
title: ファイルシステムで困った話

---

[@nqounet](https://twitter.com/nqounet)です。

外部のハードディスクにデータを保存した時に、パーミッションの情報がなくなって困ったことはありませんか？

私は困りました。

外部ディスク上のファイルをターミナルで操作した時に気づいたのですが、chmodしても変更できないし、なんじゃこりゃ、という感じでした。

この状態で、サーバーにファイルをアップロード（ftpだけでなくscpでも）すると残念な感じになるので、ファイルシステムには気をつけないといけませんね。

ずっとWindowsな生活をしていた私にとって、このあたりの基礎的な知識が根本的に足りてないのだと思います。

で、結局ファイルはちゃんとしたファイルシステムで管理することにしたのですが、いちいちパーミッションを変えるのが面倒で、せめてファイルだけでも一発で出来ないものかと調べてみたら、まあ、ちゃんとありました。

```text
$ find . -type f -print0 | xargs -0 chmod 0604

```

これは、現在のディレクトリ以下にあるファイルを「0604」（所有者のみ読み書き、その他大勢は読むだけ可能）にする。

```text
$ find . -type d -print0 | xargs -0 chmod 0705

```

こちらは、ディレクトリを一括で変更する場合です。

findの「-print0」と、xargsの「-0」は、「空白」をうまく処理してくれる連携技です。普段は「空白」を使わないので気が付きませんでしたが、このような備えは重要ですね。

最初は空白が原因でエラーになっていて泣きそうになりましたが、xargsで解決できるのを知って大喜びです。

xargsって便利ですね。

<div>## SEE ALSO
- [いまさらxargsの便利さを主張してみる — ディノオープンラボラトリ](http://openlab.dino.co.jp/2008/02/20/133431188.html)

</div>
