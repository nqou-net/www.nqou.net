---
date: 2012-11-30T20:13:00+09:00
description: "Perlで「Twitterでログイン」とか、そういうのを作るときに、Net::Twitter::Liteはとても便利です"
draft: false
iso8601: 2012-11-30T20:13:00+09:00
tags:
  - perl
title: Net::Twitter::Liteでの認証が爆速になって生きるのがつらい

---
[@nqounet](https://twitter.com/nqounet)です。

## Net::Twitter::Lite

Perlで「Twitterでログイン」とか、そういうのを作るときに、Net::Twitter::Liteはとても便利です。

Mojoliciousで、Net::Twitter::Liteでの認証処理を書いていたのですが、OAuthで使うget\_authorization\_urlやrequest\_access\_tokenが遅すぎて（30秒ほどかかる）、nginx経由だと502エラーが出て困っていました。

## LWP::Protocol::Net::Curl

そんな時に見つけたのがこのページ。

- [libcurl as LWP backend (or "all your protocol are belong to us")](http://blogs.perl.org/users/stas/2012/11/libcurl-as-lwp-backend-or-all-your-protocol-are-belong-to-us.html)

Net::Twitter::Liteでは、内部的にLWP::UserAgentを使っているので、もしかしたら…と思ってやってみたら、上手くいきました。

使い方は、Net::Twitter::Liteを使う前にuseしておくだけで良さそうです。



```perl
use LWP::Protocol::Net::Curl;
use Net::Twitter::Lite;
...
```




他には何も変えていないのに、認証がすぐに終わるようになった。

## 30秒もかかるなんてなにかおかしい

認証が速く終わるようになったので問題はないのですが。

結局何がおかしいのか全然わかりません。
