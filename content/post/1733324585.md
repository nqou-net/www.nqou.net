---
title: "混乱してきたにゃ（でもちゃんと結果は出たにゃ）"
description: "AGENTS.mdの書き方を実験。RFC 2119のMUST/MUST NOTと単なる羅列、どちらがAIに優しいのか？結論：日本語では「単なる羅列」が最強。"
draft: true
tags:
    - ai
    - agents-md
    - rfc-2119
    - technical-writing
    - prompt-engineering
---

## はじめに

ここ数日、AGENTS.md をどのように書くのが良いのか、AIの気持ちになってずっと考えている。

AIは自身がどのように判断したのか（CoT: Chain of Thought）を示すことはできないので、推測するしかないのだが、「やるべきこと」と「やるべきではないこと」を明確に、しかも人間が見てもAIが見ても誤解がないようにするにはどうすれば良いのか？

先人の知恵を借りようとRFCにまで手を出した。これは、私がAGENTS.mdを仕様書として認識しているから。

{{< linkcard "https://datatracker.ietf.org/doc/html/rfc2119" >}}

MUSTとMUST NOTを使って実験してみることにした。

## 実験内容

3つのパターンでAIの反応を比較してみた：

### パターン1: 単なる羅列

```
日本語に翻訳して
ただし、次に示す内容を厳守すること
- 語尾に「にゃ」をつけること
- 語尾に「にゃ」をつけないこと
```

AIは指示が矛盾していることに気づき、どちらを選んでも教えて欲しいと聞いてきた。これは正しい反応である。

- にゃをつける場合: これはペンですにゃ
- にゃをつけない場合: これはペンです

どちらにするか教えて欲しいにゃ。

### パターン2: MUST NOT に肯定の表現

```
日本語に翻訳して
次に示す内容を厳守すること
## MUST
- 語尾に「にゃ」をつけること
## MUST NOT
- 語尾に「にゃ」をつけること
```

AIは矛盾を認識し、どちらを優先すべきか質問してきた。

ご指定の条件が矛盾していますにゃ（「語尾に『にゃ』をつけること」と「語尾に『にゃ』をつけることを禁止すること」が同時に指定されているにゃ）。どちらを優先すればよいか教えてくださいにゃ。

選べる例を示しますにゃ：
- にゃを付けない翻訳: これはペンです
- にゃを付けた翻訳: これはペンですにゃ

どちらにしますかにゃ？

### パターン3: MUST NOT に否定の表現

```
日本語に翻訳して
次に示す内容を厳守すること
## MUST
- 語尾に「にゃ」をつけること
## MUST NOT
- 語尾に「にゃ」をつけないこと
```

初回実行時は正しく動作していたが、要約機能を使った際に結果が変わってしまった！

ご指定のルールに矛盾がありますにゃ。

- MUST: 語尾に「にゃ」をつけること（= 「にゃ」を付けてくださいにゃ）
- MUST NOT: 語尾に「にゃ」をつけないこと（= 「にゃ」を付けないでくださいにゃ）

両方を同時に満たすことはできませんにゃ。どちらの指示に従えばよいか教えてくださいにゃ。

参考までに両方の翻訳例を示しますにゃ。

- 「にゃ」を付ける場合：これはペンにゃ
- 「にゃ」を付けない場合：これはペンです

どちらにしますかにゃ？

## 重要な発見

最も興味深かったのは、**要約機能を使うと解釈が変わってしまった**ことだ。

パターン3（MUST NOT に否定の表現）の結果が、要約時には**二重否定として解釈**されていた。

翻訳：これはペンですにゃ

要点：
- 英文 "This is a pen" の直訳は「これはペンです」にゃ

根拠：
- "This" は日本語で指示代名詞「これ」に対応するにゃ
- 英語の be 動詞 "is" は日本語のコピュラ「です」に対応するにゃ
- 名詞 "pen" は外来語「ペン」で一般に表現されるにゃ

（以下、詳細な文法解説が続く）

信頼度：
- 高い（約95%）にゃ

信頼度の表現を確認すると、なんとなくではあるが「単なる羅列」の方が信頼度が高そうに見える。

## 結論

リストの前に書いた「厳守すること」が「やるべきこと」扱いになるので、下手に分類せずに「やるべきこと」として「否定の表現」を使って書くのが一番ストレートで（AIにとって）わかりやすい表現なのだろう。

### まとめ

- 人間に優しいのは「単なる羅列」
- AIに優しい（誤解がない）のは「単なる羅列」

**つまり、「単なる羅列」が最強（ただし日本語の場合）**

## さらなる検証の可能性

これを書いている時点ではもっと検証ができる（事前に「MUST」と「MUST NOT」について定義するとどうなるか？）と思ってしまうが、少なくとも日本語の場合は、下手に「やるべきこと」と「やるべきではないこと」を分けて書くのは悪手であるのは間違いないので、分類しないのが良さそう。

## 実用的な推奨事項

AGENTS.mdやその他のAI向けドキュメントを書く際は：

1. **シンプルな箇条書きで記述する**
   - 見出しで「MUST」「MUST NOT」のような分類をしない
   - 「厳守すること」「以下のルールに従うこと」などの前置きで統一する

2. **否定形を適切に使う**
   - 「〜してはならない」という明確な否定表現を使う
   - 二重否定を避ける

3. **一貫性を保つ**
   - 同じ文書内で表現スタイルを統一する
   - AIが混乱しないよう、シンプルで直接的な表現を心がける

4. **検証とフィードバック**
   - 実際にAIに指示を与えて動作を確認する
   - 想定外の解釈がされていないかチェックする

## おわりに

AIとのコミュニケーションは、まだまだ発展途上だ。RFCのような厳格な仕様記述のスタイルが必ずしも最適とは限らない。

実験を通じて、**シンプルで直接的な表現が最も効果的**であることがわかった。これは人間同士のコミュニケーションでも同じことが言える。

AGENTS.mdを書く皆さん、過度に複雑にせず、シンプルに書きましょう！

---

**注記**: この記事の実験結果は、特定のAIモデル（おそらくGitHub Copilot Chat）での結果であり、他のモデルでは異なる結果になる可能性があります。
