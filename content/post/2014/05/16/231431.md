---
date: 2014-05-16T23:14:31+09:00
description: 昔作った、jGrowlを作りなおしてみました
draft: false
epoch: 1400249671
image: /favicon.png
iso8601: 2014-05-16T23:14:31+09:00
tags:
  - jquery
title: jGrowlのサンプルページを作ってみた

---
[@nqounet](https://x.com/nqounet)です。

昔作った、jGrowlを作りなおしてみました。

- [jGrowl | JavaScript Samples | nqou.net](/samples/jgrowl.html#index)

## Growlと言えば

おそらくこの当時は、なんとかGrowlというのが流行っていて、JavaScriptだからjGrowlという感じだったんじゃないかと思います。

Growlは、Macのアプリで、お知らせをピコーンと出してくれるヤツです。

最近ではOSの標準機能としても似たような機能があるので、Growl自体はあまり使われていない気がします。

時代の流れは速いですね。

- [stanlemon/jGrowl](https://github.com/stanlemon/jGrowl)

この手のライブラリは、`toaster`とか`notification`で検索すると出てきますが、仕事でも使ったこともある「noty」というのはかなり性能が良いと思います。

- [noty - a jQuery Notification Plugin](http://ned.im/noty/)
- [needim/noty](https://github.com/needim/noty)

bootstrapテイストなモノも結構ありました。

沢山選択肢があると、どういう基準で選ぶのかにセンスが問われますね。

## Grapnelというrouterを使ってみた

今回は、ボタンからスクリプトを呼び出すために、ライブラリを使ってみました。

前回はいろいろ考えて自力で実装したのです（それはそれで気に入っています）が、世間ではどんな手法があるのかは常に調査しておくべきでしょう。

ということで、microjsで調べた中から`Grapnel`というライブラリを選んで使用しました。

使い方もそれほど難しくはありません。

基本的には、URLのhashを読み取って、そこから予め登録しておいたオブジェクトを呼び出してくれる使い方が簡単だと思います。

githubには、getを使う方法が先に書いてあるのですが、個人的にはこっちの書き方（オブジェクトをlistenする方法）が好きです。



```js
var router = {
    hello: function(req){
        console.debug('req:', req);
        alert('Hello Grapnel!');
    }
};
Grapnel.listen(router);
```


 

```html
<a href="#hello">Hello Grapnel!</a>
```




注意が必要なのは、hashchangeのイベントを見ているのか、同じリンク（URLのhash）を何度押しても最初しか動作しません。

変化してないからですね。

なので、二種類以上のリンクを作成するか、強制的にhashを戻すか、いずれかの手段が必要です。

まあ、こういう使い方がイレギュラーかもしれませんが、POSTした後のリダイレクトと思えば、それほどでもないかなぁと思います。
