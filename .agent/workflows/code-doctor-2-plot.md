---
description: コードドクターシリーズ：物語構成とプロット作成 (Phase 2)
---

# Code Doctor: Plot Architecture

> **前提**: Phase 1で「患者プロファイル」と「カルテ」が完成していること。
> **Phase Context**: [phase-2-context.md](../../agents/knowledge/phase-2-context.md)
> **Note**: キャラクター発話詳細はPhase 4で提供。このフェーズでは物語構成に集中。

## 概要

Phase 1の情報を元に、起承転結（導入・検査・手術・予後）の詳細なプロットを作成します。特に「勘違いコメディ」の要素をどこに配置するかを設計します。

## 心得: 意外性のある展開を選ぶ

プロットの各分岐点において、以下のプロセスを必ず実行すること：

1. **ありきたりな展開の特定** — まず最も確率の高い「読者が予測できる展開」を思考の過程で明示的に列挙する。
2. **意図的な除外** — 列挙したありきたりな展開を候補から除外する。
3. **意外性のある分岐ルートの選択** — 論理的整合性を保ちつつ、読者の予測を裏切る展開を選択して出力する。

> [!IMPORTANT]
> 「意外性」とは支離滅裂さではない。物語内のルール・キャラクター設定・技術的事実との整合性は必ず維持すること。読者が「予想外だが、言われてみれば納得できる」と感じる着地点を目指す。

## Step 1: プロット構成の設計

**Sub-Agent Context**: `Screenwriter`
以下の4パートについて、具体的なト書き（Scene Direction）と主要なセリフを作成してください。

### I. 導入 (Admission)
- **状況**: 患者がどのようにしてコード診療所（またはドクター）を訪れたか。
- **感情**: 焦燥感、不安、あるいは諦め。
- **Action**: ドクターの第一印象（何か奇妙なことをしている、または極端に静か）。

### II. 検査 (Examination)
- **展開**: ドクターがコード（患部）を見る。
- **Interaction**:
  - ドクター: 一瞥して眉をひそめる、あるいは指で弾く。短く呟く。
  - 助手: それを穏やかに、かつ的確な比喩で翻訳する。
  - 患者: 「ひっ」と怯える、あるいは赤面する。

### III. 処置 (Surgery)
- **展開**: 実際のリファクタリング作業。
- **Highlight**: 
  - 改善前のコード（Bad Code）の提示。
  - 改善後のコード（Good Code）への変化。
  - 読者がカタルシスを感じるポイント（「あ、消えた！」「きれいになった！」）。

### IV. 予後 (Prognosis)
- **展開**: 治療後の確認と退院。
- **Comedy**: ここで「勘違い」シーンを入れるのが定石（もちろん他のパートでも可）。
- **Closing**: 次の現場（プロジェクト）へ向かう患者のポジティブな決意。

## Step 2: 勘違いシーンの設計

**Checklist**:
- ドクターの行動は論理的か？（不自然な親切心ではないか？）
- 患者の誤解は感情的か？（「愛」や「友情」と錯覚しているか？）
- 助手の反応は適切か？（否定せず、肯定もせず、ただ見守るか？）

## Step 3: 舞台設定の整合性チェック

**Checklist**:

プロットの**全シーン**を走査し、「来院」と「往診」で**物理的に矛盾する描写**がないか確認する。

### 来院（クリニック）の場合

- ドクターと助手は**診療所に居る側**（帰り支度をしない・移動しない）
- 患者が「来て」「帰る」側（帰り支度・ドアを出る主語は患者）
- 患者のデスク・自席は存在しない（持ち込んだノートPC等のみ）
- クリニック設定の小物（O'Reilly本の壁、トリプルディスプレイ、HHKB）が使用可
- **鉄の扉は外開き**（廊下側に開く）:
  - 入る時（廊下→室内）: **引いて**開ける（pull open）
  - 出る時（室内→廊下）: **押して**開ける（push open）

### 往診（患者のオフィス/自宅）の場合

- ドクターと助手が「来て」「帰る」側（帰り支度・ドアを出る主語はドクター）
- 患者は**自分の場所に居る側**（デスク・付箋・モニタ等そのまま使用可）
- クリニック固有の小物は存在しない
- 扉の開閉方向は患者の環境に依存（描写がある場合は一貫性に注意）

### 共通チェック項目

- [ ] 「帰り支度」「鞄を持ち上げた」等の主語が、設定上「去る側」の人物か
- [ ] 患者の所有物（デスク・付箋・モニタ）が、その舞台に存在し得るか
- [ ] 退場シーン（ドアの開閉、打鍵音の遮断等）の主語が正しいか
- [ ] 退場後のシーン（廊下・自席に戻る等）が設定と矛盾しないか
- [ ] **扉の開閉動詞**: 来院時は入室「引く」/退室「押す」（外開き）。逆になっていないか

## Output

生成されたプロットは以下のパスに保存してください：
- Path: `agents/code-doctor-series/<slug>/plot.md`
  - `<slug>` は対象のデザインパターン名のケバブケース（例: `factory-method`, `singleton`）に置き換えてください。
  - 必要なディレクトリが存在しない場合は作成してください。

## Output Example

```markdown
# Plot Outline

## Scene 1: The Emergency
患者が深夜のオフィスで頭を抱えていると、突然ドアが開き、往診用の黒い鞄を持ったドクターと助手が現れる。「呼んだか？」「呼んでません」「コードが悲鳴を上げていたので」。

## Scene 2: The Misunderstanding
ドクターが患者の肩に手を置く（実は椅子の背もたれにある埃を払っただけ）。
患者：「（なんて温かい手だ…僕を励ましてくれているのか？）」
助手：（無言でウェットティッシュをドクターに渡す）
...
```
