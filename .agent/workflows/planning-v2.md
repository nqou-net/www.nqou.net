---
description: 汎用プランニングワークフロー（自己改善機能付き）
---

# 汎用プランニング v2

> 参照: [WORKFLOWS.md](../../WORKFLOWS.md), [AGENTS.md](../../AGENTS.md)
> 知見ベース: [planning-insights.md](../../agents/knowledge/planning-insights.md)

---

## Step 0: 知見の読み込み

// turbo
1. 知見ファイルの確認:
   ```bash
   cat agents/knowledge/planning-insights.md 2>/dev/null | head -100
   ```
2. 存在する場合:
   - 今回のコンテキストに関連する知見を抽出
   - 特に「成功パターン」と「失敗パターン」に注目
   - 実行中に参照すべきポイントをリスト化
3. 存在しない場合:
   - 初回実行として続行（Step 7で知見ファイルを作成）

---

## Step 1: コンテキスト確認

ユーザーに以下を確認し、作成するコンテンツを明確化:

### 1.1 コンテンツタイプの特定

| タイプ | 説明 | 出力形式 |
|--------|------|----------|
| シリーズ記事 | 複数回に分けた連載 | 連載構造表 |
| 単体記事 | 1記事で完結 | H2/H3見出し階層 |
| チュートリアル | ステップバイステップ解説 | ステップ構造 |
| リファレンス | API/関数リファレンス | 項目一覧 |

### 1.2 確認項目

- **テーマ**: 技術領域、対象技術
- **ペルソナ**: 読者のスキルレベル、前提知識
- **ゴール**: 読者が得られる成果
- **スコープ**: 含める内容 / 除外する内容

### 1.3 既存テーマとの重複チェック

// turbo
```bash
cat PLANNING_STATUS.md | grep -E "^\|.*\|.*\|" | tail -n +2
```

1. 公開済み・進行中のシリーズ一覧を確認
2. 類似テーマがある場合:
   - 同一パターン × 同一題材 → **回避**（別の題材を検討）
   - 同一パターン × 異なる題材 → OK
   - 異なるパターン × 類似題材 → OK
   - 派生・発展・続編 → **歓迎**（既存シリーズへのリンクを計画）

3. 重複判定の例:
   | ケース | 既存 | 新規案 | 判定 |
   |--------|------|--------|------|
   | 回避 | Command + テキストエディタ | Command + テキストエディタ | ❌ 重複 |
   | OK | Command + テキストエディタ | Command + 家電リモコン | ✅ 題材が違う |
   | OK | Command + テキストエディタ | Memento + テキストエディタ | ✅ パターンが違う |
   | 歓迎 | Command 入門 | Command 実践編 | ✅ 続編 |

### 1.4 出力

コンテキスト定義を文書化（task.mdまたは構造案ファイルの冒頭に記載）

---

## Step 2: 調査・情報収集

// turbo
1. 既存調査の確認:
   ```bash
   ls -la content/warehouse/ | grep -i "<テーマに関連するキーワード>"
   ```

2. 調査ファイルが存在しない場合、investigative-research エージェントとして以下を実行:

### 2.1 一次情報収集（優先度: 高）
- 公式ドキュメント
- RFC/仕様書
- 著者の直接発言（ブログ、講演）

### 2.2 二次情報収集
- 技術記事・ブログ
- 書籍
- Stack Overflow等のQ&A

### 2.3 各項目の付記（必須）

| 項目 | 説明 |
|------|------|
| **要点** | 1-2文で要約 |
| **根拠** | なぜ信頼できるか |
| **仮定** | 何を前提としているか |
| **出典** | URL/ASIN/ISBN |
| **信頼度** | 1-10（10が最高） |
| **鮮度** | 情報の更新日 |

### 2.4 出力
`content/warehouse/<slug>.md`

---

## Step 3: 競合・内部リンク分析

### 3.1 外部競合分析

1. 検索上位5記事の構成分析:
   - 見出し構造
   - カバーしているトピック
   - 欠けている観点

2. 差別化可能なポイント特定:
   - 既存記事にない視点
   - より実践的なコード例
   - 読者体験の差別化

### 3.2 内部リンク調査

// turbo
```bash
grep -r "<関連キーワード>" content/post/ --include="*.md" -l | head -20
```

1. 関連記事のリスト化
2. 相互リンク候補の特定
3. シリーズ間の関連性マッピング

### 3.3 独自価値の定義

競合分析の結果から、本コンテンツの独自価値を3つ以上定義

### 3.4 出力
調査ファイル（`content/warehouse/<slug>.md`）に「競合分析」セクションとして追記

---

## Step 4: 構造案作成

### 4.1 思考プロセス

1. **Step-Back思考**: 本質的に何を伝えたいのか捉え直す
2. **Tree of Thoughts**: 複数のアプローチを並行検討

### 4.2 3案の作成

| 案 | アプローチ | 特徴 |
|----|-----------|------|
| **案A（王道）** | 標準的・教科書的 | 安定感、予測可能 |
| **案B（革新）** | 新しい視点・実験的 | 新鮮さ、差別化 |
| **案C（逆転）** | 逆説的・意外 | インパクト、記憶に残る |

### 4.3 各案の必須項目

#### 共通項目
- 特徴・メリット・デメリット
- 推奨タグ（5個まで、英小文字ハイフン）
- meta description（120文字以内）
- 差別化ポイント

#### コンテンツタイプ別

**シリーズ記事の場合**:
| 回 | タイトル | 新概念（1記事1つ） | ストーリー |
|----|---------|-------------------|-----------|
| 1 | ... | ... | ... |

**単体記事の場合**:
```
## H2見出し1
### H3見出し1-1
### H3見出し1-2
## H2見出し2
...
```

**チュートリアルの場合**:
| ステップ | タイトル | 成果物 | 所要時間 |
|----------|---------|--------|----------|
| 1 | ... | ... | ... |

**リファレンスの場合**:
| 項目 | 説明 | 例 |
|------|------|-----|
| ... | ... | ... |

### 4.4 難易度勾配の可視化（シリーズ/チュートリアルの場合）

```
難易度
  ↑
  │    ○ 第N回
  │  ○
  │ ○
  │○
  └──────────→ 進行
```

### 4.5 出力
`agents/structure/<slug>.md`

---

## Step 4.5: ステータス登録

構造案を PLANNING_STATUS.md に登録:

1. `PLANNING_STATUS.md` の「進行中」セクションに行を追加
2. ステータス: 📝 計画中
3. 開始日・更新日: 本日

```markdown
| [<slug>.md](agents/structure/<slug>.md) | <タイトル> | 📝 計画中 | - | YYYY-MM-DD | YYYY-MM-DD |
```

---

## Step 5: レビューサイクル

### 5.1 3段階レビュー

| 回 | 焦点 | チェック項目 |
|----|------|-------------|
| 1回目 | **構造** | 一貫性、段階的難易度、1記事1概念 |
| 2回目 | **品質** | ペルソナ適合、技術的正確性、差別化 |
| 3回目 | **SEO** | キーワード配置、検索意図、タグ適切性 |

### 5.2 レビューチェックリスト

#### 構造レビュー
- [ ] 全体の流れに一貫性があるか
- [ ] 難易度が段階的に上がっているか
- [ ] 各回/章が1つの概念に集中しているか
- [ ] 重複や抜けがないか

#### 品質レビュー
- [ ] ペルソナに適合しているか
- [ ] 技術的に正確か（SOLID原則等）
- [ ] 競合と十分に差別化されているか
- [ ] 「動く → 破綻 → パターン → 完成」の流れがあるか

#### SEOレビュー
- [ ] 主要キーワードがタイトルに含まれているか
- [ ] 検索意図に合致しているか
- [ ] タグが適切か（5個以内、英小文字ハイフン）
- [ ] meta descriptionが効果的か

### 5.3 改善記録

各レビューの指摘事項と対応を構造案ファイルに追記:

```markdown
## レビュー履歴

### 1回目レビュー（構造）
- **指摘**: ...
- **対応**: ...

### 2回目レビュー（品質）
- **指摘**: ...
- **対応**: ...

### 3回目レビュー（SEO）
- **指摘**: ...
- **対応**: ...
```

---

## Step 6: 知見の記録

### 6.1 振り返り

今回の実行で得た気づきを整理:

| カテゴリ | 内容 |
|----------|------|
| 成功パターン | うまくいったアプローチ |
| 失敗パターン | 避けるべきアプローチ |
| 新しい発見 | 予想外だった効果的な手法 |
| ユーザーフィードバック | 選定理由から得た洞察 |
| 改善提案 | ワークフロー自体への改善案 |

### 7.2 知見の記録

`agents/knowledge/planning-insights.md` に追記:

```markdown
## YYYY-MM-DD: <コンテンツ名>

### 知見タイプ: <成功/失敗/発見/フィードバック/改善>

**コンテキスト**: <状況の説明>

**知見**: <学んだこと>

**適用場面**: <今後どんな場面で活用できるか>
```

コンテンツタイプに応じて次のワークフローへ:

| タイプ | 次のワークフロー |
|--------|------------------|
| シリーズ記事（連載版） | `/series-article-writing` |
| シリーズ記事（統合版） | `/series-unified-write` |
| 単体記事 | `/single-article-writing` |

---

## 注意事項

- 調査の深さはコンテンツの複雑さに応じて調整
- 3案すべてを同じ詳細度で作成する必要はない（推薦案を最も詳細に）
- レビューサイクルは必要に応じて短縮可能（ただし最低1回は実施）
- 知見の記録は簡潔に（1エントリ3-5行程度）
