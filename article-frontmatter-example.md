---
# SEO最適化済みフロントマター例
# 記事: Perlで値オブジェクトを使ってテスト駆動開発してみる

title: 'PerlでJSON-RPC 2.0を実装 — 値オブジェクトとTDDで学ぶ実践チュートリアル'
draft: true  # 公開準備ができたら false に変更

# SEO最適化されたメタディスクリプション（160文字以内）
description: '値オブジェクトの基礎からJSON-RPC 2.0の実装まで、Perl + Moo + Test2でTDDを実践。初心者でもわかる段階的チュートリアルで、保守性の高いコード設計を体験できます。Docker環境構築手順付き。'

# 推奨タグ（優先度順、検索最適化済み）
tags:
  - perl                      # プライマリ言語
  - value-object              # メインテーマ
  - test-driven-development   # 開発手法（既存記事との統一）
  - moo                       # 使用フレームワーク
  - test2                     # テストフレームワーク
  - json-rpc                  # 実装対象
  - tutorial                  # コンテンツタイプ

# オプション: アイキャッチ画像
# image: /public_images/2025/XXXXXXXXXX-perl-value-object-tdd.jpg
---

<!-- 
============================================================
SEO最適化ガイドライン
============================================================

■ キーワード使用頻度目標:
  - 値オブジェクト: 15-20回
  - TDD/テスト駆動開発: 12-15回
  - Perl: 10-12回
  - JSON-RPC 2.0: 8-10回
  - Moo: 8-10回
  - Test2: 6-8回

■ 必須内部リンク:
  1. 環境構築記事への参照（冒頭）
     → /post/2025/12/08/214754/
  2. TDD基礎への補足リンク（本文中）
     → /post/2025/12/08/214754/

■ 推奨見出し構成（H2/H3）:
  - はじめに
  - 値オブジェクトの基礎概念
    - 値オブジェクトとは
    - プリミティブ型との違い
  - JSON-RPC 2.0仕様の理解
  - TDDで実装開始
    - 環境構築の確認
    - Requestオブジェクトの実装
    - Responseオブジェクトの実装
  - まとめと次のステップ

■ 画像ALTテキスト例:
  - "PerlとMooで値オブジェクトを実装するTDD開発イメージ"
  - "テスト駆動開発のレッド・グリーン・リファクタリングサイクル"
  - "JSON-RPC 2.0の値オブジェクト関係図"

■ 目標文字数: 3,500-4,500文字

============================================================
-->

## はじめに

**値オブジェクト（Value Object）** という言葉を聞いたことがありますか？オブジェクト指向設計における重要なパターンの一つですが、意外と実践している人は少ないかもしれません。

この記事では、**Perlを使って、テスト駆動開発（TDD）で段階的に値オブジェクトを実装していきます**。題材として、**JSON-RPC 2.0仕様**に準拠したオブジェクトを作成し、実践的なスキルを身につけていきましょう。

### この記事で学べること

- 📚 値オブジェクトの概念と、なぜ必要なのか
- 🛠️ PerlとMooを使った値オブジェクトの実装方法
- 🔄 TDDの基本サイクル「レッド→グリーン→リファクタリング」の実践
- 📋 JSON-RPC 2.0仕様準拠の実装例
- ✅ Test2による効果的なテスト手法

### 対象読者

- Perlの基本文法は理解しているが、値オブジェクトについては知らない方
- オブジェクト指向設計のベストプラクティスを学びたい方
- TDD（テスト駆動開発）に興味がある方
- JSON-RPC実装の実例を探している方

### 前提条件

この記事では、Perl開発環境とDockerが整っていることを前提としています。
環境構築から始めたい方は、まず以下の記事をご覧ください：

{{< linkcard "/post/2025/12/08/214754/" >}}

---

## 値オブジェクトの基礎概念

### 値オブジェクトとは

値オブジェクト（Value Object）は、**属性のみを持ち、同一性（アイデンティティ）を持たないオブジェクト**です。

例えば：
- 金額（1000円と1000円は同じ）
- 日付（2025年12月15日と2025年12月15日は同じ）
- メールアドレス（`user@example.com`と`user@example.com`は同じ）

これらは「値」として扱われ、**内容が同じなら同じものとみなされます**。

### プリミティブ型との違い

```perl
# プリミティブ型（文字列）で金額を表現
my $amount = "1000";

# 問題1: 型安全性がない
$amount = "thousand";  # コンパイルエラーにならない

# 問題2: バリデーションがない
$amount = "-1000";  # 負の金額が許容されてしまう

# 問題3: ビジネスロジックが散在
my $tax = $amount * 0.1;  # 消費税計算があちこちに
```

値オブジェクトを使うと：

```perl
# 値オブジェクトで金額を表現
my $amount = Amount->new(value => 1000);

# 利点1: 型安全性
# $amount = Amount->new(value => "thousand");  # バリデーションエラー

# 利点2: ビジネスルールをカプセル化
my $tax = $amount->calculate_tax();  # ロジックが集約

# 利点3: イミュータブル（不変）
# $amount->value = 2000;  # 変更不可、新しいオブジェクトを作る
```

<!-- 以下、記事本文を続ける... -->

---

## 参考リンク

### 内部記事
- [MooによるTDD講座 #1 - 環境構築とはじめてのテスト駆動開発](/post/2025/12/08/214754/)

### 外部リソース
- [JSON-RPC 2.0公式仕様](https://www.jsonrpc.org/specification)
- [Moo - Minimalist Object Orientation (with Moose compatibility)](https://metacpan.org/pod/Moo)
- [Test2::Suite - Test2ベースのモダンなテストツール群](https://metacpan.org/pod/Test2::Suite)

---

**次回予告**: 実装した値オブジェクトを使って、より複雑なドメインモデルを構築していきます。エンティティとの違いや、集約ルート、リポジトリパターンにも触れる予定です。

お楽しみに！
