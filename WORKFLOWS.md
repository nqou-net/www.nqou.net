# WORKFLOWS.md — 記事作成ワークフローガイド

> 補助文書: [AGENTS.md](AGENTS.md)（プロジェクト概要、コンテンツ作成ルール、エージェントマッピング、調査ドキュメント運用）を事前確認

---

## ワークフロー一覧

### シリーズ記事

| ワークフロー | 説明 |
|---|---|
| [series-article](.agent/workflows/series-article.md) | シリーズ記事の作成（全体フロー） |
| [series-article-planning](.agent/workflows/series-article-planning.md) | プランニングフェーズ（調査→構造案→レビュー→選定） |
| [series-article-writing](.agent/workflows/series-article-writing.md) | ライティングフェーズ（日時決定→原稿作成→リンク・挿絵→目次） |
| [series-article-review](.agent/workflows/series-article-review.md) | レビューフェーズ（コード検証→校正→品質レビュー→公開） |

### 単体記事

| ワークフロー | 説明 |
|---|---|
| [single-article](.agent/workflows/single-article.md) | 単体記事の作成（全体フロー） |
| [single-article-planning](.agent/workflows/single-article-planning.md) | プランニングフェーズ（調査→アウトライン作成） |
| [single-article-writing](.agent/workflows/single-article-writing.md) | ライティングフェーズ（原稿作成→挿絵追加） |
| [single-article-review](.agent/workflows/single-article-review.md) | レビューフェーズ（校正→最終チェック→公開） |

### 統合記事（連載構造案から1記事作成）

| ワークフロー | 説明 |
|---|---|
| [unified-article-from-series](.agent/workflows/unified-article-from-series.md) | 連載構造案を1つの長編記事に統合（章構成で1章1概念） |

---

## 基本方針

- プロンプトテンプレートに厳密に従う
- **公開前は必ず reviewer エージェントで最終チェック**
- 重複チェック: [SERIES.md](SERIES.md)

---

## プロンプトテンプレート

### 調査・情報収集依頼

```
キーワード・関連トピックの調査:
- 最新かつ信頼性の高い情報を収集
- 各項目に**要点**、**根拠**、**仮定**、**出典**（URL/ASIN/ISBN）、**信頼度**（1-10）を付記
- 競合記事分析、内部リンク調査（`/content/post`配下をgrep）
- 出力: `content/warehouse/<slug>.md`
- 内部リンク変換例: `/content/post/2025/12/24/000000.md` → `/2025/12/24/000000/`
```

### 連載構造案作成依頼

```
調査結果（content/warehouse/<slug>.md）に基づき連載構造案3案（A/B/C）作成:
- 常識的枠組みを排除、極端だが革新的なアプローチ
- インパクト・独自性優先
- 生成後レビュー3回繰り返し

各案の必須項目:
- 特徴・アプローチ（メリット/デメリット）
- 連載構造表: 回数|タイトル|新概念（1記事1概念）|ストーリー|コード例1/2|推奨タグ（5個まで、英小文字ハイフン）
- 差別化ポイント、推薦案と理由

出力: agents/structure/<slug>.md（YAMLフロントマター、調査参照元明記）
```

### 連載構造案レビュー依頼

```
agents/structure/<slug>.md をSEO+品質の両面でレビュー

SEO視点:
- キーワード配置、検索意図合致、タグ適切性、メタ情報最適化

品質視点:
- 構造一貫性、1記事1概念、案の差別化、ペルソナ適合、技術的正確性

レビューサイクル（最大3回）:
- 1→2版: 構造一貫性、段階的難易度、1記事1概念
- 2→3版: SEO最適化、品質基準全項目
- 早期合格可

出力: 改善版を同一ファイルに追記、レビュー履歴セクション追加
```

### アウトライン依頼

```
調査結果に基づきアウトライン案3つ（A/B/C）作成:
- 異なる視点・アプローチ
- 生成後レビュー3回

各案の必須項目:
- 要約（1行）
- H2/H3見出し階層
- 推奨タグ（5個まで）
```

### 原稿作成依頼

```
調査結果・アウトラインに基づき記事作成:
- 技術的正確性、最新情報
- コード例: 言語タグ、バージョン、外部依存を明記
- 引用: `{{< linkcard "URL" >}}`形式
- 書籍: `{{< amazon asin="ASIN" title="タイトル" >}}`形式
- 生成後レビュー3回

文体規則:
- 本文: 書き言葉、です・ます調
- 箇条書き: だ・である調、末尾句点なし

出力: 新規ファイル、YAMLフロントマター
```

---

## 品質基準

### 単体記事

- H2/H3見出しの適切な分割
- 各セクション説明が具体的（曖昧な語句は再要求）
- コード例に言語・バージョン・外部依存明記
- タグ規約遵守（英小文字・ハイフン）

### 連載構造案

- 構造一貫性: ストーリーの論理的流れ
- 段階的難易度上昇: 初回→最終回
- 1記事1概念: 複数概念詰め込み禁止
- 3案の明確な差別化
- 連載構造表完全性: 全回分の回数・タイトル・新概念・ストーリー・コード例・タグ

### シリーズ記事

- ストーリー構成: 動く→破綻→パターン導入→完成コード
- SOLID原則言及: 破綻でSRP/OCP違反を具体的指摘
- 表現スタイル: 遊び心ある表現
- 挿絵完備: Mermaid図（クラス図、シーケンス図等）。クラス名に特殊文字を含む場合は必ずバッククォートでエスケープする
- リンク構造: シリーズ間リンク、目次リンク
- コード例完全性: 破綻例+解決例、言語・バージョン・依存明記
